(function(){"use strict";var e={1383:function(e,t,a){var s=a(9242),i=a(3396),l=a(7139);const o={class:"navbar is-fixed-top pl-2 pr-2 is-dark",role:"navigation","aria-label":"main navigation"},n={class:"navbar-brand"},c=(0,i._)("img",{src:"favicon.ico",alt:"short-logo",class:"mr-2"},null,-1),r=(0,i._)("span",{"aria-hidden":"true"},null,-1),d=(0,i._)("span",{"aria-hidden":"true"},null,-1),m=(0,i._)("span",{"aria-hidden":"true"},null,-1),u=[r,d,m],h={key:0,class:"navbar-start"},p={class:"navbar-end"},g={class:"navbar-item"},w={key:0},_={key:0},v=(0,i._)("strong",null,"Subscribe",-1),y={key:1,class:"navbar-item has-dropdown is-hoverable"},b={class:"navbar-link"},k={class:"navbar-dropdown"},f=(0,i._)("hr",{class:"navbar-divider"},null,-1),C=(0,i._)("a",{class:"navbar-item is-hidden-mobile",href:"https://github.com/byoso/lgm_front/issues",target:"_blank"}," Report an issue ",-1),D={class:"buttons"},M={key:0},I=(0,i._)("strong",null,"Sign up",-1),P={key:1},L=(0,i._)("div",{class:"bottom"},null,-1);function x(e,t,a,s,r,d){const m=(0,i.up)("router-link"),x=(0,i.up)("fa"),S=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("nav",o,[(0,i._)("div",n,[(0,i.Wm)(m,{to:"/",class:"navbar-item",style:{"font-weight":"bold"},onClick:t[0]||(t[0]=e=>r.burgerIsActive=!1)},{default:(0,i.w5)((()=>[c,(0,i.Uk)(" RPGAdventure.eu ")])),_:1}),(0,i._)("a",{role:"button",class:(0,l.C_)(["navbar-burger",{"is-active":r.burgerIsActive}]),onClick:t[1]||(t[1]=e=>d.toggleBurger()),"aria-label":"menu","aria-expanded":!1,"data-target":"navbarBasicExample"},u,2)]),(0,i._)("div",{id:"navbarBasicExample",class:(0,l.C_)(["navbar-menu",{"is-active":r.burgerIsActive}]),onClick:t[2]||(t[2]=e=>r.burgerIsActive=!1)},[e.$store.state.user?((0,i.wg)(),(0,i.iD)("div",h,[e.$store.state.isAuthenticated?((0,i.wg)(),(0,i.j4)(m,{key:0,to:"/dashboard",class:"navbar-item"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Tables ")])),_:1})):(0,i.kq)("",!0),e.$store.state.isAuthenticated?((0,i.wg)(),(0,i.j4)(m,{key:1,to:"/collections",class:"navbar-item is-hidden-mobile"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Collections ")])),_:1})):(0,i.kq)("",!0),e.$store.state.isAuthenticated&e.$store.state.user.is_subscriber?((0,i.wg)(),(0,i.j4)(m,{key:2,class:"navbar-item is-hidden-mobile",to:{name:"exchangesView"}},{default:(0,i.w5)((()=>[(0,i.Uk)(" Exchanges ")])),_:1})):(0,i.kq)("",!0)])):(0,i.kq)("",!0),(0,i._)("div",p,[(0,i._)("div",g,[d.configuration.active_stripe_subscriptions?((0,i.wg)(),(0,i.iD)("div",w,[e.$store.state.user?((0,i.wg)(),(0,i.iD)("div",_,[e.$store.state.isAuthenticated&!e.$store.state.user.is_subscriber&d.configuration.open_subscriptions?((0,i.wg)(),(0,i.j4)(m,{key:0,class:"button is-primary is-small mr-5",to:{name:"subscriptionsView"}},{default:(0,i.w5)((()=>[v])),_:1})):(0,i.kq)("",!0)])):(0,i.kq)("",!0)])):(0,i.kq)("",!0),e.$store.state.isAuthenticated?((0,i.wg)(),(0,i.iD)("div",y,[(0,i._)("a",b,[(0,i.Uk)((0,l.zw)(d.user.username)+" ",1),(0,i.Wm)(x,{icon:"user",class:"ml-2"})]),(0,i._)("div",k,[(0,i.Wm)(m,{to:"/account",class:"navbar-item"},{default:(0,i.w5)((()=>[(0,i.Uk)(" account informations ")])),_:1}),f,(0,i.Wm)(m,{to:{name:"about"},class:"navbar-item"},{default:(0,i.w5)((()=>[(0,i.Uk)(" About ")])),_:1}),C])])):(0,i.kq)("",!0),(0,i._)("div",D,[e.$store.state.isAuthenticated?((0,i.wg)(),(0,i.iD)("div",P,[(0,i.Wm)(m,{class:"button is-warning is-small",onClick:d.logout,to:"/"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Log out ")])),_:1},8,["onClick"])])):((0,i.wg)(),(0,i.iD)("div",M,[d.configuration.open_subscriptions?((0,i.wg)(),(0,i.j4)(m,{key:0,class:"button is-primary is-small",to:"/signup"},{default:(0,i.w5)((()=>[I])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(m,{class:"button is-light is-small",to:"/login"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Log in ")])),_:1})]))])])])],2)]),(0,i._)("div",null,[(0,i.Wm)(S)]),L])}var S=a(4161),T={name:"App",data(){return{burgerIsActive:!1,open_subscriptions:!1}},methods:{logout(){this.$store.commit("removeToken")},toggleBurger(){this.burgerIsActive=!this.burgerIsActive},get_configuration(){return this.$store.state.configuration}},computed:{user(){return this.$store.state.user},configuration(){return this.$store.state.configuration}},beforeCreate(){this.$store.commit("initializeStore"),this.$store.state.token?S.Z.defaults.headers.common.Authorization="Token "+this.$store.state.token:S.Z.defaults.headers.common.Authorization="",this.user=this.$store.state.user},beforeMount(){(0,S.Z)({method:"get",url:"/dsap/dsap/configuration/"}).then((e=>{console.log("configuration: ",e.data),this.$store.state.configuration=e.data,this.open_subscriptions=this.$store.state.configuration.open_subscriptions,this.$store.state.configuration.active_tip_me&&kofiWidgetOverlay.draw("peigne_plume",{type:"floating-chat","floating-chat.donateButton.text":"Tip Me","floating-chat.donateButton.background-color":"#00b9fe","floating-chat.donateButton.text-color":"#fff"})})).catch((e=>{console.log(e)}))},mounted(){document.title="RPGAdventure.eu"}},$=a(89);const U=(0,$.Z)(T,[["render",x]]);var A=U,q=a(2483);const E=e=>((0,i.dD)("data-v-f65de690"),e=e(),(0,i.Cn)(),e),z={class:"home container"},G={class:"columns"},B={class:"column is-2"},V={class:"menu is-hidden-mobile"},O=E((()=>(0,i._)("div",{class:"logo"},[(0,i._)("img",{src:"favicon.ico",class:"logo-image",alt:"logo"}),(0,i._)("h1",{class:"logo-title"}," RPGAdventure.eu ")],-1))),j=E((()=>(0,i._)("p",null,"First steps guide",-1))),H={class:"column is-10 scrollable"};function N(e,t,a,s,l,o){const n=(0,i.up)("router-link"),c=(0,i.up)("ArticleBox");return(0,i.wg)(),(0,i.iD)("div",z,[(0,i._)("div",G,[(0,i._)("div",B,[(0,i._)("div",V,[(0,i.Wm)(n,{to:{name:"about"}},{default:(0,i.w5)((()=>[O])),_:1}),(0,i.Wm)(n,{to:{name:"guide"},class:"m-2"},{default:(0,i.w5)((()=>[j])),_:1})])]),(0,i._)("div",H,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.articles,(e=>((0,i.wg)(),(0,i.j4)(c,{key:e.id,date_created:o.humanDate(e.date_created),title:e.title,subtitle:e.subtitle,content:e.content,image_url:e.image_url,image_size:e.image_size},null,8,["date_created","title","subtitle","content","image_url","image_size"])))),128))])])])}const Z={class:"box"},W={class:"columns"},F={class:"column is-9",id:"right-col"},K={class:"is-pulled-right"},Y={class:"title"},R={class:"subtitle"},Q=["innerHTML"],J={class:"column is-3"},X=["src"],ee={key:1,src:"img/article-dflt-img.jpg",alt:"article-noimage",class:"article-noimage is-pulled-right is-hidden-mobile"};function te(e,t,a,s,o,n){return(0,i.wg)(),(0,i.iD)("div",Z,[(0,i._)("div",W,[(0,i._)("div",F,[(0,i._)("p",K,(0,l.zw)(a.date_created),1),(0,i._)("h1",Y,(0,l.zw)(a.title),1),(0,i._)("h2",R,(0,l.zw)(a.subtitle),1),(0,i._)("div",{class:"content",innerHTML:n.render},null,8,Q)]),(0,i._)("div",J,[""!=a.image_url?((0,i.wg)(),(0,i.iD)("img",{key:0,src:a.image_url,id:"image",alt:"article-image",class:"article-image"},null,8,X)):((0,i.wg)(),(0,i.iD)("img",ee))])])])}var ae={name:"ArticleBox",props:["date_created","title","subtitle","content","image_url","image_size"],computed:{render(){return marked.parse(this.content)}},mounted(){let e=document.getElementById("image");e&&(e.style.height=this.image_size+"%")}};const se=(0,$.Z)(ae,[["render",te]]);var ie=se,le={name:"HomeView",components:{ArticleBox:ie},data(){return{articles:[]}},beforeCreate(){(0,S.Z)({method:"GET",url:"home/articles/"}).then((e=>{this.articles=e.data.articles})).catch((e=>{console.log(e)}))},methods:{md(e){return marked.parse(e)},humanDate(e){let t=new Date(e);return t.toLocaleDateString()}}};const oe=(0,$.Z)(le,[["render",N],["__scopeId","data-v-f65de690"]]);var ne=oe;const ce=e=>((0,i.dD)("data-v-2e169596"),e=e(),(0,i.Cn)(),e),re={class:"container"},de=ce((()=>(0,i._)("div",{class:"logo mb-6 is-hidden-mobile"},[(0,i._)("img",{src:"favicon.ico",class:"logo-image",alt:"logo"}),(0,i._)("h1",{class:"logo-title"}," RPGAdventure.eu ")],-1))),me=ce((()=>(0,i._)("h1",{class:"title is-2"},"First steps guide",-1))),ue={class:"is-pulled-right mr-2"},he={key:0},pe=(0,i.uE)('<br data-v-2e169596><h2 class="title is-4" data-v-2e169596>Quick introduction</h2><p data-v-2e169596> It is a tool for RPG masters and players to help them to handle the mass of information displayed when playing a RPG, in an elegant way. </p><div data-v-2e169596><img src="img/guide/cards-campains.png" alt="campain items" data-v-2e169596></div><br data-v-2e169596><p class="text" data-v-2e169596> During a RPG campaign, the game master will disclose informations to the players as they discover new elements (NPCs, LOCATIONs, ORGANIZATIONs...). Each element is displayed under the form of a card. </p><div data-v-2e169596><img src="img/guide/cards-items.png" alt="campain items" data-v-2e169596></div><br data-v-2e169596><p class="text" data-v-2e169596> While a campaign is often played on long period of time, the game master and the players can dive instantly into the game, consulting the item cards to remind them the discovered elements of the scenario, and their details. </p><br data-v-2e169596><p class="text" data-v-2e169596> Each card can contain datas for the player, but also datas only readable by the game master. </p><div class="columns" data-v-2e169596><div class="column m-2" data-v-2e169596><p data-v-2e169596><strong data-v-2e169596>Player&#39;s view</strong></p><img src="img/guide/card-item-player.png" alt="item player view" class="card-example" data-v-2e169596></div><div class="column m-2" data-v-2e169596><p data-v-2e169596><strong data-v-2e169596>Game master&#39;s view</strong></p><img src="img/guide/card-item-GM.png" alt="item GM view" class="card-example" data-v-2e169596></div></div><h2 class="title is-4" data-v-2e169596>Play on mobile</h2><p data-v-2e169596> Carrying a laptop is not the most convenient for playing, that&#39;s why the interface of RPGAdventure is adapted for smartphones too. </p><br data-v-2e169596><div class="columns" data-v-2e169596><div class="column" data-v-2e169596><h3 class="title is-5" data-v-2e169596>Game master&#39;s mobile interface</h3><img src="img/guide/mobile_items_gm.png" alt="gm mobile interface" class="image-bordered" data-v-2e169596></div><div class="column" data-v-2e169596><h3 class="title is-5" data-v-2e169596>Player&#39;s mobile interface</h3><img src="img/guide/mobile_items_player.png" alt="player mobile interface" class="image-bordered" data-v-2e169596></div></div><br data-v-2e169596><h2 class="title is-4" data-v-2e169596>About subscriptions</h2><p class="text" data-v-2e169596> Only the game master needs an active subscription to use RPGAdventure.eu, simple players can play as guests. </p>',19),ge=ce((()=>(0,i._)("br",null,null,-1))),we={class:"is-pulled-right mr-2"},_e={key:1},ve=ce((()=>(0,i._)("br",null,null,-1))),ye=ce((()=>(0,i._)("p",{class:"text"},[(0,i.Uk)(" a few steps: "),(0,i._)("ul",null,[(0,i._)("li",null," - Sign up "),(0,i._)("li",null," - Have an active subscription (30 days free trial) "),(0,i._)("li",null," - Create a virtual table: add the e-mail addresses of your guests (guests do not need a subscription), they will receive an invitation in their inbox. "),(0,i._)("li",null," - Create a campaign from the table view. "),(0,i._)("li",null," - Add items to your campaign while playing. ")])],-1))),be=ce((()=>(0,i._)("br",null,null,-1))),ke={class:"is-pulled-right mr-2"},fe={key:2},Ce=ce((()=>(0,i._)("br",null,null,-1))),De=ce((()=>(0,i._)("p",null," I'd recommend you to have at least tried the quick way before trying this one. ",-1))),Me=ce((()=>(0,i._)("br",null,null,-1))),Ie=ce((()=>(0,i._)("p",null,[(0,i._)("ul",null,[(0,i._)("li",null," - Sign up "),(0,i._)("li",null," - Have an active subscription (30 days free trial) "),(0,i._)("li",null," - in the Collection interface, create a new collection "),(0,i._)("li",null," - edit the collection to your liking, adding some of the items and PCs you'd like to use in your campaign "),(0,i._)("li",null,' - In the Collection interface, click "Use for a new campaign", than choose the one table you want this new campaign to be available in (you must be a Game Master or Owner of the table). '),(0,i._)("li",null,' - play the campaign, you can add new items to it while playing, and then transfer them back to the collection throught the "Exchanges" interface. ')])],-1)));function Pe(e,t,a,s,l,o){const n=(0,i.up)("fa");return(0,i.wg)(),(0,i.iD)("div",re,[de,me,(0,i._)("div",{onClick:t[0]||(t[0]=e=>l.showWhatIs=!l.showWhatIs),class:"topic"},[(0,i.Uk)(" What is RPGAdventure.eu ? "),(0,i._)("div",ue,[l.showWhatIs?((0,i.wg)(),(0,i.j4)(n,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),l.showWhatIs?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(n,{key:1,icon:"angle-right"}))])]),l.showWhatIs?((0,i.wg)(),(0,i.iD)("div",he,[pe,(0,i._)("button",{class:"m-4 button",onClick:t[1]||(t[1]=e=>l.showWhatIs=!1)},"close this topic")])):(0,i.kq)("",!0),ge,(0,i._)("div",{onClick:t[2]||(t[2]=e=>l.showQuickWay=!l.showQuickWay),class:"topic"},[(0,i.Uk)(" The quick way to beggin "),(0,i._)("div",we,[l.showQuickWay?((0,i.wg)(),(0,i.j4)(n,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),l.showQuickWay?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(n,{key:1,icon:"angle-right"}))])]),l.showQuickWay?((0,i.wg)(),(0,i.iD)("div",_e,[ve,ye,(0,i._)("button",{class:"m-4 button",onClick:t[3]||(t[3]=e=>l.showQuickWay=!1)},"close this topic")])):(0,i.kq)("",!0),be,(0,i._)("div",{onClick:t[4]||(t[4]=e=>l.showExpertWay=!l.showExpertWay),class:"topic"},[(0,i.Uk)(" The expert way "),(0,i._)("div",ke,[l.showExpertWay?((0,i.wg)(),(0,i.j4)(n,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),l.showExpertWay?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(n,{key:1,icon:"angle-right"}))])]),l.showExpertWay?((0,i.wg)(),(0,i.iD)("div",fe,[Ce,De,Me,Ie,(0,i._)("button",{class:"m-4 button",onClick:t[5]||(t[5]=e=>l.showExpertWay=!1)},"close this topic")])):(0,i.kq)("",!0)])}var Le={name:"GuideView",components:{},data(){return{showWhatIs:!1,showQuickWay:!1,showExpertWay:!1}}};const xe=(0,$.Z)(Le,[["render",Pe],["__scopeId","data-v-2e169596"]]);var Se=xe;const Te=e=>((0,i.dD)("data-v-386c0a8e"),e=e(),(0,i.Cn)(),e),$e={class:"container"},Ue={class:"title"},Ae=Te((()=>(0,i._)("br",null,null,-1))),qe=Te((()=>(0,i._)("br",null,null,-1))),Ee={key:1},ze=Te((()=>(0,i._)("h2",{class:"subtitle"},"My tables as owner:",-1))),Ge={class:"table is-bordered is-fullwidth"},Be=Te((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"name"),(0,i._)("th",{class:"is-hidden-mobile"},"owners"),(0,i._)("th",{class:"is-hidden-mobile"},"guests"),(0,i._)("th",null,"Edit")])],-1))),Ve={class:"is-hidden-mobile"},Oe={class:"is-hidden-mobile"},je=["onClick"],He=Te((()=>(0,i._)("br",null,null,-1))),Ne={key:2},Ze=Te((()=>(0,i._)("h2",{class:"subtitle"},"My tables as guest:",-1))),We={class:"table is-bordered is-fullwidth"},Fe=Te((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"name"),(0,i._)("th",{class:"is-hidden-mobile"},"owners"),(0,i._)("th",{class:"is-hidden-mobile"},"guests")])],-1))),Ke={class:"is-hidden-mobile"},Ye={class:"is-hidden-mobile"};function Re(e,t,a,s,o,n){const c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",$e,[(0,i._)("h1",Ue,"Dashboard - "+(0,l.zw)(n.charLimit(o.user.username)),1),Ae,e.$store.state.user.is_subscriber?((0,i.wg)(),(0,i.j4)(c,{key:0,to:"/create_table",class:"button is-success is-small m-2"},{default:(0,i.w5)((()=>[(0,i.Uk)(" + new table ")])),_:1})):(0,i.kq)("",!0),qe,o.tables_as_owner.length?((0,i.wg)(),(0,i.iD)("div",Ee,[ze,(0,i._)("table",Ge,[Be,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.tables_as_owner,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("td",null,[(0,i.Wm)(c,{onClick:t=>n.storeTable(e),to:{name:"table",params:{id:e.id}},class:"button"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(n.charLimit(e.name)),1)])),_:2},1032,["onClick","to"])]),(0,i._)("td",Ve,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.owners,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id},(0,l.zw)(n.charLimit(e.email))+" - "+(0,l.zw)(n.charLimit(e.username)),1)))),128))])]),(0,i._)("td",Oe,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.guests.concat(e.game_masters),(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id},(0,l.zw)(n.charLimit(e.email))+" - "+(0,l.zw)(n.charLimit(e.username)),1)))),128))])]),(0,i._)("td",null,[(0,i._)("span",{class:"button is-warning is-small",onClick:t=>n.editTable(e.id)},"Edit",8,je)])])))),128))])])])):(0,i.kq)("",!0),He,o.tables_as_guest.length?((0,i.wg)(),(0,i.iD)("div",Ne,[Ze,(0,i._)("table",We,[Fe,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.tables_as_guest,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("td",null,[(0,i.Wm)(c,{to:{name:"table",params:{id:e.id}},onClick:t=>n.storeTable(e),class:"button"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(n.charLimit(e.name)),1)])),_:2},1032,["to","onClick"])]),(0,i._)("td",Ke,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.owners,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id},(0,l.zw)(n.charLimit(e.username)),1)))),128))])]),(0,i._)("td",Ye,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.guests.concat(e.game_masters),(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id},(0,l.zw)(n.charLimit(e.email))+" - "+(0,l.zw)(n.charLimit(e.username)),1)))),128))])])])))),128))])])])):(0,i.kq)("",!0)])}a(7658);var Qe={name:"DashBoardView",components:{},data(){return{user:"",tables_as_owner:[],tables_as_guest:[]}},beforeMount(){this.user=this.$store.state.user,(0,S.Z)({method:"get",url:"/campains/dashboard/",headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.tables_as_owner=e.data["tables_as_owner"],this.tables_as_guest=e.data["tables_as_guest"],this.tables_as_gm=e.data["tables_as_gm"],this.tables_as_guest=this.tables_as_guest.concat(this.tables_as_gm)})).catch((e=>{console.log(e)}))},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},storeTable(e){this.$store.state.current_table=e},editTable(e){this.$router.push({name:"edit_table",params:{id:e}})}}};const Je=(0,$.Z)(Qe,[["render",Re],["__scopeId","data-v-386c0a8e"]]);var Xe=Je;const et={class:"container is-max-desktop"},tt=(0,i._)("h1",{class:"title"},"Create a new table",-1),at=(0,i._)("h2",{class:"subtitle"},"The table",-1),st=(0,i._)("label",{class:"label"},"Name",-1),it=(0,i._)("label",{class:"label"},"Description",-1),lt=(0,i._)("hr",null,null,-1),ot=(0,i._)("h2",{class:"subtitle"},"The Guests emails",-1),nt=(0,i._)("p",{class:"mb-2"},"You can add guests later if you prefer.",-1),ct=["id"],rt={class:"label"},dt={class:"control field is-grouped"},mt=["onUpdate:modelValue"],ut=["onClick"],ht=(0,i._)("br",null,null,-1);function pt(e,t,a,o,n,c){return(0,i.wg)(),(0,i.iD)("div",et,[(0,i._)("form",null,[tt,at,st,(0,i.wy)((0,i._)("input",{type:"text",class:"input",placeholder:"Name the table","onUpdate:modelValue":t[0]||(t[0]=e=>n.name=e),required:""},null,512),[[s.nr,n.name]]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.errors.name,(e=>((0,i.wg)(),(0,i.iD)("p",{style:{color:"red"},key:e},(0,l.zw)(e),1)))),128)),it,(0,i.wy)((0,i._)("textarea",{type:"textarea",class:"textarea",rows:"6","onUpdate:modelValue":t[1]||(t[1]=e=>n.description=e)},"\n    ",512),[[s.nr,n.description]]),lt,ot,nt,(0,i._)("span",{class:"button is-success is-small m-2",onClick:t[2]||(t[2]=(...e)=>c.addOneGuest&&c.addOneGuest(...e))},"Add more guests"),n.guests.length?((0,i.wg)(),(0,i.iD)("span",{key:0,class:"button is-danger is-small m-2",onClick:t[3]||(t[3]=(...e)=>c.removeOneGuest&&c.removeOneGuest(...e))},"Remove the last guest")):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.guests,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,id:t,class:"field"},[(0,i._)("label",rt,"Guest email"+(0,l.zw)(t+1),1),(0,i._)("div",dt,[(0,i.wy)((0,i._)("input",{type:"email",class:"input guest_email","onUpdate:modelValue":e=>n.guests[t].email=e,placeholder:"Enter the guest's email"},null,8,mt),[[s.nr,n.guests[t].email]]),(0,i._)("span",{class:"button is-danger is-right ml-2",onClick:e=>c.removeGuest(t)},"X",8,ut)])],8,ct)))),128)),ht,(0,i._)("button",{class:"button is-success mt-2",onClick:t[4]||(t[4]=(...e)=>c.onSubmit&&c.onSubmit(...e))},"Confirm")])])}var gt={name:"CreateTableView",components:{},data(){return{name:"",description:"",guests:[],base_key:0,errors:{}}},methods:{addOneGuest(){this.guests.push({email:""})},removeOneGuest(){this.guests.pop(),this.base_key-=1},removeGuest(e){this.guests.splice(e,1)},getKey(){return this.base_key+=1,this.base_key},getGuestsList(){let e=[];for(var t=0;t<this.guests.length;t++)""!=this.guests[t].email&&e.push(this.guests[t].email);return e},onSubmit(){if(""!=this.name){let e=this.getGuestsList();this.errors=[],(0,S.Z)({method:"POST",url:"campains/tables/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{name:this.name,description:this.description,guests:e}}).then((e=>{this.$router.push({name:"dashboard"})})).catch((e=>{e.response&&(console.log(e.response.data),this.errors=e.response.data)}))}}}};const wt=(0,$.Z)(gt,[["render",pt]]);var _t=wt;const vt={class:"container is-max-desktop"},yt={class:"title"},bt=(0,i._)("h2",{class:"subtitle"},"The table",-1),kt=(0,i._)("label",{class:"label"},"Name",-1),ft=(0,i._)("label",{class:"label"},"Description",-1),Ct=(0,i._)("hr",null,null,-1),Dt=(0,i._)("h2",{class:"subtitle"},"The Guests emails",-1),Mt=["id"],It={class:"label"},Pt={class:"control field is-grouped"},Lt=["onUpdate:modelValue"],xt=["onClick"],St=(0,i._)("br",null,null,-1),Tt=["disabled"];function $t(e,t,a,o,n,c){return(0,i.wg)(),(0,i.iD)("div",vt,[(0,i._)("form",null,[(0,i._)("h1",yt,"Edit table '"+(0,l.zw)(n.name)+"'",1),bt,kt,(0,i.wy)((0,i._)("input",{type:"text",class:"input",placeholder:"Name the table","onUpdate:modelValue":t[0]||(t[0]=e=>n.name=e),required:""},null,512),[[s.nr,n.name]]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.errors.name,(e=>((0,i.wg)(),(0,i.iD)("p",{style:{color:"red"},key:e},(0,l.zw)(e),1)))),128)),ft,(0,i.wy)((0,i._)("textarea",{type:"textarea",class:"textarea",rows:"6","onUpdate:modelValue":t[1]||(t[1]=e=>n.description=e)},"\n    ",512),[[s.nr,n.description]]),Ct,Dt,(0,i._)("span",{class:"button is-success is-small m-2",onClick:t[2]||(t[2]=(...e)=>c.addOneGuest&&c.addOneGuest(...e))},"Add more guests"),n.guests.length?((0,i.wg)(),(0,i.iD)("span",{key:0,class:"button is-danger is-small m-2",onClick:t[3]||(t[3]=(...e)=>c.removeOneGuest&&c.removeOneGuest(...e))},"Remove the last guest")):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.guests,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,id:t,class:"field"},[(0,i._)("label",It,"Guest email"+(0,l.zw)(t+1),1),(0,i._)("div",Pt,[(0,i.wy)((0,i._)("input",{type:"email",class:"input guest_email","onUpdate:modelValue":e=>n.guests[t].email=e,placeholder:"Enter the guest's email"},null,8,Lt),[[s.nr,n.guests[t].email]]),(0,i._)("span",{class:"button is-danger is-right ml-2",onClick:e=>c.removeGuest(t)},"X",8,xt)])],8,Mt)))),128)),St,(0,i._)("button",{class:"button is-success m-2",onClick:t[4]||(t[4]=(...e)=>c.onSubmit&&c.onSubmit(...e))},"Confirm"),(0,i._)("span",{class:"button is-warning m-2",onClick:t[5]||(t[5]=(...e)=>c.unSafeDelete&&c.unSafeDelete(...e))},"Delete '"+(0,l.zw)(n.name)+"'",1),(0,i._)("button",{class:"button is-danger m-2",disabled:n.allowDelete,id:"deleteButtonId",onClick:t[6]||(t[6]=(0,s.iM)(((...e)=>c.deleteTable&&c.deleteTable(...e)),["prevent"]))},"Confirm delete",8,Tt)])])}var Ut=a(5597),At={name:"EditTableView",components:{},data(){return{table_id:this.$route.params.id,name:"",description:"",guests:[],base_key:0,errors:{},allowDelete:!0}},beforeMount(){this.table_id=this.$route.params.id,(0,S.Z)({method:"get",url:"/campains/get_table_datas/",headers:{Authorization:`Token ${this.$store.state.token}`},params:{table_id:this.table_id}}).then((e=>{this.name=e.data["name"],this.description=e.data["description"];for(var t=0;t<e.data["guests"].length;t++)this.guests.push({email:e.data["guests"][t].email})})).catch((e=>{console.log(e)}))},methods:{unSafeDelete(){this.allowDelete=!this.allowDelete},deleteTable(){(0,S.Z)({method:"delete",url:"/campains/tables/"+this.table_id+"/",headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{(0,Ut.toast)({message:"Table deleted",type:"is-success",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:5e3}),this.$router.push({name:"dashboard"})})).catch((e=>{console.log(e)}))},addOneGuest(){this.guests.push({email:""})},removeOneGuest(){this.guests.pop(),this.base_key-=1},removeGuest(e){this.guests.splice(e,1)},getKey(){return this.base_key+=1,this.base_key},getGuestsList(){let e=[];for(var t=0;t<this.guests.length;t++)""!=this.guests[t].email&&e.push(this.guests[t].email);return e},onSubmit(){if(""!=this.name){let e=this.getGuestsList();this.errors=[],(0,S.Z)({method:"PUT",url:`campains/tables/${this.table_id}/`,headers:{Authorization:`Token ${this.$store.state.token}`},data:{name:this.name,description:this.description,guests:e,table_password:this.table_password}}).then((e=>{this.$store.state.current_table=e.data,this.$router.push({name:"table",params:{id:this.table_id}})})).catch((e=>{this.errors=e.response.data}))}}}};const qt=(0,$.Z)(At,[["render",$t]]);var Et=qt;const zt=e=>((0,i.dD)("data-v-082ad4b9"),e=e(),(0,i.Cn)(),e),Gt={class:"container"},Bt={class:"subtitle"},Vt={class:"is-pulled-right mr-2"},Ot={key:0,class:"is-hidden-mobile"},jt={class:"columns m-2 is-flex members_n_roles"},Ht={class:"column is-4"},Nt=zt((()=>(0,i._)("h2",{class:"subtitle"},"Table Owners",-1))),Zt={class:"column is-4"},Wt=zt((()=>(0,i._)("h2",{class:"subtitle"},"Game masters",-1))),Ft={class:"column is-4"},Kt=zt((()=>(0,i._)("h2",{class:"subtitle"},"Playing only",-1))),Yt={class:"is-pulled-right mr-2"},Rt={key:1},Qt={class:"m-2"},Jt={key:0,class:"container-campain"},Xt={class:"is-pulled-right mr-2"},ea={key:2},ta={class:"m-2"},aa={key:0,class:"container-campain"};function sa(e,t,a,s,o,n){const c=(0,i.up)("fa"),r=(0,i.up)("CampainBox");return(0,i.wg)(),(0,i.iD)("div",Gt,[(0,i._)("h1",Bt,"Table "+(0,l.zw)(o.table.name),1),(0,i._)("div",null,[n.is_owner&n.is_subscriber?((0,i.wg)(),(0,i.iD)("a",{key:0,class:"button is-small is-warning m-2",onClick:t[0]||(t[0]=e=>n.editTable(o.table.id))}," Edit "+(0,l.zw)(o.table.name),1)):(0,i.kq)("",!0),(n.is_owner|n.is_game_master)&n.is_subscriber?((0,i.wg)(),(0,i.iD)("a",{key:1,class:"button is-small is-success m-2",onClick:t[1]||(t[1]=(...e)=>n.newCampain&&n.newCampain(...e))}," + new campaign ")):(0,i.kq)("",!0)]),(0,i._)("div",{onClick:t[2]||(t[2]=e=>o.showMembers=!o.showMembers),class:"topic is-hidden-mobile"},[(0,i.Uk)("Members & roles "),(0,i._)("div",Vt,[o.showMembers?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),o.showMembers?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(c,{key:1,icon:"angle-right"}))])]),o.showMembers?((0,i.wg)(),(0,i.iD)("div",Ot,[(0,i._)("div",jt,[(0,i._)("div",Ht,[Nt,(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.table.owners,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id,class:"mt-2"},[(0,i.Uk)((0,l.zw)(e.username)+" ",1),n.is_owner&o.table.owners.length>1&o.user.id!=e.id?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"arrow-right",class:"arrow is-pulled-right ml-2",onClick:t=>n.switchGMOwner(e.id)},null,8,["onClick"])):(0,i.kq)("",!0)])))),128))])]),(0,i._)("div",Zt,[Wt,(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.table.game_masters,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id,class:"mt-2"},[n.is_owner?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"arrow-left",class:"arrow is-pulled-left mr-2",onClick:t=>n.switchGMOwner(e.id)},null,8,["onClick"])):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,l.zw)(e.username)+" ",1),n.is_owner?((0,i.wg)(),(0,i.j4)(c,{key:1,icon:"arrow-right",class:"arrow is-pulled-right ml-2",onClick:t=>n.switchGuestGM(e.id)},null,8,["onClick"])):(0,i.kq)("",!0)])))),128))])]),(0,i._)("div",Ft,[Kt,(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.table.guests,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id,class:"mt-2"},[n.is_owner?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"arrow-left",class:"arrow is-pulled-left mr-2",onClick:t=>n.switchGuestGM(e.id)},null,8,["onClick"])):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,l.zw)(e.email)+" - "+(0,l.zw)(e.username),1)])))),128))])])])])):(0,i.kq)("",!0),(0,i._)("div",{onClick:t[3]||(t[3]=e=>o.showEndedCampains=!o.showEndedCampains),class:"topic"},[(0,i.Uk)("Ended Campaigns "),(0,i._)("div",Yt,[o.showEndedCampains?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),o.showEndedCampains?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(c,{key:1,icon:"angle-right"}))])]),o.showEndedCampains?((0,i.wg)(),(0,i.iD)("div",Rt,[(0,i._)("div",Qt,[o.campains.length?((0,i.wg)(),(0,i.iD)("div",Jt,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.endedCampains,(e=>((0,i.wg)(),(0,i.j4)(r,{key:e.id,class:"is-2",user:o.user,campain:e},null,8,["user","campain"])))),128))])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),(0,i._)("div",{onClick:t[4]||(t[4]=e=>o.showCampains=!o.showCampains),class:"topic"},[(0,i.Uk)("Campaigns "),(0,i._)("div",Xt,[o.showCampains?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),o.showCampains?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(c,{key:1,icon:"angle-right"}))])]),o.showCampains?((0,i.wg)(),(0,i.iD)("div",ea,[(0,i._)("div",ta,[o.campains.length?((0,i.wg)(),(0,i.iD)("div",aa,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.campains,(e=>((0,i.wg)(),(0,i.j4)(r,{key:e.id,class:"is-2",user:o.user,campain:e},null,8,["user","campain"])))),128))])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0)])}const ia={class:"campainTitle"},la={key:0,class:"image is-128x128"},oa=["src"],na={class:"m-3"},ca={class:"columns is-mobile"},ra={class:"column"},da={class:"campainTitle-mobile"},ma={class:"column"},ua={key:0,class:"image-mobile"},ha=["src"];function pa(e,t,a,s,o,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",{class:(0,l.C_)(["box m-2 campain is-hidden-mobile",{mastering:a.user.id===a.campain.game_master.id,"not-mastering":a.user.id!==a.campain.game_master.id}]),onClick:t[0]||(t[0]=e=>n.gotoCampain(a.campain.id))},[(0,i._)("h2",ia,(0,l.zw)(n.charLimit(a.campain.title)),1),(0,i._)("h2",null,(0,l.zw)(n.charLimit(a.campain.game)),1),(0,i._)("div",null,[a.campain.image_url?((0,i.wg)(),(0,i.iD)("figure",la,[(0,i._)("img",{src:a.campain.image_url},null,8,oa)])):(0,i.kq)("",!0)]),(0,i._)("div",na," mastered by "+(0,l.zw)(n.charLimit(a.campain.game_master.username)),1)],2),(0,i._)("div",{class:(0,l.C_)(["m-1 campain-mobile is-hidden-desktop",{mastering:a.user.id===a.campain.game_master.id,"not-mastering":a.user.id!==a.campain.game_master.id}]),onClick:t[1]||(t[1]=e=>n.gotoCampain(a.campain.id))},[(0,i._)("div",ca,[(0,i._)("div",ra,[(0,i._)("span",da,(0,l.zw)(a.campain.title),1)]),(0,i._)("div",ma,[""!=a.campain.image_url?((0,i.wg)(),(0,i.iD)("figure",ua,[(0,i._)("img",{src:a.campain.image_url,alt:"campain image"},null,8,ha)])):(0,i.kq)("",!0)])])],2)])}var ga={name:"CampainBox",props:["campain","user"],methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},gotoCampain(e){this.$store.state.current_campain=this.campain,this.$router.push({name:"CampainView",params:{id:e}})}}};const wa=(0,$.Z)(ga,[["render",pa],["__scopeId","data-v-6b8f1299"]]);var _a=wa,va={name:"TableView",components:{CampainBox:_a},data(){return{table:{name:"no name"},allCampains:[],endedCampains:[],campains:[],user:{},showMembers:!1,showEndedCampains:!1,showCampains:!0}},computed:{is_owner(){return this.table.owners.some((e=>e.id===this.$store.state.user.id))},is_game_master(){return this.table.game_masters.some((e=>e.id===this.$store.state.user.id))},is_subscriber(){return this.$store.state.user.is_subscriber}},beforeMount(){this.table=this.$store.state.current_table,this.user=this.$store.state.user,(0,S.Z)({method:"get",url:"campains/get_campains_for_table/",params:{table_id:this.table.id},headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.allCampains=e.data,this.endedCampains=this.allCampains.filter((e=>e.is_ended)),this.sortByGame(this.endedCampains),this.campains=this.allCampains.filter((e=>!e.is_ended)),this.sortByGame(this.campains)})).catch((e=>{console.log("campains error: ",e)}))},methods:{sortByGame(e){e.sort(((e,t)=>e.game>t.game?1:-1))},editTable(e){this.$router.push({name:"edit_table",params:{id:e}})},newCampain(){this.$router.push({name:"NewCampainView"})},switchGuestGM(e){(0,S.Z)({method:"POST",url:"campains/switch_guest_GM/",data:{table_id:this.table.id,user_id:e},headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.table=e.data.table,this.$store.state.current_table=e.data.table,this.table.owners.some((e=>e.id===this.$store.state.user.id))&this.$store.state.user.is_subscriber?this.is_owner=!0:this.is_owner=!1})).catch((e=>{console.log(e)}))},switchGMOwner(e){(0,S.Z)({method:"POST",url:"campains/switch_GM_owner/",data:{table_id:this.table.id,user_id:e},headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.table=e.data.table,this.$store.state.current_table=e.data.table,this.table.owners.some((e=>e.id===this.$store.state.user.id))&this.$store.state.user.is_subscriber?this.is_owner=!0:this.is_owner=!1})).catch((e=>{console.log(e)}))}}};const ya=(0,$.Z)(va,[["render",sa],["__scopeId","data-v-082ad4b9"]]);var ba=ya;const ka={class:"container is-max-desktop"},fa=(0,i._)("h1",{class:"title"},"Start a New Campaign",-1),Ca={class:"subtitle"},Da={key:0},Ma={class:"mt-2"},Ia=(0,i._)("label",{class:"label"},"Language",-1),Pa=(0,i.uE)('<option value="ar">Arabic</option><option value="cs">Czech</option><option value="zh">Chinese</option><option value="da">Danish</option><option value="nl">Dutch</option><option value="en">English</option><option value="fi">Finnish</option><option value="fr">French</option><option value="de">German</option><option value="el">Greek</option><option value="hi">Hindi</option><option value="hu">Hungarian</option><option value="it">Italian</option><option value="ja">Japanese</option><option value="ko">Korean</option><option value="no">Norwegian</option><option value="fa">Persian</option><option value="pl">Polish</option><option value="pt">Portuguese</option><option value="ru">Russian</option><option value="es">Spanish</option><option value="sv">Swedish</option><option value="th">Thai</option><option value="tr">Turkish</option><option value="vi">Vietnamese</option>',25),La=[Pa],xa=(0,i._)("label",{class:"label"},"Game",-1),Sa=(0,i._)("label",{class:"label"},"Campaign title",-1),Ta=(0,i._)("label",{class:"label"},"Image url",-1),$a=(0,i._)("label",{class:"label"},"Description",-1);function Ua(e,t,a,o,n,c){return(0,i.wg)(),(0,i.iD)("div",ka,[(0,i._)("form",null,[fa,(0,i._)("h2",Ca,(0,l.zw)(c.charLimit(n.table.name)),1),n.errors.length?((0,i.wg)(),(0,i.iD)("ul",Da,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.errors,(e=>((0,i.wg)(),(0,i.iD)("li",{class:"is-danger",key:e,style:{color:"red"}},(0,l.zw)(e),1)))),128))])):(0,i.kq)("",!0),(0,i._)("div",Ma,[Ia,(0,i.wy)((0,i._)("select",{name:"",id:"","onUpdate:modelValue":t[0]||(t[0]=e=>n.language=e)},La,512),[[s.bM,n.language]]),xa,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Game name",class:"input","onUpdate:modelValue":t[1]||(t[1]=e=>n.game=e)},null,512),[[s.nr,n.game]]),Sa,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Campain title",class:"input","onUpdate:modelValue":t[2]||(t[2]=e=>n.campainTitle=e)},null,512),[[s.nr,n.campainTitle]]),Ta,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Image url",class:"input","onUpdate:modelValue":t[3]||(t[3]=e=>n.image_url=e)},null,512),[[s.nr,n.image_url]]),$a,(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Campain description","onUpdate:modelValue":t[4]||(t[4]=e=>n.camapainDescription=e)},null,512),[[s.nr,n.camapainDescription]])]),(0,i._)("button",{class:"button is-success mt-2",onClick:t[5]||(t[5]=(0,s.iM)(((...e)=>c.onSubmit&&c.onSubmit(...e)),["prevent"]))},"Confirm")])])}var Aa={name:"NewCampainView",data(){return{table:{},game:"",image_url:"",language:"en",campainTitle:"",camapainDescription:"",errors:[]}},beforeMount(){this.table=this.$store.state.current_table},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},onSubmit(){this.errors=[],""===this.game&&this.errors.push("You must enter a game"),""===this.campainTitle&&this.errors.push("You must enter a title"),this.errors.length>0||(0,S.Z)({method:"post",url:"/campains/campains/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{table_id:this.table.id,game:this.game,title:this.campainTitle,description:this.camapainDescription,image_url:this.image_url,language:this.language}}).then((e=>{this.$router.push({name:"table",params:{id:this.$store.state.current_table.id}})})).catch((e=>{console.log(e.response.data.errors),typeof e==Array?this.errors=e.response.data.errors:this.errors.push(e.response.data.errors[0])}))}}};const qa=(0,$.Z)(Aa,[["render",Ua]]);var Ea=qa;const za=e=>((0,i.dD)("data-v-76449592"),e=e(),(0,i.Cn)(),e),Ga={class:"is-hidden-tablet",id:"mobile-menu"},Ba={class:"tabs-bar-mobile"},Va={class:"tabs is-centered"},Oa=["disabled"],ja={key:0},Ha={class:"columns is-mobile"},Na={class:"column is-5"},Za={class:"select is-small"},Wa=za((()=>(0,i._)("option",{selected:""},"--All--",-1))),Fa={class:"column is-4"},Ka={class:"select is-small"},Ya=za((()=>(0,i._)("option",{value:"name"},"name",-1))),Ra=za((()=>(0,i._)("option",{value:"date+"},"date +",-1))),Qa=za((()=>(0,i._)("option",{value:"date-"},"date -",-1))),Ja=za((()=>(0,i._)("option",{value:"type"},"type",-1))),Xa=[Ya,Ra,Qa,Ja],es={class:"column is-3"},ts={key:1},as={key:2},ss={key:0},is=["src"],ls=za((()=>(0,i._)("br",null,null,-1))),os={key:2},ns={class:"m-2"},cs={class:"subtitle"},rs={key:3},ds={key:1},ms=za((()=>(0,i._)("hr",null,null,-1))),us=za((()=>(0,i._)("label",{class:"label"},"Max items displayed",-1))),hs={class:"select"},ps=(0,i.uE)('<option value="all" data-v-76449592>--All--</option><option value="10" data-v-76449592>10</option><option value="30" data-v-76449592>30</option><option value="50" selected data-v-76449592>50</option><option value="100" data-v-76449592>100</option>',5),gs=[ps],ws=za((()=>(0,i._)("div",null,[(0,i._)("button",{onclick:"window.scrollTo({top: 0, behavior: 'smooth'});",class:"button is-small",style:{position:"fixed",bottom:"10px",right:"10px"}}," scroll top ")],-1))),_s={class:"columns is-hidden-mobile"},vs=za((()=>(0,i._)("div",{class:"main-window"},null,-1))),ys={class:"column is-9 items-window"},bs=za((()=>(0,i._)("br",null,null,-1))),ks={class:"columns is-multiline m-2"},fs={class:"column is-3"};function Cs(e,t,a,o,n,c){const r=(0,i.up)("fa"),d=(0,i.up)("ItemBoxMobile"),m=(0,i.up)("PcBoxMobile"),u=(0,i.up)("RatingWidget"),h=(0,i.up)("OfficialMark"),p=(0,i.up)("router-link"),g=(0,i.up)("ItemBox"),w=(0,i.up)("CampainTools"),_=(0,i.up)("ItemModalDisplay"),v=(0,i.up)("ItemModalEdit"),y=(0,i.up)("CreateItemModal"),b=(0,i.up)("PCModalCreate"),k=(0,i.up)("PCModalEdit");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Ga,[(0,i._)("div",Ba,[(0,i._)("div",Va,[(0,i._)("a",{class:"button is-small button-mobile is-active",onClick:t[0]||(t[0]=e=>c.displayMobile("items")),id:"tab-items"},"Items"),(0,i._)("a",{class:"button is-small button-mobile",onClick:t[1]||(t[1]=e=>c.displayMobile("pcs")),id:"tab-pcs"},"PCs"),(0,i._)("a",{class:"button is-small button-mobile",onClick:t[2]||(t[2]=e=>c.displayMobile("infos")),id:"tab-infos"},"Infos"),(0,i._)("a",{class:"button is-small button-mobile",onClick:t[3]||(t[3]=e=>c.displayMobile("settings")),id:"tab-settings"},[(0,i.Wm)(r,{icon:"gear"})]),(0,i._)("button",{class:"button is-small is-success",disabled:n.refreshSpin,onClick:t[4]||(t[4]=(...e)=>c.refresh_campain&&c.refresh_campain(...e))},[(0,i.Wm)(r,{icon:"arrows-rotate",class:(0,l.C_)({spinner:n.refreshSpin})},null,8,["class"])],8,Oa)])]),n.displayMobileItems?((0,i.wg)(),(0,i.iD)("div",ja,[(0,i._)("div",Ha,[(0,i._)("div",Na,[(0,i._)("div",Za,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>n.filterBy=e),onChange:t[6]||(t[6]=e=>c.filterItems(n.filterBy))},[Wa,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.itemTypes,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e},(0,l.zw)(e),1)))),128))],544),[[s.bM,n.filterBy]])])]),(0,i._)("div",Fa,[(0,i._)("div",Ka,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>n.sortBy=e),onClick:t[8]||(t[8]=e=>c.sortItems(n.sortBy))},Xa,512),[[s.bM,n.sortBy]])])]),(0,i._)("div",es,[(0,i._)("button",{class:"button is-small is-success",onClick:t[9]||(t[9]=e=>n.showCreateItemModal=!0)}," + Item ")])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.shownItems,(e=>((0,i.wg)(),(0,i.j4)(d,{key:e.id,item:e,user:n.user,campain:n.campain,onItemUpdated:t[10]||(t[10]=e=>c.getUpdatedItem(e)),onShowModalDisplay:t[11]||(t[11]=e=>c.showItemModalDisplay(e))},null,8,["item","user","campain"])))),128))])):(0,i.kq)("",!0),n.displayMobilePcs?((0,i.wg)(),(0,i.iD)("div",ts,[c.isGameMaster&n.displayMobilePcs?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"button is-success is-small mb-4",onClick:t[12]||(t[12]=e=>n.showCreatePCModal=!0)}," + PC ")):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.campain.pcs,(e=>((0,i.wg)(),(0,i.j4)(m,{key:e.id,pc:e,user:n.user,campain:n.campain,onUpdatePC:t[13]||(t[13]=e=>c.updatePC(e)),onDeletePC:t[14]||(t[14]=e=>c.deletePC(e))},null,8,["pc","user","campain"])))),128))])):(0,i.kq)("",!0),n.displayMobileInfos?((0,i.wg)(),(0,i.iD)("div",as,[(0,i.Uk)((0,l.zw)(n.campain.title)+" ",1),n.campain.image_url?((0,i.wg)(),(0,i.iD)("figure",ss,[(0,i._)("img",{src:n.campain.image_url},null,8,is)])):(0,i.kq)("",!0),ls,n.collection?((0,i.wg)(),(0,i.j4)(u,{key:1,collection:n.collection,onNewCollection:t[15]||(t[15]=t=>e.$emit("newCollection",t))},null,8,["collection"])):(0,i.kq)("",!0),n.campain.is_official?((0,i.wg)(),(0,i.iD)("span",os,[(0,i.Wm)(h,{collection:n.campain},null,8,["collection"])])):(0,i.kq)("",!0),(0,i._)("div",ns,[(0,i.Wm)(p,{to:{name:"table",params:{id:n.table.id}},class:"button is-small is-secondary mr-2"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(c.charLimit(n.table.name)),1)])),_:1},8,["to"]),(0,i._)("span",cs,"Mastered by "+(0,l.zw)(c.charLimit(n.campain.game_master.username)),1)])])):(0,i.kq)("",!0),n.displayMobileSettings?((0,i.wg)(),(0,i.iD)("div",rs,[c.isGameMaster?((0,i.wg)(),(0,i.j4)(p,{key:0,to:{name:"CampainEditView",params:{id:n.campain.id}},class:"m-2 button is-small is-warning"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Edit campaign... ")])),_:1},8,["to"])):(0,i.kq)("",!0),c.isGameMaster|e.isOwner?((0,i.wg)(),(0,i.iD)("div",ds,[(0,i.Uk)(" Campaign is ended : "),(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=e=>n.campain.is_ended=e),onChange:t[17]||(t[17]=(...e)=>c.endCampain&&c.endCampain(...e))},null,544),[[s.e8,n.campain.is_ended]])])):(0,i.kq)("",!0),ms,(0,i._)("div",null,[us,(0,i._)("div",hs,[(0,i.wy)((0,i._)("select",{class:"is-small","onUpdate:modelValue":t[18]||(t[18]=e=>n.maxItems=e),onChange:t[19]||(t[19]=e=>c.changeMaxItemsDisplay(n.maxItems))},gs,544),[[s.bM,n.maxItems]])])])])):(0,i.kq)("",!0),ws]),(0,i._)("div",_s,[vs,(0,i._)("div",ys,[bs,(0,i._)("div",ks,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.shownItems,(e=>((0,i.wg)(),(0,i.j4)(g,{key:e.id,item:e,user:n.user,campain:n.campain,displayMode:n.itemsDisplayMode,onItemUpdated:t[20]||(t[20]=e=>c.getUpdatedItem(e)),onShowModalDisplay:t[21]||(t[21]=e=>c.showItemModalDisplay(e))},null,8,["item","user","campain","displayMode"])))),128))])]),(0,i._)("div",fs,[(0,i.Wm)(w,{class:"campain-tools",campain:e.$store.state.current_campain,user:e.$store.state.user,refreshSpin:n.refreshSpin,maxItemsDisplay:n.maxItemsDisplay,itemsDisplayMode:n.itemsDisplayMode,collection:n.collection,onRefreshCampain:t[22]||(t[22]=e=>c.refresh_campain()),onChangeMaxItemsDisplay:t[23]||(t[23]=e=>c.changeMaxItemsDisplay(e)),onChangeDisplayMode:t[24]||(t[24]=e=>c.changeDisplayMode(e)),onFilterItems:t[25]||(t[25]=e=>c.filterItems(e)),onSortItems:t[26]||(t[26]=e=>c.sortItems(e)),onSearchItems:t[27]||(t[27]=e=>c.searchItems(e)),onResetSearch:t[28]||(t[28]=t=>e.resetSearch()),onUpdatePC:t[29]||(t[29]=e=>c.updatePC(e)),onDeletePC:t[30]||(t[30]=e=>c.deletePC(e)),onNewCollection:t[31]||(t[31]=e=>c.newCollection(e))},null,8,["campain","user","refreshSpin","maxItemsDisplay","itemsDisplayMode","collection"])])]),n.showItemModalDisplaySwitch?((0,i.wg)(),(0,i.j4)(_,{key:0,item:n.itemToDisplay,user:n.user,campain:n.campain,showIt:n.showItemModalDisplaySwitch,onShowModalDisplay:t[32]||(t[32]=e=>c.showItemModalDisplay(e)),onEditionMode:t[33]||(t[33]=e=>c.showItemModalEditOn(e))},null,8,["item","user","campain","showIt"])):(0,i.kq)("",!0),n.showItemModalEditSwitch?((0,i.wg)(),(0,i.j4)(v,{key:1,item:n.itemToDisplay,user:n.user,campain:n.campain,showIt:n.showItemModalEditSwitch,onShowModalEdit:t[34]||(t[34]=e=>c.showItemModalEditOff(e)),onItemUpdated:t[35]||(t[35]=e=>c.getUpdatedItem(e)),onItemDeleted:t[36]||(t[36]=e=>c.itemDeleted(e))},null,8,["item","user","campain","showIt"])):(0,i.kq)("",!0),n.showCreateItemModal?((0,i.wg)(),(0,i.j4)(y,{key:2,campain:n.campain,showCreateItemModal:n.showCreateItemModal,user:n.user,onCloseCreateItemModal:t[37]||(t[37]=e=>n.showCreateItemModal=!1),onAddItem:c.refresh_campain},null,8,["campain","showCreateItemModal","user","onAddItem"])):(0,i.kq)("",!0),n.showCreatePCModal?((0,i.wg)(),(0,i.j4)(b,{key:3,campain:n.campain,showCreatePCModal:n.showCreatePCModal,user:n.user,onCloseCreatePCModal:t[38]||(t[38]=e=>n.showCreatePCModal=!1),onAddPC:c.refresh_campain},null,8,["campain","showCreatePCModal","user","onAddPC"])):(0,i.kq)("",!0),n.showPCModalEditSwitch?((0,i.wg)(),(0,i.j4)(k,{key:4,showIt:n.showPCModalEditSwitch,pc:e.pcToDisplay,user:n.user,campain:n.campain,onCloseEditPCModal:t[39]||(t[39]=e=>n.showPCModalEditSwitch=!1),onUpdatePC:t[40]||(t[40]=e=>c.updatePC(e)),onDeletePC:t[41]||(t[41]=e=>c.deletePC(e))},null,8,["showIt","pc","user","campain"])):(0,i.kq)("",!0)])}const Ds=e=>((0,i.dD)("data-v-34268ce8"),e=e(),(0,i.Cn)(),e),Ms={class:"sidebar"},Is={class:"top-line"},Ps={class:"campain-title"},Ls=["disabled"],xs={class:"is-pulled-right mr-2"},Ss={key:0},Ts={key:0},$s=["src"],Us=Ds((()=>(0,i._)("br",null,null,-1))),As={key:2},qs={class:"m-2"},Es={class:"subtitle"},zs={class:"is-pulled-right mr-2"},Gs={key:0,class:"m-2"},Bs={key:1},Vs=Ds((()=>(0,i._)("hr",null,null,-1))),Os=Ds((()=>(0,i._)("label",{class:"label"},"Items display",-1))),js={class:"field"},Hs={class:"control"},Ns={class:"radio"},Zs={class:"radio"},Ws=Ds((()=>(0,i._)("label",{class:"label"},"Max items",-1))),Fs={class:"select"},Ks=(0,i.uE)('<option value="all" data-v-34268ce8>--All--</option><option value="10" data-v-34268ce8>10</option><option value="30" data-v-34268ce8>30</option><option value="50" data-v-34268ce8>50</option><option value="100" data-v-34268ce8>100</option>',5),Ys=[Ks],Rs={class:"is-pulled-right mr-2"},Qs={key:1},Js={key:0},Xs=["onClick"],ei=["onClick"],ti={key:1},ai={key:2},si={key:3,class:"is-pulled-right"},ii={key:4,class:"is-pulled-right"},li=Ds((()=>(0,i._)("div",{class:"sep"},null,-1))),oi={class:"is-pulled-right mr-2"},ni={key:2},ci=Ds((()=>(0,i._)("label",{class:"label"},"Search",-1))),ri={class:"field"},di={class:"control button-in-input"},mi=Ds((()=>(0,i._)("label",{class:"label"},"Filters",-1))),ui={class:"select"},hi=Ds((()=>(0,i._)("option",null,"--All--",-1))),pi={class:"select"},gi=Ds((()=>(0,i._)("option",{value:"name"},"name",-1))),wi=Ds((()=>(0,i._)("option",{value:"date+"},"date +",-1))),_i=Ds((()=>(0,i._)("option",{value:"date-"},"date -",-1))),vi=Ds((()=>(0,i._)("option",{value:"type"},"type",-1))),yi=[gi,wi,_i,vi];function bi(e,t,a,o,n,c){const r=(0,i.up)("fa"),d=(0,i.up)("RatingWidget"),m=(0,i.up)("OfficialMark"),u=(0,i.up)("router-link"),h=(0,i.up)("CreateItemModal"),p=(0,i.up)("PCModalCreate"),g=(0,i.up)("PCModalDisplay"),w=(0,i.up)("PCModalEdit");return(0,i.wg)(),(0,i.iD)("div",Ms,[(0,i._)("div",Is,[(0,i._)("span",Ps,(0,l.zw)(c.charLimit(a.campain.title)),1),(0,i._)("button",{class:"button is-success is-small mb-2",disabled:a.refreshSpin,onClick:t[0]||(t[0]=(...e)=>c.refreshCampain&&c.refreshCampain(...e))},[(0,i.Wm)(r,{icon:"arrows-rotate",class:(0,l.C_)(["mr-2",{spinner:a.refreshSpin}])},null,8,["class"]),(0,i.Uk)(" refresh ")],8,Ls)]),(0,i._)("div",{onClick:t[1]||(t[1]=e=>n.showInfo=!n.showInfo),class:"topic"},[(0,i.Uk)("Campain infos "),(0,i._)("div",xs,[n.showInfo?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),n.showInfo?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(r,{key:1,icon:"angle-right"}))])]),n.showInfo?((0,i.wg)(),(0,i.iD)("div",Ss,[a.campain.image_url?((0,i.wg)(),(0,i.iD)("figure",Ts,[(0,i._)("img",{src:a.campain.image_url},null,8,$s)])):(0,i.kq)("",!0),Us,a.collection?((0,i.wg)(),(0,i.j4)(d,{key:1,collection:a.collection,onNewCollection:t[2]||(t[2]=t=>e.$emit("newCollection",t))},null,8,["collection"])):(0,i.kq)("",!0),a.campain.is_official?((0,i.wg)(),(0,i.iD)("span",As,[(0,i.Wm)(m,{collection:a.campain},null,8,["collection"])])):(0,i.kq)("",!0),(0,i._)("div",qs,[(0,i.Wm)(u,{to:{name:"table",params:{id:n.table.id}},class:"button is-small is-secondary mr-2"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(c.charLimit(n.table.name)),1)])),_:1},8,["to"]),(0,i._)("span",Es,"Mastered by "+(0,l.zw)(c.charLimit(a.campain.game_master.username)),1)])])):(0,i.kq)("",!0),(0,i._)("div",null,[(0,i._)("div",{onClick:t[3]||(t[3]=e=>n.showSettings=!n.showSettings),class:"topic"},[(0,i.Uk)("Settings "),(0,i._)("div",zs,[n.showSettings?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),n.showSettings?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(r,{key:1,icon:"angle-right"}))])]),n.showSettings?((0,i.wg)(),(0,i.iD)("div",Gs,[c.isGameMaster?((0,i.wg)(),(0,i.j4)(u,{key:0,to:{name:"CampainEditView",params:{id:a.campain.id}},class:"m-2 button is-small is-warning"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Edit campain... ")])),_:1},8,["to"])):(0,i.kq)("",!0),c.isGameMaster|c.isOwner?((0,i.wg)(),(0,i.iD)("div",Bs,[(0,i.Uk)(" Campain is ended : "),(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=e=>n.is_ended=e),onChange:t[5]||(t[5]=(...e)=>c.endCampain&&c.endCampain(...e))},null,544),[[s.e8,n.is_ended]]),Vs])):(0,i.kq)("",!0),Os,(0,i._)("div",js,[(0,i._)("div",Hs,[(0,i._)("label",Ns,[(0,i.wy)((0,i._)("input",{type:"radio",name:"Settings",value:"mini","onUpdate:modelValue":t[6]||(t[6]=e=>n.displayMode=e),onChange:t[7]||(t[7]=(...e)=>c.changeDisplayMode&&c.changeDisplayMode(...e))},null,544),[[s.G2,n.displayMode]]),(0,i.Uk)(" Minimal ")]),(0,i._)("label",Zs,[(0,i.wy)((0,i._)("input",{type:"radio",name:"Settings",value:"image","onUpdate:modelValue":t[8]||(t[8]=e=>n.displayMode=e),onChange:t[9]||(t[9]=(...e)=>c.changeDisplayMode&&c.changeDisplayMode(...e))},null,544),[[s.G2,n.displayMode]]),(0,i.Uk)(" With Images ")])])]),Ws,(0,i._)("div",Fs,[(0,i.wy)((0,i._)("select",{class:"is-small","onUpdate:modelValue":t[10]||(t[10]=e=>n.maxItems=e),onChange:t[11]||(t[11]=(...e)=>c.changeMaxItemsDisplay&&c.changeMaxItemsDisplay(...e))},Ys,544),[[s.bM,n.maxItems]])])])):(0,i.kq)("",!0)]),(0,i._)("div",{onClick:t[12]||(t[12]=e=>n.showPlayers=!n.showPlayers),class:"topic"},[(0,i.Uk)("Player Characters "),(0,i._)("div",Rs,[n.showPlayers?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),n.showPlayers?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(r,{key:1,icon:"angle-right"}))])]),n.showPlayers?((0,i.wg)(),(0,i.iD)("div",Qs,[c.isGameMaster?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"button is-small is-success m-2",onClick:t[13]||(t[13]=(...e)=>c.toggleCreatePCModal&&c.toggleCreatePCModal(...e))},"+ New PC")):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.campain.pcs,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id},[c.isGameMaster|!e.locked?((0,i.wg)(),(0,i.iD)("div",Js,[(0,i._)("div",{class:"line-hoverable",onClick:t=>c.showPC(e)},[c.isGameMaster?((0,i.wg)(),(0,i.iD)("span",{key:0,class:"mr-2",onClick:t=>c.togglePcLock(e),onMouseover:t[14]||(t[14]=e=>n.PCModalAvailable=!1),onMouseleave:t[15]||(t[15]=e=>n.PCModalAvailable=!0)},[e.locked?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"eye-slash",style:{color:"red"}})):((0,i.wg)(),(0,i.j4)(r,{key:1,icon:"eye",style:{color:"green"}}))],40,ei)):(0,i.kq)("",!0),e.name?((0,i.wg)(),(0,i.iD)("span",ti,(0,l.zw)(c.charLimit(e.name)),1)):(0,i.kq)("",!0),e.name?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",ai,"--- ")),null!=e.user?((0,i.wg)(),(0,i.iD)("span",si,(0,l.zw)(c.charLimit(e.user.username)),1)):((0,i.wg)(),(0,i.iD)("span",ii,"---"))],8,Xs),li])):(0,i.kq)("",!0)])))),128))])):(0,i.kq)("",!0),(0,i._)("div",{onClick:t[16]||(t[16]=e=>n.showItemTools=!n.showItemTools),class:"topic"},[(0,i._)("div",oi,[n.showItemTools?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),n.showItemTools?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(r,{key:1,icon:"angle-right"}))]),(0,i.Uk)(" Item tools ")]),n.showItemTools?((0,i.wg)(),(0,i.iD)("div",ni,[(0,i._)("button",{class:"button is-small is-success m-2",onClick:t[17]||(t[17]=(...e)=>c.toggleCreateItemModal&&c.toggleCreateItemModal(...e))},"+ New Item"),ci,(0,i._)("div",ri,[(0,i._)("div",di,[(0,i.wy)((0,i._)("input",{class:"input is-small",type:"text",placeholder:"Search by name","onUpdate:modelValue":t[18]||(t[18]=e=>n.searchBy=e),onKeyup:[t[19]||(t[19]=(0,s.D2)((t=>{n.searchBy="",e.$emit("searchItems",n.searchBy)}),["enter"])),t[20]||(t[20]=t=>e.$emit("searchItems",n.searchBy))]},null,544),[[s.nr,n.searchBy]]),(0,i._)("button",{onClick:t[21]||(t[21]=t=>{n.searchBy="",e.$emit("searchItems",n.searchBy)})},"reset")])]),mi,(0,i._)("div",ui,[(0,i.wy)((0,i._)("select",{class:"is-small","onUpdate:modelValue":t[22]||(t[22]=e=>n.filterBy=e),onChange:t[23]||(t[23]=t=>e.$emit("filterItems",n.filterBy))},[hi,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.itemTypes,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e},(0,l.zw)(e),1)))),128))],544),[[s.bM,n.filterBy]])]),(0,i._)("div",pi,[(0,i.wy)((0,i._)("select",{class:"is-small","onUpdate:modelValue":t[24]||(t[24]=e=>n.sortBy=e),onClick:t[25]||(t[25]=t=>e.$emit("sortItems",n.sortBy))},yi,512),[[s.bM,n.sortBy]])])])):(0,i.kq)("",!0),n.showCreateItemModal?((0,i.wg)(),(0,i.j4)(h,{key:3,campain:a.campain,showCreateItemModal:n.showCreateItemModal,user:a.user,onCloseCreateItemModal:c.toggleCreateItemModal,onAddItem:c.addItem},null,8,["campain","showCreateItemModal","user","onCloseCreateItemModal","onAddItem"])):(0,i.kq)("",!0),n.showCreatePCModal?((0,i.wg)(),(0,i.j4)(p,{key:4,campain:a.campain,showCreatePCModal:n.showCreatePCModal,user:a.user,onCloseCreatePCModal:c.toggleCreatePCModal,onAddPC:c.addPC},null,8,["campain","showCreatePCModal","user","onCloseCreatePCModal","onAddPC"])):(0,i.kq)("",!0),n.showPCModalDisplaySwitch?((0,i.wg)(),(0,i.j4)(g,{key:5,showIt:n.showPCModalDisplaySwitch,pc:n.pcToDisplay,user:a.user,campain:a.campain,onClosePCModalDisplay:t[26]||(t[26]=e=>n.showPCModalDisplaySwitch=!n.showPCModalDisplaySwitch),onEditionModePC:t[27]||(t[27]=e=>c.editionModePC(e))},null,8,["showIt","pc","user","campain"])):(0,i.kq)("",!0),n.showPCModalEditSwitch?((0,i.wg)(),(0,i.j4)(w,{key:6,showIt:n.showPCModalEditSwitch,pc:n.pcToDisplay,user:a.user,campain:a.campain,onCloseEditPCModal:t[28]||(t[28]=e=>n.showPCModalEditSwitch=!n.showPCModalEditSwitch),onUpdatePC:t[29]||(t[29]=e=>c.updatePC(e)),onDeletePC:t[30]||(t[30]=e=>c.deletePC(e))},null,8,["showIt","pc","user","campain"])):(0,i.kq)("",!0)])}const ki=e=>((0,i.dD)("data-v-d33dd85a"),e=e(),(0,i.Cn)(),e),fi={class:"modal-card"},Ci={class:"modal-card-head"},Di=ki((()=>(0,i._)("p",{class:"modal-card-title"},"Create a new item",-1))),Mi={class:"modal-card-body"},Ii={class:"control"},Pi=ki((()=>(0,i._)("label",{class:"label"},"Name",-1))),Li=ki((()=>(0,i._)("label",{class:"label"},"Image url",-1))),xi={key:0},Si=ki((()=>(0,i._)("label",{class:"label"},"Type",-1))),Ti={class:"select"},$i={class:"is-flex is-justify-content-space-between m-2"},Ui=ki((()=>(0,i._)("label",{class:"label"},"PC's infos",-1))),Ai=["hidden"],qi=["hidden"],Ei={key:1},zi={class:"is-flex is-justify-content-space-between m-2"},Gi=ki((()=>(0,i._)("label",{class:"label"},"GM's infos",-1))),Bi=["hidden"],Vi=["hidden"],Oi={class:"modal-card-foot"},ji={href:"MDGuide.html",class:"info-icon tooltip",target:"_blank"},Hi=ki((()=>(0,i._)("span",{class:"tooltiptext"},"Edition tips",-1)));function Ni(e,t,a,o,n,c){const r=(0,i.up)("fa");return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)(["modal",{"is-active":a.showCreateItemModal}])},[(0,i._)("div",{class:"modal-background",onClick:t[0]||(t[0]=t=>e.$emit("closeCreateItemModal"))}),(0,i._)("div",fi,[(0,i._)("header",Ci,[Di,(0,i._)("button",{class:"delete","aria-label":"close",onClick:t[1]||(t[1]=t=>e.$emit("closeCreateItemModal"))})]),(0,i._)("section",Mi,[(0,i._)("form",null,[(0,i._)("div",Ii,[Pi,(0,i.wy)((0,i._)("input",{class:"input",type:"text",placeholder:"Name","onUpdate:modelValue":t[2]||(t[2]=e=>n.itemName=e)},null,512),[[s.nr,n.itemName]]),Li,(0,i.wy)((0,i._)("input",{class:"input",type:"text",placeholder:"image url","onUpdate:modelValue":t[3]||(t[3]=e=>n.itemImageUrl=e)},null,512),[[s.nr,n.itemImageUrl]]),c.isGameMaster?((0,i.wg)(),(0,i.iD)("div",xi,[Si,(0,i._)("div",Ti,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.itemType=e)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.itemTypes,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e},(0,l.zw)(e),1)))),128))],512),[[s.bM,n.itemType]])])])):(0,i.kq)("",!0),(0,i._)("div",$i,[Ui,(0,i._)("button",{class:"is-small",onClick:t[5]||(t[5]=e=>c.MDPreview("pcsInfos"))},"preview")]),(0,i._)("div",{hidden:n.showpcsPreview},[(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Informations for the players",id:"pcsInfos","onUpdate:modelValue":t[6]||(t[6]=e=>n.itemPCsInfos=e)},null,512),[[s.nr,n.itemPCsInfos]])],8,Ai),(0,i._)("div",{id:"pcsInfosPreview",onClick:t[7]||(t[7]=e=>c.MDPreview("pcsInfos")),hidden:!n.showpcsPreview,class:"content border p-1"},null,8,qi),c.isGameMaster?((0,i.wg)(),(0,i.iD)("div",Ei,[(0,i._)("div",zi,[Gi,(0,i._)("button",{class:"is-small",onClick:t[8]||(t[8]=e=>c.MDPreview("gmInfos"))},"preview")]),(0,i._)("div",{hidden:n.showgmPreview},[(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Informations for the GM only",id:"gmInfos","onUpdate:modelValue":t[9]||(t[9]=e=>n.itemGmInfos=e)},null,512),[[s.nr,n.itemGmInfos]])],8,Bi),(0,i._)("div",{id:"gmInfosPreview",onClick:t[10]||(t[10]=e=>c.MDPreview("gmInfos")),hidden:!n.showgmPreview,class:"content border p-1"},null,8,Vi)])):(0,i.kq)("",!0)])])]),(0,i._)("footer",Oi,[(0,i._)("button",{class:"button is-success is-small",onClick:t[11]||(t[11]=(0,s.iM)((e=>c.onSubmit()),["prevent"]))},"Save"),(0,i._)("button",{class:"button is-small",onClick:t[12]||(t[12]=t=>e.$emit("closeCreateItemModal"))},"Cancel"),(0,i._)("a",ji,[(0,i.Wm)(r,{icon:"circle-info"}),Hi]),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.errors,(e=>((0,i.wg)(),(0,i.iD)("p",{key:e,style:{color:"red"}},(0,l.zw)(e),1)))),128))])])])],2)}var Zi={name:"CreateItemModal",props:["showCreateItemModal","campain","user"],computed:{isGameMaster(){return this.user.id===this.campain.game_master.id}},data(){return{itemTypes:["NPC","LOCATION","ORGANIZATION","EVENT","NOTE","RECAP","MISC","MEMO"],showpcsPreview:!1,showgmPreview:!1,errors:[],itemName:"",itemType:"MEMO",itemImageUrl:"",itemPCsInfos:"",itemGmInfos:"",item:{}}},methods:{onSubmit(){this.errors=[],this.isGameMaster||(this.itemType="MEMO"),null!==this.itemType?(0,S.Z)({method:"post",url:"/campains/items/create/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{campainId:this.campain.id,title:this.itemName,type:this.itemType,image_url:this.itemImageUrl,pcsInfos:this.itemPCsInfos,gmInfos:this.itemGmInfos}}).then((e=>{this.$emit("addItem"),this.$emit("closeCreateItemModal")})).catch((e=>{console.log(e)})):this.errors.push("Type required.")},MDPreview(e){"pcsInfos"===e?this.showpcsPreview=!this.showpcsPreview:"gmInfos"===e&&(this.showgmPreview=!this.showgmPreview);let t=document.getElementById(e),a=t.value;this.MDPreviewContent=marked.parse(a);let s=document.getElementById(e+"Preview");s.innerHTML=this.MDPreviewContent}}};const Wi=(0,$.Z)(Zi,[["render",Ni],["__scopeId","data-v-d33dd85a"]]);var Fi=Wi;const Ki=e=>((0,i.dD)("data-v-a11614e4"),e=e(),(0,i.Cn)(),e),Yi={class:"modal-card"},Ri={class:"modal-card-head"},Qi=Ki((()=>(0,i._)("p",{class:"modal-card-title"},"Create a new PC",-1))),Ji={class:"modal-card-body"},Xi={class:"control"},el={key:0},tl=Ki((()=>(0,i._)("label",{class:"label"},"Player",-1))),al={class:"select"},sl=Ki((()=>(0,i._)("option",{value:""},"None",-1))),il=["value"],ll=Ki((()=>(0,i._)("label",{class:"label"},"Name",-1))),ol=Ki((()=>(0,i._)("label",{class:"label"},"Image url",-1))),nl={class:"is-flex is-justify-content-space-between m-2"},cl=Ki((()=>(0,i._)("label",{class:"label"},"Other players infos",-1))),rl=["hidden"],dl=["hidden"],ml={key:1},ul={class:"is-flex is-justify-content-space-between m-2"},hl=Ki((()=>(0,i._)("label",{class:"label"},"Player's infos",-1))),pl=["hidden"],gl=["hidden"],wl={key:2},_l={class:"is-flex is-justify-content-space-between m-2"},vl=Ki((()=>(0,i._)("label",{class:"label"},"GM's infos",-1))),yl=["hidden"],bl=["hidden"],kl={class:"modal-card-foot"},fl={href:"MDGuide.html",class:"info-icon tooltip",target:"_blank"},Cl=Ki((()=>(0,i._)("span",{class:"tooltiptext"},"Edition tips",-1)));function Dl(e,t,a,o,n,c){const r=(0,i.up)("fa");return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)(["modal mt-6",{"is-active":a.showCreatePCModal}])},[(0,i._)("div",{class:"modal-background",onClick:t[0]||(t[0]=t=>e.$emit("closeCreatePCModal"))}),(0,i._)("div",Yi,[(0,i._)("header",Ri,[Qi,(0,i._)("button",{class:"delete","aria-label":"close",onClick:t[1]||(t[1]=t=>e.$emit("closeCreatePCModal"))})]),(0,i._)("section",Ji,[(0,i._)("form",null,[(0,i._)("div",Xi,[c.isGameMaster?((0,i.wg)(),(0,i.iD)("div",el,[tl,(0,i._)("div",al,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.player_id=e)},[sl,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.players,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,l.zw)(c.charLimit(e.username)),9,il)))),128))],512),[[s.bM,n.player_id]])])])):(0,i.kq)("",!0),ll,(0,i.wy)((0,i._)("input",{class:"input",type:"text",placeholder:"Name","onUpdate:modelValue":t[3]||(t[3]=e=>n.name=e)},null,512),[[s.nr,n.name]]),ol,(0,i.wy)((0,i._)("input",{class:"input",type:"text",placeholder:"image url","onUpdate:modelValue":t[4]||(t[4]=e=>n.image_url=e)},null,512),[[s.nr,n.image_url]]),(0,i._)("div",nl,[cl,(0,i._)("button",{class:"is-small",onClick:t[5]||(t[5]=e=>c.MDPreview("pcsInfos"))},"preview")]),(0,i._)("div",{hidden:n.showpcsPreview},[(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Informations for the other players",id:"pcsInfos","onUpdate:modelValue":t[6]||(t[6]=e=>n.pcs_infos=e)},null,512),[[s.nr,n.pcs_infos]])],8,rl),(0,i._)("div",{id:"pcsInfosPreview",onClick:t[7]||(t[7]=e=>c.MDPreview("pcsInfos")),hidden:!n.showpcsPreview,class:"content border p-1"},null,8,dl),c.isGameMaster|c.isPlayer?((0,i.wg)(),(0,i.iD)("div",ml,[(0,i._)("div",ul,[hl,(0,i._)("button",{class:"is-small",onClick:t[8]||(t[8]=e=>c.MDPreview("playerInfos"))},"preview")]),(0,i._)("div",{hidden:n.showplayerPreview},[(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Informations for the player only",id:"playerInfos","onUpdate:modelValue":t[9]||(t[9]=e=>n.player_infos=e)},null,512),[[s.nr,n.player_infos]])],8,pl),(0,i._)("div",{id:"playerInfosPreview",onClick:t[10]||(t[10]=e=>c.MDPreview("playerInfos")),hidden:!n.showplayerPreview,class:"content border p-1"},null,8,gl)])):(0,i.kq)("",!0),c.isGameMaster?((0,i.wg)(),(0,i.iD)("div",wl,[(0,i._)("div",_l,[vl,(0,i._)("button",{class:"is-small",onClick:t[11]||(t[11]=e=>c.MDPreview("gmInfos"))},"preview")]),(0,i._)("div",{hidden:n.showgmPreview},[(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Informations for the GM only",id:"gmInfos","onUpdate:modelValue":t[12]||(t[12]=e=>n.gm_infos=e)},null,512),[[s.nr,n.gm_infos]])],8,yl),(0,i._)("div",{id:"gmInfosPreview",onClick:t[13]||(t[13]=e=>c.MDPreview("gmInfos")),hidden:!n.showgmPreview,class:"content border p-1"},null,8,bl)])):(0,i.kq)("",!0)])])]),(0,i._)("footer",kl,[(0,i._)("button",{class:"button is-success is-small",onClick:t[14]||(t[14]=(0,s.iM)((e=>c.onSubmit()),["prevent"]))},"Save"),(0,i._)("button",{class:"button is-small",onClick:t[15]||(t[15]=t=>e.$emit("closeCreatePCModal"))},"Cancel"),(0,i._)("a",fl,[(0,i.Wm)(r,{icon:"circle-info"}),Cl]),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.errors,(e=>((0,i.wg)(),(0,i.iD)("p",{key:e,style:{color:"red"}},(0,l.zw)(e),1)))),128))])])])],2)}var Ml={name:"PCModalCreate",props:["user","campain","showCreatePCModal"],computed:{isGameMaster(){return this.user.id===this.campain.game_master.id},isPlayer(){return null!==this.player_id&&this.user.id===this.player_id}},data(){return{showpcsPreview:!1,showplayerPreview:!1,showgmPreview:!1,errors:[],name:"",image_url:"",player_id:null,players:[],pcs_infos:"",player_infos:"",gm_infos:""}},beforeMount(){this.players=this.campain.table.owners.concat(this.campain.table.guests)},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},onSubmit(){""===this.player_id&&(this.player_id=null);let e={campain_id:this.campain.id,name:this.name,image_url:this.image_url,player_id:this.player_id,data_pc:this.pcs_infos,data_player:this.player_infos,data_gm:this.gm_infos};(0,S.Z)({method:"post",url:"/campains/pc/create/",data:e,headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.$emit("closeCreatePCModal"),this.$emit("addPC")})).catch((e=>{console.log(e.response),this.errors=e.response.data}))},MDPreview(e){"pcsInfos"===e?this.showpcsPreview=!this.showpcsPreview:"gmInfos"===e?this.showgmPreview=!this.showgmPreview:"playerInfos"===e&&(this.showplayerPreview=!this.showplayerPreview);let t=document.getElementById(e),a=t.value;this.MDPreviewContent=marked.parse(a);let s=document.getElementById(e+"Preview");s.innerHTML=this.MDPreviewContent}}};const Il=(0,$.Z)(Ml,[["render",Dl],["__scopeId","data-v-a11614e4"]]);var Pl=Il;const Ll=e=>((0,i.dD)("data-v-5456861a"),e=e(),(0,i.Cn)(),e),xl={class:"modal-card"},Sl={class:"modal-card-head"},Tl={class:"columns"},$l={class:"column is-8"},Ul={class:"modal-card-title"},Al={class:"column is-4 mb-4"},ql={class:"items-right"},El={class:"modal-card-body"},zl=["innerHTML"],Gl={key:0},Bl=["innerHTML"],Vl={key:2},Ol=["innerHTML"],jl={key:4},Hl=Ll((()=>(0,i._)("hr",null,null,-1))),Nl=["src"],Zl=Ll((()=>(0,i._)("footer",{class:"modal-card-foot"},null,-1)));function Wl(e,t,a,s,o,n){return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)(["modal mt-6",{"is-active":a.showIt}])},[(0,i._)("div",{class:"modal-background",onClick:t[0]||(t[0]=t=>e.$emit("closePCModalDisplay",a.pc))}),(0,i._)("div",xl,[(0,i._)("header",Sl,[(0,i._)("div",Tl,[(0,i._)("div",$l,[(0,i._)("span",Ul,(0,l.zw)(n.charLimit(a.pc.name)),1)]),(0,i._)("div",Al,[(0,i._)("div",ql,[n.isGameMaster|n.isPlayer?((0,i.wg)(),(0,i.iD)("span",{key:0,class:"button is-small is-success mr-2",onClick:t[1]||(t[1]=(...e)=>n.editionMode&&n.editionMode(...e))}," Edit ")):(0,i.kq)("",!0),(0,i._)("button",{class:"delete","aria-label":"close",onClick:t[2]||(t[2]=t=>e.$emit("closePCModalDisplay",a.pc))})])])])]),(0,i._)("section",El,[(0,i._)("div",{class:"content",id:"data_pc",innerHTML:n.dataPC},null,8,zl),n.isGameMaster|n.isPlayer?((0,i.wg)(),(0,i.iD)("hr",Gl)):(0,i.kq)("",!0),n.isGameMaster|n.isPlayer?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"content",id:"data_player",innerHTML:n.dataPlayer},null,8,Bl)):(0,i.kq)("",!0),n.isGameMaster?((0,i.wg)(),(0,i.iD)("hr",Vl)):(0,i.kq)("",!0),n.isGameMaster?((0,i.wg)(),(0,i.iD)("div",{key:3,class:"content",id:"data_gm",innerHTML:n.dataGM},null,8,Ol)):(0,i.kq)("",!0),a.pc.image_url?((0,i.wg)(),(0,i.iD)("div",jl,[Hl,(0,i._)("img",{src:a.pc.image_url,alt:"[image]",class:"item-image"},null,8,Nl)])):(0,i.kq)("",!0)]),Zl])],2)}var Fl={name:"PCModalDisplay",props:["pc","user","campain","showIt"],mounted(){let e=document.getElementsByTagName("p");for(let t=0;t<e.length;t++)e[t].style.wordBreak="keep-all"},computed:{isGameMaster(){return this.user.id===this.campain.game_master.id},isPlayer(){return null!==this.pc.user&&this.user.id===this.pc.user.id},dataPC(){return null===this.pc.data_pc|"undefined"===this.pc.data_pc?"":marked.parse(this.pc.data_pc)},dataPlayer(){return null===this.pc.data_player|"undefined"===this.pc.data_player?"":this.isPlayer|this.isGameMaster?marked.parse(this.pc.data_player):""},dataGM(){return this.isGameMaster?marked.parse(this.pc.data_gm):""}},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},editionMode(e){this.$emit("showPCModalDisplay",this.pc),this.$emit("editionModePC",this.pc)}}};const Kl=(0,$.Z)(Fl,[["render",Wl],["__scopeId","data-v-5456861a"]]);var Yl=Kl;const Rl=e=>((0,i.dD)("data-v-d19ec1e2"),e=e(),(0,i.Cn)(),e),Ql={class:"modal-card"},Jl={class:"modal-card-head"},Xl={class:"modal-card-title"},eo={class:"modal-card-body"},to={class:"control"},ao={key:0},so=Rl((()=>(0,i._)("label",{class:"label"},"Player",-1))),io={class:"select"},lo=Rl((()=>(0,i._)("option",{value:""},"None",-1))),oo=["value"],no=Rl((()=>(0,i._)("label",{class:"label"},"Name",-1))),co=Rl((()=>(0,i._)("label",{class:"label"},"Image url",-1))),ro={class:"is-flex is-justify-content-space-between m-2"},mo=Rl((()=>(0,i._)("label",{class:"label"},"Other players infos",-1))),uo=["hidden"],ho=["hidden"],po={key:1},go={class:"is-flex is-justify-content-space-between m-2"},wo=Rl((()=>(0,i._)("label",{class:"label"},"Player's infos",-1))),_o=["hidden"],vo=["hidden"],yo={key:2},bo={class:"is-flex is-justify-content-space-between m-2"},ko=Rl((()=>(0,i._)("label",{class:"label"},"GM's infos",-1))),fo=["hidden"],Co=["hidden"],Do={class:"modal-card-foot"},Mo={class:"columns"},Io={class:"column"},Po={href:"MDGuide.html",class:"info-icon tooltip",target:"_blank"},Lo=Rl((()=>(0,i._)("span",{class:"tooltiptext"},"Edition tips",-1))),xo={class:"column"},So={key:0},To=["disabled"],$o={class:"column"};function Uo(e,t,a,o,n,c){const r=(0,i.up)("fa");return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)(["modal mt-6",{"is-active":a.showIt}])},[(0,i._)("div",{class:"modal-background",onClick:t[0]||(t[0]=t=>e.$emit("closeEditPCModal"))}),(0,i._)("div",Ql,[(0,i._)("header",Jl,[(0,i._)("p",Xl,(0,l.zw)(c.charLimit(n.name)),1),(0,i._)("button",{class:"delete","aria-label":"close",onClick:t[1]||(t[1]=t=>e.$emit("closeEditPCModal"))})]),(0,i._)("section",eo,[(0,i._)("form",null,[(0,i._)("div",to,[c.isGameMaster?((0,i.wg)(),(0,i.iD)("div",ao,[so,(0,i._)("div",io,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.player_id=e)},[lo,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.players,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,l.zw)(c.charLimit(e.username)),9,oo)))),128))],512),[[s.bM,n.player_id]])])])):(0,i.kq)("",!0),no,(0,i.wy)((0,i._)("input",{class:"input",type:"text",placeholder:"Name","onUpdate:modelValue":t[3]||(t[3]=e=>n.name=e)},null,512),[[s.nr,n.name]]),co,(0,i.wy)((0,i._)("input",{class:"input",type:"text",placeholder:"image url","onUpdate:modelValue":t[4]||(t[4]=e=>n.image_url=e)},null,512),[[s.nr,n.image_url]]),(0,i._)("div",ro,[mo,(0,i._)("button",{class:"is-small",onClick:t[5]||(t[5]=e=>c.MDPreview("pcsInfos"))},"preview")]),(0,i._)("div",{hidden:n.showpcsPreview},[(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Informations for the other players",id:"pcsInfos","onUpdate:modelValue":t[6]||(t[6]=e=>n.pcs_infos=e)},null,512),[[s.nr,n.pcs_infos]])],8,uo),(0,i._)("div",{id:"pcsInfosPreview",onClick:t[7]||(t[7]=e=>c.MDPreview("pcsInfos")),hidden:!n.showpcsPreview,class:"content border p-1"},null,8,ho),c.isGameMaster|c.isPlayer?((0,i.wg)(),(0,i.iD)("div",po,[(0,i._)("div",go,[wo,(0,i._)("button",{class:"is-small",onClick:t[8]||(t[8]=e=>c.MDPreview("playerInfos"))},"preview")]),(0,i._)("div",{hidden:n.showplayerPreview},[(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Informations for the player only",id:"playerInfos","onUpdate:modelValue":t[9]||(t[9]=e=>n.player_infos=e)},null,512),[[s.nr,n.player_infos]])],8,_o),(0,i._)("div",{id:"playerInfosPreview",onClick:t[10]||(t[10]=e=>c.MDPreview("playerInfos")),hidden:!n.showplayerPreview,class:"content border p-1"},null,8,vo)])):(0,i.kq)("",!0),c.isGameMaster?((0,i.wg)(),(0,i.iD)("div",yo,[(0,i._)("div",bo,[ko,(0,i._)("button",{class:"is-small",onClick:t[11]||(t[11]=e=>c.MDPreview("gmInfos"))},"preview")]),(0,i._)("div",{hidden:n.showgmPreview},[(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Informations for the GM only",id:"gmInfos","onUpdate:modelValue":t[12]||(t[12]=e=>n.gm_infos=e)},null,512),[[s.nr,n.gm_infos]])],8,fo),(0,i._)("div",{id:"gmInfosPreview",onClick:t[13]||(t[13]=e=>c.MDPreview("gmInfos")),hidden:!n.showgmPreview,class:"content border p-1"},null,8,Co)])):(0,i.kq)("",!0)])])]),(0,i._)("footer",Do,[(0,i._)("div",Mo,[(0,i._)("div",Io,[(0,i._)("button",{class:"button is-success is-small mb-2",onClick:t[14]||(t[14]=(0,s.iM)((e=>c.onSubmit()),["prevent"]))},"Save"),(0,i._)("button",{class:"button is-small",onClick:t[15]||(t[15]=t=>e.$emit("closeEditPCModal"))},"Cancel"),(0,i._)("a",Po,[(0,i.Wm)(r,{icon:"circle-info"}),Lo])]),(0,i._)("div",xo,[c.isGameMaster?((0,i.wg)(),(0,i.iD)("div",So,[(0,i._)("button",{class:"button is-warning is-small mb-2",onClick:t[16]||(t[16]=e=>n.deleteActive=!n.deleteActive)},"delete"),(0,i._)("button",{class:"button is-danger is-small mb-2",disabled:n.deleteActive,onClick:t[17]||(t[17]=(...e)=>c.deletePC&&c.deletePC(...e))}," confirm delete ",8,To)])):(0,i.kq)("",!0)]),(0,i._)("div",$o,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.errors,(e=>((0,i.wg)(),(0,i.iD)("p",{key:e,style:{color:"red"}},(0,l.zw)(e),1)))),128))])])])])],2)}var Ao={name:"PCModalEdit",props:["user","pc","showIt","campain","showEditPCModal"],computed:{isGameMaster(){return this.user.id===this.campain.game_master.id},isPlayer(){return null!==this.player_id&&this.user.id===this.player_id}},data(){return{showpcsPreview:!1,showplayerPreview:!1,showgmPreview:!1,errors:[],name:"",image_url:"",player_id:null,players:[],pcs_infos:"",player_infos:"",gm_infos:"",id:null,deleteActive:!0}},beforeMount(){this.players=this.campain.table.owners.concat(this.campain.table.guests).concat(this.campain.table.game_masters),this.name=this.pc.name,this.image_url=this.pc.image_url,null!==this.pc.user?this.player_id=this.pc.user.id:this.player_id=null,this.pcs_infos=this.pc.data_pc,this.player_infos=this.pc.data_player,this.gm_infos=this.pc.data_gm,this.id=this.pc.id},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},deletePC(){this.errors=[],(0,S.Z)({method:"delete",url:"/campains/pc/delete/",data:{id:this.id,campain_id:this.campain.id},headers:{Authorization:`Token ${this.$store.state.token}`}}).then(this.$emit("deletePC",this.id),this.$emit("closeEditPCModal")).catch((e=>{console.log(e.response.data)}))},onSubmit(){""===this.player_id&&(this.player_id=null);let e={id:this.id,campain_id:this.campain.id,name:this.name,image_url:this.image_url,player_id:this.player_id,data_pc:this.pcs_infos,data_player:this.player_infos,data_gm:this.gm_infos};(0,S.Z)({method:"put",url:"/campains/pc/update/",data:e,headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.$emit("updatePC",e.data),this.$emit("closeEditPCModal")})).catch((e=>{console.log(e.response.data.message),this.errors.push(e.response.data.message)}))},MDPreview(e){"pcsInfos"===e?this.showpcsPreview=!this.showpcsPreview:"gmInfos"===e?this.showgmPreview=!this.showgmPreview:"playerInfos"===e&&(this.showplayerPreview=!this.showplayerPreview);let t=document.getElementById(e),a=t.value;this.MDPreviewContent=marked.parse(a);let s=document.getElementById(e+"Preview");s.innerHTML=this.MDPreviewContent}}};const qo=(0,$.Z)(Ao,[["render",Uo],["__scopeId","data-v-d19ec1e2"]]);var Eo=qo;const zo=["href"],Go={key:1};function Bo(e,t,a,s,o,n){return(0,i.wg)(),(0,i.iD)("span",{class:(0,l.C_)(["official m-2",{"hoverable-official":n.has_url}])},[n.has_url?((0,i.wg)(),(0,i.iD)("a",{key:0,href:a.collection.official_url,target:"_blank",style:{"text-decoration":"none"}}," official ",8,zo)):((0,i.wg)(),(0,i.iD)("span",Go," official "))],2)}var Vo={name:"OfficialMark",props:["collection"],computed:{has_url(){return null!==this.collection.official_url}}};const Oo=(0,$.Z)(Vo,[["render",Bo],["__scopeId","data-v-1e574f7e"]]);var jo=Oo;const Ho=e=>((0,i.dD)("data-v-05935f40"),e=e(),(0,i.Cn)(),e),No=Ho((()=>(0,i._)("br",null,null,-1))),Zo={key:0,class:"ml-5"};function Wo(e,t,a,s,o,n){const c=(0,i.up)("fa");return null!==a.collection?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,l.C_)(["rating-widget",{"can-vote":!a.collection.voted}])},[(0,i._)("span",null,"collection by "+(0,l.zw)(n.charLimit(a.collection.author)),1),No,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.starList,(e=>((0,i.wg)(),(0,i.iD)("span",{key:e.id},[(0,i.Wm)(c,{icon:e.icon,class:(0,l.C_)(["star",{"star-full":e.on,hoverable:!a.collection.voted}]),onClick:t=>n.vote(e.id)},null,8,["icon","class","onClick"])])))),128)),(0,i._)("span",null,(0,l.zw)(a.collection.rating)+"("+(0,l.zw)(a.collection.votes_count)+")",1),a.collection.voted?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",Zo,"please rate it"))],2)):(0,i.kq)("",!0)}var Fo={name:"RatingWidget",data(){return{keys_base:0,rating:0,starList:[]}},props:["collection"],computed:{new_key(){return this.keys_base+=1,this.keys_base}},beforeMount(){this.rating=Number(this.collection.rating),this.get_stars()},methods:{charLimit(e){return e||(e=""),"undefined"===e|null===e?"":e.length<=25?e:e.slice(0,22)+"..."},get_stars(){for(var e=1;e<=5;e++)e<=this.rating||e<=this.rating+.25?this.starList.push({icon:"star",id:e,on:!0}):e<=this.rating+.75?this.starList.push({icon:"star-half-stroke",id:e,on:!0}):this.starList.push({icon:"star",id:e,on:!1})},vote(e){this.collection.voted||(0,S.Z)({method:"put",url:"campains/ratings/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{rate:e,collection_id:this.collection.id}}).then((e=>{let t=e.data;(0,Ut.toast)({message:"Thank you for voting :)",type:"is-success",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:3e3}),this.$emit("newCollection",t)})).catch((e=>{console.log(e)}))}}};const Ko=(0,$.Z)(Fo,[["render",Wo],["__scopeId","data-v-05935f40"]]);var Yo=Ko,Ro={name:"CampainTools",components:{CreateItemModal:Fi,PCModalCreate:Pl,PCModalDisplay:Yl,PCModalEdit:Eo,OfficialMark:jo,RatingWidget:Yo},props:["user","campain","refreshSpin","maxItemsDisplay","itemsDisplayMode","collection"],computed:{isGameMaster(){return this.user.id===this.campain.game_master.id},isOwner(){let e=this.$store.state.current_table;return e.owners.filter((e=>e.id===this.user.id)).length>0}},data(){return{table:{},itemTypes:["NPC","LOCATION","ORGANIZATION","EVENT","NOTE","RECAP","MISC","MEMO"],typeSelected:"--All--",sortBySelected:"date",maxItems:null,displayMode:null,showInfo:!0,showItemTools:!1,showPlayers:!1,showCreateItemModal:!1,showDisplayItemModal:!1,showCreatePCModal:!1,showPCModalDisplaySwitch:!1,PCModalAvailable:!0,showPCModalEditSwitch:!1,pcToDisplay:{},showSettings:!1,filterBy:"--All--",sortBy:"date+",searchBy:"",is_ended:this.campain.is_ended}},beforeMount(){this.displayMode=this.$store.state.prefs.itemsDisplayMode,this.table=this.$store.state.current_table,this.maxItems=this.maxItemsDisplay},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},editionModePC(e){this.showPCModalDisplaySwitch=!this.showPCModalDisplaySwitch,this.pcToDisplay=e,this.showPCModalEditSwitch=!this.showPCModalEditSwitch},changeDisplayMode(){this.$emit("changeDisplayMode",this.displayMode)},changeMaxItemsDisplay(){this.$emit("changeMaxItemsDisplay",this.maxItems)},addItem(){this.refreshCampain()},addPC(){this.refreshCampain()},refreshCampain(){this.$emit("refreshCampain")},toggleCreateItemModal(){this.showCreateItemModal=!this.showCreateItemModal},toggleCreatePCModal(){this.showCreatePCModal=!this.showCreatePCModal},togglePcLock(e){e.locked=!e.locked,(0,S.Z)({method:"put",url:"/campains/pc/update/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{id:e.id,locked:e.locked}}).then((t=>{this.$emit("updatePC",e)})).catch((e=>{console.log(e)}))},showPC(e){this.PCModalAvailable&&(this.pcToDisplay=e,this.showPCModalDisplaySwitch=!this.showPCModalDisplaySwitch)},updatePC(e){this.$emit("updatePC",e)},deletePC(e){this.$emit("deletePC",e)},endCampain(){(0,S.Z)({method:"put",url:"/campains/switch_end_campain/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{campain_id:this.campain.id,table_id:this.table.id}}).then((e=>{(0,Ut.toast)({message:"Campain end status changed",type:"is-success",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:2e3})})).catch((e=>{console.log(e),(0,Ut.toast)({message:"Something went wrong, please try again",type:"is-danger",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:2e3})}))}}};const Qo=(0,$.Z)(Ro,[["render",bi],["__scopeId","data-v-34268ce8"]]);var Jo=Qo;const Xo=e=>((0,i.dD)("data-v-9cdd45e0"),e=e(),(0,i.Cn)(),e),en={class:"card-content p-1"},tn={class:"item-title is-size-6"},an=Xo((()=>(0,i._)("span",{class:"tooltiptext"},"Visibility for the players",-1))),sn={key:0,class:"is-centered"},ln=["src"],on=Xo((()=>(0,i._)("div",{class:"content"},[(0,i._)("br")],-1)));function nn(e,t,a,s,o,n){const c=(0,i.up)("fa");return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)(["card is-3 item-box m-2",a.item.type]),onClick:t[3]||(t[3]=e=>n.openDetailsModal(a.item))},[(0,i._)("div",en,[(0,i._)("div",tn,[n.isGameMaster?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"is-pulled-right button is-small is-rounded tooltip",onClick:t[0]||(t[0]=(...e)=>n.toggleItemLock&&n.toggleItemLock(...e)),onMouseover:t[1]||(t[1]=e=>o.openDetailsModalSwitch=!1),onMouseleave:t[2]||(t[2]=e=>o.openDetailsModalSwitch=!0)},[an,o.locked?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"eye-slash",style:{color:"red"}})):((0,i.wg)(),(0,i.j4)(c,{key:1,icon:"eye",style:{color:"green"}}))],32)):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,l.zw)(n.charLimit(a.item.name)),1)]),"image"===a.displayMode?((0,i.wg)(),(0,i.iD)("div",sn,[a.item.image_url?((0,i.wg)(),(0,i.iD)("img",{key:0,src:a.item.image_url,alt:"[image]",class:"item-image"},null,8,ln)):(0,i.kq)("",!0)])):(0,i.kq)("",!0),on])],2)}var cn={name:"ItemBox",props:["item","user","campain","displayMode"],data(){return{locked:!1,openDetailsModalSwitch:!0}},beforeMount(){this.locked=this.item.locked},computed:{isGameMaster(){return this.user.id===this.campain.game_master.id}},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},openDetailsModal(e){this.openDetailsModalSwitch&&this.$emit("showModalDisplay",e)},toggleItemLock(){(0,S.Z)({method:"put",url:"/campains/items/update/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{id:this.item.id,locked:!this.locked}}).then((e=>{this.$emit("itemUpdated",e.data),this.locked=!this.locked})).catch((e=>{console.log(e)}))}}};const rn=(0,$.Z)(cn,[["render",nn],["__scopeId","data-v-9cdd45e0"]]);var dn=rn;const mn=e=>((0,i.dD)("data-v-f95f1528"),e=e(),(0,i.Cn)(),e),un={class:"m-1"},hn={class:"columns is-mobile"},pn={class:"item-name"},gn={key:0,class:"column is-3"},wn=mn((()=>(0,i._)("span",null,null,-1)));function _n(e,t,a,s,o,n){const c=(0,i.up)("fa");return(0,i.wg)(),(0,i.iD)("div",un,[(0,i._)("div",hn,[(0,i._)("div",{class:(0,l.C_)(["colunm is-mobile mobile-item-row",[a.item.type,{"is-9":n.isGameMaster,"is-12":!n.isGameMaster}]]),onClick:t[0]||(t[0]=e=>n.openDetailsModal(a.item))},[(0,i._)("span",pn,(0,l.zw)(n.charLimit(a.item.name)),1)],2),n.isGameMaster?((0,i.wg)(),(0,i.iD)("div",gn,[n.isGameMaster?((0,i.wg)(),(0,i.iD)("span",{key:0,class:"is-pulled-right mr-5",onClick:t[1]||(t[1]=(...e)=>n.toggleItemLock&&n.toggleItemLock(...e))},[o.locked?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"eye-slash",style:{color:"red"}})):((0,i.wg)(),(0,i.j4)(c,{key:1,icon:"eye",style:{color:"green"}}))])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)]),wn])}var vn={name:"ItemBoxMobile",props:["item","user","campain"],data(){return{locked:!1,openDetailsModalSwitch:!0}},beforeMount(){this.locked=this.item.locked},computed:{isGameMaster(){return this.user.id===this.campain.game_master.id}},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},openDetailsModal(e){this.openDetailsModalSwitch&&this.$emit("showModalDisplay",e)},toggleItemLock(){(0,S.Z)({method:"put",url:"/campains/items/update/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{id:this.item.id,locked:!this.locked}}).then((e=>{this.$emit("itemUpdated",e.data),this.locked=!this.locked})).catch((e=>{console.log(e)}))}}};const yn=(0,$.Z)(vn,[["render",_n],["__scopeId","data-v-f95f1528"]]);var bn=yn;const kn=e=>((0,i.dD)("data-v-217cf5b0"),e=e(),(0,i.Cn)(),e),fn={class:"m-1"},Cn={class:"columns is-mobile"},Dn={class:"item-name"},Mn={key:0,class:"is-pulled-right"},In={key:0,class:"column is-3"},Pn=kn((()=>(0,i._)("span",null,null,-1)));function Ln(e,t,a,s,o,n){const c=(0,i.up)("fa"),r=(0,i.up)("PCModalDisplay"),d=(0,i.up)("PCModalEdit");return(0,i.wg)(),(0,i.iD)("div",fn,[(0,i._)("div",Cn,[(0,i._)("div",{class:(0,l.C_)(["colunm is-mobile mobile-pc-row",{"is-9":n.isGameMaster,"is-12":!n.isGameMaster}]),onClick:t[0]||(t[0]=e=>n.showPC(a.pc))},[(0,i._)("p",Dn,(0,l.zw)(n.charLimit(a.pc.name)),1),a.pc.user?((0,i.wg)(),(0,i.iD)("p",Mn,(0,l.zw)(n.charLimit(a.pc.user.username)),1)):(0,i.kq)("",!0)],2),n.isGameMaster?((0,i.wg)(),(0,i.iD)("div",In,[n.isGameMaster?((0,i.wg)(),(0,i.iD)("span",{key:0,class:"is-pulled-right mr-5",onClick:t[1]||(t[1]=e=>n.togglePcLock(a.pc))},[a.pc.locked?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"eye-slash",style:{color:"red"}})):((0,i.wg)(),(0,i.j4)(c,{key:1,icon:"eye",style:{color:"green"}}))])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)]),Pn,o.showPCModalDisplaySwitch?((0,i.wg)(),(0,i.j4)(r,{key:0,showIt:o.showPCModalDisplaySwitch,pc:e.pcToDisplay,user:a.user,campain:a.campain,onClosePCModalDisplay:t[2]||(t[2]=e=>o.showPCModalDisplaySwitch=!1),onEditionModePC:t[3]||(t[3]=e=>n.editionModePC(e))},null,8,["showIt","pc","user","campain"])):(0,i.kq)("",!0),o.showPCModalEditSwitch?((0,i.wg)(),(0,i.j4)(d,{key:1,showIt:o.showPCModalEditSwitch,pc:e.pcToDisplay,user:a.user,campain:a.campain,onCloseEditPCModal:t[4]||(t[4]=e=>o.showPCModalEditSwitch=!o.showPCModalEditSwitch),onUpdatePC:t[5]||(t[5]=e=>n.updatePC(e)),onDeletePC:t[6]||(t[6]=e=>n.deletePC(e))},null,8,["showIt","pc","user","campain"])):(0,i.kq)("",!0)])}var xn={name:"PcBoxMobile",components:{PCModalCreate:Pl,PCModalDisplay:Yl,PCModalEdit:Eo},props:["pc","user","campain"],data(){return{locked:!1,showPCModalDisplaySwitch:!1,showPCModalEditSwitch:!1}},beforeMount(){this.locked=this.pc.locked},computed:{isGameMaster(){return this.user.id===this.campain.game_master.id}},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},showPC(e){this.pcToDisplay=e,this.showPCModalDisplaySwitch=!this.showPCModalDisplaySwitch},editionModePC(e){this.showPCModalDisplaySwitch=!this.showPCModalDisplaySwitch,this.pcToDisplay=e,this.showPCModalEditSwitch=!this.showPCModalEditSwitch},updatePC(e){this.$emit("updatePC",e)},deletePC(e){this.$emit("deletePC",e)},togglePcLock(e){e.locked=!e.locked,(0,S.Z)({method:"put",url:"/campains/pc/update/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{id:e.id,locked:e.locked}}).then((t=>{this.$emit("updatePC",e)})).catch((e=>{console.log(e)}))}}};const Sn=(0,$.Z)(xn,[["render",Ln],["__scopeId","data-v-217cf5b0"]]);var Tn=Sn;const $n=e=>((0,i.dD)("data-v-16ec5ded"),e=e(),(0,i.Cn)(),e),Un={class:"modal-card"},An={class:"modal-card-head"},qn={class:"columns"},En={class:"column is-8"},zn={class:"modal-card-title"},Gn={class:"column is-4 mb-4"},Bn={class:"items-right"},Vn={class:"item-type"},On={class:"modal-card-body"},jn=["innerHTML"],Hn={key:0},Nn=["innerHTML"],Zn={key:2},Wn=$n((()=>(0,i._)("hr",null,null,-1))),Fn=["src"],Kn=$n((()=>(0,i._)("footer",{class:"modal-card-foot"},null,-1)));function Yn(e,t,a,s,o,n){return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)(["modal",{"is-active":a.showIt}])},[(0,i._)("div",{class:"modal-background",onClick:t[0]||(t[0]=t=>e.$emit("showModalDisplay",a.item))}),(0,i._)("div",Un,[(0,i._)("header",An,[(0,i._)("div",qn,[(0,i._)("div",En,[(0,i._)("span",zn,(0,l.zw)(n.charLimit(a.item.name)),1)]),(0,i._)("div",Gn,[(0,i._)("div",Bn,[(0,i._)("span",Vn,(0,l.zw)(a.item.type),1),n.isGameMaster|"MEMO"===a.item.type?((0,i.wg)(),(0,i.iD)("span",{key:0,class:"button is-small is-success mr-2",onClick:t[1]||(t[1]=e=>n.editionMode(a.item))}," Edit ")):(0,i.kq)("",!0),(0,i._)("button",{class:"delete","aria-label":"close",onClick:t[2]||(t[2]=t=>e.$emit("showModalDisplay",a.item))})])])])]),(0,i._)("section",On,[(0,i._)("div",{class:"content",id:"data_pc",innerHTML:n.dataPC},null,8,jn),n.isGameMaster?((0,i.wg)(),(0,i.iD)("hr",Hn)):(0,i.kq)("",!0),n.isGameMaster?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"content",id:"data_gm",innerHTML:n.dataGM},null,8,Nn)):(0,i.kq)("",!0),a.item.image_url?((0,i.wg)(),(0,i.iD)("div",Zn,[Wn,(0,i._)("img",{src:a.item.image_url,alt:"[image]",class:"item-image"},null,8,Fn)])):(0,i.kq)("",!0)]),Kn])],2)}var Rn={name:"ItemModalDisplay",props:["item","user","campain","showIt"],computed:{isGameMaster(){return this.user.id===this.campain.game_master.id},dataPC(){return marked.parse(this.item.data_pc)},dataGM(){return this.isGameMaster?marked.parse(this.item.data_gm):""}},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},editionMode(e){this.$emit("showModalDisplay",e),this.$emit("editionMode",e)}},mounted(){let e=document.getElementsByTagName("p");for(let t=0;t<e.length;t++)e[t].style.wordBreak="keep-all"}};const Qn=(0,$.Z)(Rn,[["render",Yn],["__scopeId","data-v-16ec5ded"]]);var Jn=Qn;const Xn=e=>((0,i.dD)("data-v-34b74cc8"),e=e(),(0,i.Cn)(),e),ec={class:"modal-card"},tc={class:"modal-card-head"},ac={class:"modal-card-title"},sc={class:"modal-card-body"},ic={class:"control"},lc=Xn((()=>(0,i._)("label",{class:"label"},"Name",-1))),oc=Xn((()=>(0,i._)("label",{class:"label"},"Image url",-1))),nc={key:0},cc=Xn((()=>(0,i._)("label",{class:"label"},"Type",-1))),rc={class:"select"},dc={class:"is-flex is-justify-content-space-between m-2"},mc=Xn((()=>(0,i._)("label",{class:"label"},"PC's infos",-1))),uc=["hidden"],hc=["hidden"],pc={key:1},gc={class:"is-flex is-justify-content-space-between m-2"},wc=Xn((()=>(0,i._)("label",{class:"label"},"GM's infos",-1))),_c=["hidden"],vc=["hidden"],yc={class:"modal-card-foot"},bc={class:"columns"},kc={class:"column"},fc={href:"MDGuide.html",class:"info-icon tooltip",target:"_blank"},Cc=Xn((()=>(0,i._)("span",{class:"tooltiptext"},"Edition tips",-1))),Dc={class:"column"},Mc=["disabled"],Ic={class:"column"};function Pc(e,t,a,o,n,c){const r=(0,i.up)("fa");return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)(["modal",{"is-active":a.showIt}])},[(0,i._)("div",{class:"modal-background",onClick:t[0]||(t[0]=t=>e.$emit("showModalEdit",a.item))}),(0,i._)("div",ec,[(0,i._)("header",tc,[(0,i._)("span",ac,(0,l.zw)(c.charLimit(n.itemName)),1),(0,i._)("button",{class:"delete","aria-label":"close",onClick:t[1]||(t[1]=t=>e.$emit("showModalEdit",a.item))})]),(0,i._)("section",sc,[(0,i._)("form",null,[(0,i._)("div",ic,[lc,(0,i.wy)((0,i._)("input",{class:"input",type:"text",placeholder:"Name","onUpdate:modelValue":t[2]||(t[2]=e=>n.itemName=e)},null,512),[[s.nr,n.itemName]]),oc,(0,i.wy)((0,i._)("input",{class:"input",type:"text",placeholder:"image url","onUpdate:modelValue":t[3]||(t[3]=e=>n.itemImageUrl=e)},null,512),[[s.nr,n.itemImageUrl]]),c.isGameMaster?((0,i.wg)(),(0,i.iD)("div",nc,[cc,(0,i._)("div",rc,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.itemType=e)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.itemTypes,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e},(0,l.zw)(e),1)))),128))],512),[[s.bM,n.itemType]])])])):(0,i.kq)("",!0),(0,i._)("div",dc,[mc,(0,i._)("button",{class:"is-small",onClick:t[5]||(t[5]=e=>c.MDPreview("pcsInfos"))},"preview")]),(0,i._)("div",{hidden:n.showpcsPreview},[(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Informations for the players",id:"pcsInfos","onUpdate:modelValue":t[6]||(t[6]=e=>n.itemPCsInfos=e)},null,512),[[s.nr,n.itemPCsInfos]])],8,uc),(0,i._)("div",{id:"pcsInfosPreview",onClick:t[7]||(t[7]=e=>c.MDPreview("pcsInfos")),hidden:!n.showpcsPreview,class:"content border p-1"},null,8,hc),c.isGameMaster?((0,i.wg)(),(0,i.iD)("div",pc,[(0,i._)("div",gc,[wc,(0,i._)("button",{class:"is-small",onClick:t[8]||(t[8]=e=>c.MDPreview("gmInfos"))},"preview")]),(0,i._)("div",{hidden:n.showgmPreview},[(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Informations for the GM only",id:"gmInfos","onUpdate:modelValue":t[9]||(t[9]=e=>n.itemGmInfos=e)},null,512),[[s.nr,n.itemGmInfos]])],8,_c),(0,i._)("div",{id:"gmInfosPreview",onClick:t[10]||(t[10]=e=>c.MDPreview("gmInfos")),hidden:!n.showgmPreview,class:"content border p-1"},null,8,vc)])):(0,i.kq)("",!0)])])]),(0,i._)("footer",yc,[(0,i._)("div",bc,[(0,i._)("div",kc,[(0,i._)("button",{class:"button is-small is-success mb-2",onClick:t[11]||(t[11]=t=>c.confirmUpdate(e.updated_item))}," Confirm "),(0,i._)("button",{class:"button is-small",onClick:t[12]||(t[12]=t=>e.$emit("showModalEdit",a.item))},"Cancel"),(0,i._)("a",fc,[(0,i.Wm)(r,{icon:"circle-info"}),Cc])]),(0,i._)("div",Dc,[(0,i._)("button",{class:"button is-warning is-small mb-2",onClick:t[13]||(t[13]=e=>n.deleteActive=!n.deleteActive)},"delete"),(0,i._)("button",{class:"button is-danger is-small mb-2",disabled:n.deleteActive,onClick:t[14]||(t[14]=(...e)=>c.deleteItem&&c.deleteItem(...e))}," confirm delete ",8,Mc)]),(0,i._)("div",Ic,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.errors,(e=>((0,i.wg)(),(0,i.iD)("p",{key:e,style:{color:"red"}},(0,l.zw)(e),1)))),128))])])])])],2)}var Lc={name:"ItemModalEdit",props:["item","user","campain","showIt"],data(){return{itemTypes:["NPC","LOCATION","ORGANIZATION","EVENT","NOTE","RECAP","MISC","MEMO"],showpcsPreview:!1,showgmPreview:!1,errors:[],itemName:this.item.name,itemType:this.item.type,itemImageUrl:this.item.image_url,itemPCsInfos:this.item.data_pc,itemGmInfos:this.item.data_gm,deleteActive:!0}},computed:{isGameMaster(){return this.user.id===this.campain.game_master.id}},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},deleteItem(){this.errors=[];let e=this.item.id;(0,S.Z)({method:"delete",url:"/campains/items/delete/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{id:e}}).then((t=>{this.$emit("itemDeleted",e)})).catch((e=>{this.errors.push(e.response.data.message)}))},confirmUpdate(){if(this.errors=[],this.isGameMaster||(this.itemType="MEMO"),""===this.itemType)return void this.errors.push("Type required.");let e={id:this.item.id,name:this.itemName,type:this.itemType,image_url:this.itemImageUrl,language:"en",data_pc:this.itemPCsInfos,data_gm:this.itemGmInfos};(0,S.Z)({method:"put",url:"/campains/items/update/",headers:{Authorization:`Token ${this.$store.state.token}`},data:e}).then((t=>{this.$emit("itemUpdated",t.data),this.$emit("showModalEdit",e)})).catch((e=>{this.errors.push(e.response.data.message)}))},MDPreview(e){"pcsInfos"===e?this.showpcsPreview=!this.showpcsPreview:"gmInfos"===e&&(this.showgmPreview=!this.showgmPreview);let t=document.getElementById(e),a=t.value;this.MDPreviewContent=marked.parse(a);let s=document.getElementById(e+"Preview");s.innerHTML=this.MDPreviewContent}}};const xc=(0,$.Z)(Lc,[["render",Pc],["__scopeId","data-v-34b74cc8"]]);var Sc=xc,Tc={name:"CampainView",components:{CampainTools:Jo,ItemBox:dn,ItemModalDisplay:Jn,ItemModalEdit:Sc,ItemBoxMobile:bn,CreateItemModal:Fi,PCModalCreate:Pl,PCModalEdit:Eo,PcBoxMobile:Tn,OfficialMark:jo,RatingWidget:Yo},data(){return{user:{},campain:{title:"no title"},collection:{},table:{},refreshSpin:!1,itemsDisplayMode:"image",shownItems:[],maxItemsDisplay:50,showItemModalDisplaySwitch:!1,showItemModalEditSwitch:!1,itemToDisplay:{},filterBy:"--All--",sortBy:"date+",searchBy:"",displayMobileItems:!0,displayMobilePcs:!1,displayMobileInfos:!1,displayMobileSettings:!1,itemTypes:["NPC","LOCATION","ORGANIZATION","EVENT","NOTE","RECAP","MISC","MEMO"],showCreateItemModal:!1,showCreatePCModal:!1,showPCModalDisplaySwitch:!1,showPCModalEditSwitch:!1,maxItems:50}},computed:{isGameMaster(){return this.user.id===this.campain.game_master.id}},beforeMount(){this.itemsDisplayMode=this.$store.state.prefs.itemsDisplayMode,this.user=this.$store.state.user,this.campain=this.$store.state.current_campain,this.collection=this.campain.parent_collection,this.refresh_campain()},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},displayMobile(e){let t=document.getElementById("tab-items"),a=document.getElementById("tab-pcs"),s=document.getElementById("tab-infos"),i=document.getElementById("tab-settings");"items"==e?(this.displayMobileItems=!0,this.displayMobilePcs=!1,this.displayMobileInfos=!1,this.displayMobileSettings=!1,t.classList.add("is-active"),a.classList.remove("is-active"),s.classList.remove("is-active"),i.classList.remove("is-active")):"pcs"==e?(this.displayMobileItems=!1,this.displayMobilePcs=!0,this.displayMobileInfos=!1,this.displayMobileSettings=!1,t.classList.remove("is-active"),a.classList.add("is-active"),s.classList.remove("is-active"),i.classList.remove("is-active")):"infos"==e?(this.displayMobileItems=!1,this.displayMobilePcs=!1,this.displayMobileInfos=!0,this.displayMobileSettings=!1,t.classList.remove("is-active"),a.classList.remove("is-active"),s.classList.add("is-active"),i.classList.remove("is-active")):"settings"==e&&(this.displayMobileItems=!1,this.displayMobilePcs=!1,this.displayMobileInfos=!1,this.displayMobileSettings=!0,t.classList.remove("is-active"),a.classList.remove("is-active"),s.classList.remove("is-active"),i.classList.add("is-active"))},newCollection(e){this.refresh_campain()},itemDeleted(e){this.showItemModalDisplaySwitch=!1,this.showItemModalEditSwitch=!1;let t=this.campain.items.find((t=>t.id==e)),a=this.campain.items.indexOf(t);-1!==a&&this.campain.items.splice(a,1)},searchItems(e){this.searchBy=e,""==e?(this.shownItems=this.campain.items,this.filterItems(this.filterBy)):this.shownItems=this.campain.items.filter((t=>t.name.toLowerCase().includes(e.toLowerCase())))},filterItems(e){this.filterBy=e,this.shownItems="--All--"==e?this.campain.items:this.campain.items.filter((t=>t.type==e)),this.sortItems(this.sortBy)},sortItems(e){this.shownItems=this.shownItems.sort(((t,a)=>"date-"==e?new Date(t.date_unlocked)-new Date(a.date_unlocked):"date+"==e?new Date(a.date_unlocked)-new Date(t.date_unlocked):"name"==e?t.name.localeCompare(a.name):"type"==e?t.type.localeCompare(a.type):void 0))},showItemModalEditOn(e){this.showItemModalDisplaySwitch=!1,this.showItemModalEditSwitch=!0,this.itemToDisplay=e},showItemModalEditOff(e){this.showItemModalDisplaySwitch=!0,this.showItemModalEditSwitch=!1,this.itemToDisplay=e},showItemModalDisplay(e){this.showItemModalDisplaySwitch=!this.showItemModalDisplaySwitch,this.itemToDisplay=e},getUpdatedItem(e){let t=this.campain.items.find((t=>t.id==e.id)),a=this.campain.items.indexOf(t);-1!==a&&this.campain.items.splice(a,1,e);this.$store.state.current_campain.items.find((t=>t.id==e.id)),this.$store.state.current_campain.items.indexOf(t);-1!==a&&this.$store.state.current_campain.items.splice(a,1,e)},changeDisplayMode(e){this.$store.state.prefs.itemsDisplayMode=e,this.itemsDisplayMode=e},changeMaxItemsDisplay(e){this.maxItemsDisplay=e,"all"===this.maxItemsDisplay?this.shownItems=this.campain.items:this.shownItems=this.campain.items.slice(0,this.maxItemsDisplay)},refresh_campain(){this.user=this.$store.state.user,this.campain=this.$store.state.current_campain,this.table=this.$store.state.current_table,this.refreshSpin=!0,(0,S.Z)({method:"get",url:`/campains/campains/${this.campain.id}/`,headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.collection=e.data.collection,this.campain=e.data.campain,this.isGameMaster||(this.campain.items=this.campain.items.filter((e=>!e.locked))),this.shownItems=this.campain.items,this.table=e.data.campain.table,this.$store.state.current_campain=e.data.campain,this.$store.state.current_table=e.data.campain.table,this.refreshSpin=!1,this.filterItems(this.filterBy)})).catch((e=>{console.log(e),this.refreshSpin=!1}))},updatePC(e){let t=this.campain.pcs.find((t=>t.id==e.id)),a=this.campain.pcs.indexOf(t);-1!==a&&this.campain.pcs.splice(a,1,e)},deletePC(e){let t=this.campain.pcs.find((t=>t.id==e)),a=this.campain.pcs.indexOf(t);-1!==a&&this.campain.pcs.splice(a,1)},endCampain(){(0,S.Z)({method:"put",url:"/campains/switch_end_campain/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{campain_id:this.campain.id,table_id:this.table.id}}).then((e=>{(0,Ut.toast)({message:"Campain end status changed",type:"is-success",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:2e3})})).catch((e=>{console.log(e),(0,Ut.toast)({message:"Something went wrong, please try again",type:"is-danger",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:2e3})}))}}};const $c=(0,$.Z)(Tc,[["render",Cs],["__scopeId","data-v-76449592"]]);var Uc=$c;const Ac=e=>((0,i.dD)("data-v-7ce7d099"),e=e(),(0,i.Cn)(),e),qc={class:"container is-max-desktop"},Ec=Ac((()=>(0,i._)("h1",{class:"title"},"Edit Campain",-1))),zc={class:"subtitle"},Gc={key:0},Bc={class:"mt-2"},Vc=Ac((()=>(0,i._)("label",{class:"label"},"Language",-1))),Oc=(0,i.uE)('<option value="ar" data-v-7ce7d099>Arabic</option><option value="cs" data-v-7ce7d099>Czech</option><option value="zh" data-v-7ce7d099>Chinese</option><option value="da" data-v-7ce7d099>Danish</option><option value="nl" data-v-7ce7d099>Dutch</option><option value="en" data-v-7ce7d099>English</option><option value="fi" data-v-7ce7d099>Finnish</option><option value="fr" data-v-7ce7d099>French</option><option value="de" data-v-7ce7d099>German</option><option value="el" data-v-7ce7d099>Greek</option><option value="hi" data-v-7ce7d099>Hindi</option><option value="hu" data-v-7ce7d099>Hungarian</option><option value="it" data-v-7ce7d099>Italian</option><option value="ja" data-v-7ce7d099>Japanese</option><option value="ko" data-v-7ce7d099>Korean</option><option value="no" data-v-7ce7d099>Norwegian</option><option value="fa" data-v-7ce7d099>Persian</option><option value="pl" data-v-7ce7d099>Polish</option><option value="pt" data-v-7ce7d099>Portuguese</option><option value="ru" data-v-7ce7d099>Russian</option><option value="es" data-v-7ce7d099>Spanish</option><option value="sv" data-v-7ce7d099>Swedish</option><option value="th" data-v-7ce7d099>Thai</option><option value="tr" data-v-7ce7d099>Turkish</option><option value="vi" data-v-7ce7d099>Vietnamese</option>',25),jc=[Oc],Hc=Ac((()=>(0,i._)("label",{class:"label"},"Game",-1))),Nc=Ac((()=>(0,i._)("label",{class:"label"},"Campain title",-1))),Zc=Ac((()=>(0,i._)("label",{class:"label"},"Image url",-1))),Wc=Ac((()=>(0,i._)("label",{class:"label"},"Description",-1))),Fc={class:"m-2"},Kc=Ac((()=>(0,i._)("strong",null,"Is this campain is ended ? ",-1))),Yc={key:0},Rc=(0,i.uE)('<label class="label m-2" data-v-7ce7d099> is copy locked ? </label><p class="text" data-v-7ce7d099> Once it is checked, it can not be unchecked. </p><p class="text" data-v-7ce7d099> A locked campaign will not be albe to export any items at all, but will be able to import items from any other campaigns and collections. </p><p class="text" data-v-7ce7d099> This feature prevents copyright issues. </p><p class="text" data-v-7ce7d099> DO NOT CHECK if you want to create a collection from this campaign. </p>',5),Qc={class:"m-2"},Jc=["disabled"],Xc={key:1},er=["disabled"];function tr(e,t,a,o,n,c){const r=(0,i.up)("fa");return(0,i.wg)(),(0,i.iD)("div",qc,[(0,i._)("form",null,[Ec,(0,i._)("h2",zc,(0,l.zw)(c.charLimit(n.campainTitle)),1),n.errors.length?((0,i.wg)(),(0,i.iD)("ul",Gc,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.errors,(e=>((0,i.wg)(),(0,i.iD)("li",{class:"is-danger",key:e,style:{color:"red"}},(0,l.zw)(e),1)))),128))])):(0,i.kq)("",!0),(0,i._)("div",Bc,[Vc,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.language=e)},jc,512),[[s.bM,n.language]]),Hc,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Game name",class:"input","onUpdate:modelValue":t[1]||(t[1]=e=>n.game=e)},null,512),[[s.nr,n.game]]),Nc,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Campain title",class:"input","onUpdate:modelValue":t[2]||(t[2]=e=>n.campainTitle=e)},null,512),[[s.nr,n.campainTitle]]),Zc,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Image url",class:"input","onUpdate:modelValue":t[3]||(t[3]=e=>n.image_url=e)},null,512),[[s.nr,n.image_url]]),Wc,(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Campain description","onUpdate:modelValue":t[4]||(t[4]=e=>n.camapainDescription=e)},null,512),[[s.nr,n.camapainDescription]]),(0,i._)("div",Fc,[Kc,(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=t=>e.is_ended=t)},null,512),[[s.e8,e.is_ended]])]),n.campain.is_copy_free?((0,i.wg)(),(0,i.iD)("div",Yc,[Rc,(0,i._)("div",Qc,[(0,i._)("button",{class:"button is-small is-warning mr-4",onClick:t[6]||(t[6]=e=>n.allowCopyLock=!0)},"I Understand"),(0,i.wy)((0,i._)("input",{type:"checkbox",class:"ml-4","onUpdate:modelValue":t[7]||(t[7]=e=>n.is_copy_locked=e),disabled:!n.allowCopyLock},null,8,Jc),[[s.e8,n.is_copy_locked]])])])):((0,i.wg)(),(0,i.iD)("div",Xc,[(0,i._)("p",null,[(0,i.Uk)("This campaign is copy locked "),(0,i.Wm)(r,{icon:"lock",style:{color:"red"}})])]))]),(0,i._)("button",{class:"button is-success mt-2",onClick:t[8]||(t[8]=(0,s.iM)(((...e)=>c.onSubmit&&c.onSubmit(...e)),["prevent"]))},"Confirm"),(0,i._)("button",{class:"button is-secondary m-2",onClick:t[9]||(t[9]=(0,s.iM)(((...e)=>c.onCancel&&c.onCancel(...e)),["prevent"]))},"Cancel"),(0,i._)("button",{class:"button is-warning m-2",onClick:t[10]||(t[10]=e=>n.allowDeleteCampain=!n.allowDeleteCampain)}," delete campaign "),(0,i._)("button",{disabled:!n.allowDeleteCampain,onClick:t[11]||(t[11]=(0,s.iM)((e=>c.deleteCampain(n.campain.id)),["prevent"])),class:"button is-danger m-2"},"Confirm deletion ",8,er)])])}var ar={name:"CampainEditView",data(){return{user:this.$store.state.user,campain:{},table:{},game:"",image_url:"",language:"en",gameMasterId:null,campainTitle:"",camapainDescription:"",is_copy_locked:!1,errors:[],allowDeleteCampain:!1,allowCopyLock:!1}},beforeMount(){this.table=this.$store.state.current_table,this.campain=this.$store.state.current_campain,this.game=this.campain.game,this.image_url=this.campain.image_url,this.language=this.campain.language,this.campainTitle=this.campain.title,this.camapainDescription=this.campain.description,this.gameMasterId=this.campain.game_master.id,this.is_copy_locked=!this.campain.is_copy_free,this.is_ended=this.campain.is_ended},computed:{isGameMaster(){return this.user.id===this.campain.game_master.id}},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},onSubmit(){if(this.errors=[],""===this.game&&this.errors.push("You must enter a game"),""===this.campainTitle&&this.errors.push("You must enter a title"),null===this.gameMasterId&&this.errors.push("You must select a master"),this.errors.length>0)return;let e={campain_id:this.campain.id,game:this.game,title:this.campainTitle,description:this.camapainDescription,image_url:this.image_url,language:this.language,is_copy_free:!this.is_copy_locked,is_ended:this.is_ended};(0,S.Z)({method:"put",url:"/campains/update_campain/",headers:{Authorization:`Token ${this.$store.state.token}`},data:e}).then((e=>{this.$router.push({name:"CampainView",params:{id:this.$store.state.current_campain.id}})})).catch((e=>{console.log(e.response.data),this.errors.push(e.response.data.message)}))},onCancel(){this.$router.push({name:"CampainView",params:{id:this.$store.state.current_campain.id}})},deleteCampain(e){(0,S.Z)({method:"delete",url:`/campains/campains/${this.campain.id}/`,headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.$router.push({name:"table",params:{id:this.table.id}})})).catch((e=>{console.log(e)}))}}};const sr=(0,$.Z)(ar,[["render",tr],["__scopeId","data-v-7ce7d099"]]);var ir=sr;const lr={class:"container is-max-desktop"},or=(0,i._)("h1",{class:"title"},"Signup",-1),nr=(0,i._)("p",{class:"label"},"Enter your username",-1),cr=(0,i._)("p",{class:"label"},"Enter your email",-1),rr=(0,i._)("p",{class:"label"},"Enter your password",-1),dr=(0,i._)("p",{class:"label"},"Confirm your password",-1),mr=(0,i._)("br",null,null,-1),ur={class:"m-5"},hr=(0,i._)("a",{href:"TandC.html",target:"_blank"}," terms and conditions",-1),pr=(0,i._)("a",{href:"privacyPolicy.html",target:"_blank"}," privacy policy ",-1),gr={key:0};function wr(e,t,a,o,n,c){return(0,i.wg)(),(0,i.iD)("div",lr,[(0,i._)("form",null,[or,nr,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"username",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>n.username=e),class:"input"},null,512),[[s.nr,n.username]]),cr,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"email",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>n.email=e),class:"input"},null,512),[[s.nr,n.email]]),rr,(0,i.wy)((0,i._)("input",{type:"password",required:"",placeholder:"password","onUpdate:modelValue":t[2]||(t[2]=e=>n.password=e),class:"input"},null,512),[[s.nr,n.password]]),dr,(0,i.wy)((0,i._)("input",{type:"password",required:"",placeholder:"password","onUpdate:modelValue":t[3]||(t[3]=e=>n.password2=e),class:"input"},null,512),[[s.nr,n.password2]]),mr,(0,i._)("div",ur,[(0,i._)("p",null,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=e=>n.termsOfService=e),onChange:t[5]||(t[5]=(...e)=>c.checkCreateButton&&c.checkCreateButton(...e))},null,544),[[s.e8,n.termsOfService]]),(0,i.Uk)(" I accept the "),hr]),(0,i._)("p",null,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=e=>n.privacyPolicy=e),onChange:t[7]||(t[7]=(...e)=>c.checkCreateButton&&c.checkCreateButton(...e))},null,544),[[s.e8,n.privacyPolicy]]),(0,i.Uk)(" I accept the "),pr])]),n.errors.length?((0,i.wg)(),(0,i.iD)("div",gr,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.values(n.errors[0]),(e=>((0,i.wg)(),(0,i.iD)("li",{key:e,style:{color:"red"}},(0,l.zw)(e[0]),1)))),128))])])):(0,i.kq)("",!0),(0,i._)("button",{class:"button is-success mt-2",id:"createAccountButton",disabled:"",onClick:t[8]||(t[8]=(...e)=>c.createAccount&&c.createAccount(...e))},"Create my account")])])}var _r={name:"SignupView",components:{},data(){return{username:"",email:"",password:"",password2:"",termsOfService:!1,privacyPolicy:!1,errors:[]}},methods:{checkCreateButton(){this.termsOfService&&this.privacyPolicy?document.querySelector("#createAccountButton").disabled=!1:document.querySelector("#createAccountButton").disabled=!0},checkEntries(){return""===this.username||""===this.email||""===this.password||""===this.password2?(this.errors.push({credentials:["All fields must be filled"]}),!1):this.password===this.password2||(this.errors.push({password:["Passwords don't match"]}),!1)},createAccount(){console.log("create account"),this.errors=[],this.checkEntries()&&S.Z.post("auth/users/",{username:this.username,email:this.email,password:this.password}).then((e=>{(0,Ut.toast)({message:"Account created, please check your email to confirm your account",type:"is-success",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:1e4}),this.$router.push({name:"home"})})).catch((e=>{console.log(e.response.data),this.errors.push(e.response.data)}))}}};const vr=(0,$.Z)(_r,[["render",wr]]);var yr=vr;const br={class:"container is-max-desktop"},kr=(0,i._)("h1",{class:"title"},"Login",-1),fr=(0,i._)("p",{class:"label"},"Enter a credential",-1),Cr=(0,i._)("p",{class:"label"},"Enter your password",-1),Dr=(0,i._)("br",null,null,-1),Mr={class:"m-2"},Ir={class:"m-2"};function Pr(e,t,a,l,o,n){const c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",br,[kr,fr,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Email or username","onUpdate:modelValue":t[0]||(t[0]=e=>o.credential=e),required:"",class:"input"},null,512),[[s.nr,o.credential]]),Cr,(0,i.wy)((0,i._)("input",{type:"password",placeholder:"Password","onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),required:"",class:"input"},null,512),[[s.nr,o.password]]),Dr,(0,i._)("button",{class:"button is-success mt-2",onClick:t[2]||(t[2]=(...e)=>n.onSubmit&&n.onSubmit(...e))},"Login"),(0,i._)("p",Mr,[(0,i.Wm)(c,{to:"/forgotten_password"},{default:(0,i.w5)((()=>[(0,i.Uk)("I forgot my password")])),_:1})]),(0,i._)("p",Ir,[(0,i.Wm)(c,{to:"/send_confirmation_email_again"},{default:(0,i.w5)((()=>[(0,i.Uk)("I already have an account, but please send me the confirmation email again")])),_:1})])])}var Lr=a(65),xr=(0,Lr.MT)({state:{isloading:!1,isAuthenticated:!1,token:null,user:{},current_table:{name:"current_table",id:"no_id"},current_campain:{name:"current_campain",id:"no_id"},prefs:{itemsDisplayMode:"image"},configuration:{}},getters:{},mutations:{initializeStore(e){localStorage.getItem("store")?(e.token=localStorage.getItem("token"),e.isAuthenticated=!0):(e.token=null,e.isAuthenticated=!1)},setIsLoading(e,t){e.isloading=t},setToken(e,t){e.token=t,e.isAuthenticated=!0},removeToken(e){e.token=null,e.isAuthenticated=!1}},actions:{},modules:{}}),Sr={name:"LoginView",components:{},data(){return{credential:"",password:""}},methods:{onSubmit(){""!==this.credential&&""!==this.password&&(0,S.Z)({method:"post",url:"users/token/login/",data:{credential:this.credential,password:this.password}}).then((e=>{this.$store.commit("setToken",e.data.auth_token),this.$store.state.user=e.data.user,(0,Ut.toast)({message:"Logged in",type:"is-success",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:3e3}),this.$router.push({name:"dashboard"})})).catch((e=>{if(void 0!=e.response){let s="";for(var t in e.response.data)for(var a=0;a<e.response.data[t].length;a++)s+=e.response.data[t][a]+"\n";(0,Ut.toast)({message:`${s}`,type:"is-danger",position:"center",dismissible:!0,pauseOnHover:!0,duration:3e3})}}))}}};const Tr=(0,$.Z)(Sr,[["render",Pr]]);var $r=Tr;const Ur={class:"container is-max-desktop"},Ar=(0,i._)("h1",{class:"title"},"Send me the confirmation email again",-1),qr=(0,i._)("label",{class:"label"},"Credential",-1),Er={key:0};function zr(e,t,a,o,n,c){return(0,i.wg)(),(0,i.iD)("div",Ur,[(0,i._)("form",null,[Ar,qr,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Email or username","onUpdate:modelValue":t[0]||(t[0]=e=>n.credential=e),required:"",class:"input"},null,512),[[s.nr,n.credential]]),n.errors.length?((0,i.wg)(),(0,i.iD)("div",Er,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.values(n.errors[0]),(e=>((0,i.wg)(),(0,i.iD)("li",{key:e,style:{color:"red"}},(0,l.zw)(e[0]),1)))),128))])])):(0,i.kq)("",!0),(0,i._)("button",{class:"button is-success mt-2",onClick:t[1]||(t[1]=(...e)=>c.onSubmit&&c.onSubmit(...e))},"Send the email")])])}var Gr={name:"SendConfirmationEmailAgainView",data(){return{credential:"",errors:[]}},methods:{onSubmit(){console.log("click !"),this.errors=[],S.Z.post("auth/email/confirm_email/resend/",{credential:this.credential}).then((e=>{(0,Ut.toast)({message:"The email has been sent, please check your inbox",type:"is-info",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:5e3}),this.$router.push({name:"home"})})).catch((e=>{this.errors.push(e.response.data)}))}}};const Br=(0,$.Z)(Gr,[["render",zr]]);var Vr=Br;const Or={class:"container is-max-desktop"},jr=(0,i._)("h1",{class:"title"},"Forgotten password",-1),Hr=(0,i._)("p",{class:"label"},"Enter your email or your username",-1),Nr={key:0};function Zr(e,t,a,o,n,c){return(0,i.wg)(),(0,i.iD)("div",Or,[(0,i._)("form",null,[jr,Hr,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Email or username","onUpdate:modelValue":t[0]||(t[0]=e=>n.credential=e),required:"",class:"input"},null,512),[[s.nr,n.credential]]),n.errors.length?((0,i.wg)(),(0,i.iD)("div",Nr,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.values(n.errors[0]),(e=>((0,i.wg)(),(0,i.iD)("li",{key:e,style:{color:"red"}},(0,l.zw)(e[0]),1)))),128))])])):(0,i.kq)("",!0),(0,i._)("button",{class:"button is-success mt-2",onClick:t[1]||(t[1]=(...e)=>c.onSubmit&&c.onSubmit(...e))},"Send me an email to reset my password")])])}var Wr={name:"ForgottenPasswordView",components:{},data(){return{credential:"",errors:[]}},methods:{onSubmit(){this.errors=[],S.Z.post("/auth/password/request_reset/",{credential:this.credential}).then((e=>{console.log(e.data),(0,Ut.toast)({message:"The email has been sent, please check your inbox",type:"is-info",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:5e3}),this.$router.push({name:"home"})})).catch((e=>{this.errors.push(e.response.data),console.log(e.response.data)}))}}};const Fr=(0,$.Z)(Wr,[["render",Zr]]);var Kr=Fr;const Yr={class:"container is-max-desktop"},Rr=(0,i._)("h1",{class:"title"},"Please confirm your identity",-1),Qr=(0,i._)("h2",{class:"subtitle"},"Confirm your account, then change your password if needed",-1),Jr=(0,i._)("p",null,"Use this token: ",-1),Xr=(0,i._)("p",{class:"label mt-2"},"Enter your email or username",-1),ed={key:0};function td(e,t,a,o,n,c){return(0,i.wg)(),(0,i.iD)("div",Yr,[(0,i._)("form",null,[Rr,Qr,Jr,(0,i._)("p",null,(0,l.zw)(n.jwt_token),1),Xr,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Email or username","onUpdate:modelValue":t[0]||(t[0]=e=>n.credential=e),required:"",class:"input"},null,512),[[s.nr,n.credential]]),n.errors.length?((0,i.wg)(),(0,i.iD)("div",ed,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.values(n.errors[0]),(e=>((0,i.wg)(),(0,i.iD)("li",{key:e,style:{color:"red"}},(0,l.zw)(e[0]),1)))),128))])])):(0,i.kq)("",!0),(0,i._)("button",{class:"button is-success mt-2",onClick:t[1]||(t[1]=(...e)=>c.onSubmit&&c.onSubmit(...e))},"login")])])}var ad={name:"LoginFromEmailView",data(){return{jwt_token:"",credential:"",errors:[]}},methods:{onSubmit(){S.Z.post("auth/login_with_jwt/",{credential:this.credential,jwt_token:this.jwt_token}).then((e=>{(0,Ut.toast)({message:"You are now logged in and confirmed!",type:"is-success",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:5e3}),this.$store.commit("setToken",e.data.auth_token),this.$store.state.user=e.data.user,this.$router.push({name:"account"})})).catch((e=>{this.errors.push(e.response.data)}))}},beforeMount(){this.jwt_token=this.$route.params.token}};const sd=(0,$.Z)(ad,[["render",td]]);var id=sd;const ld={class:"container"},od={class:"box mt-4"},nd=(0,i._)("h1",{class:"subtitle"},"Account informations",-1),cd=(0,i._)("hr",null,null,-1),rd={class:"columns"},dd={class:"column"},md={class:"column"},ud={class:"column"},hd=(0,i._)("div",{class:"is-flex is-justify-content-space-around m-4"},[(0,i._)("a",{href:"privacyPolicy.html",target:"_blank"},"Privacy Policy"),(0,i._)("a",{href:"TandC.html",target:"_blank"},"Terms and Conditions")],-1),pd=(0,i._)("h2",{class:"subtitle"}," Subscriptions and Invoices Portal",-1),gd=[pd];function wd(e,t,a,s,o,n){const c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",ld,[(0,i._)("div",od,[nd,cd,(0,i._)("p",null,[(0,i._)("span",null," Username: "+(0,l.zw)(o.user.username),1)]),(0,i._)("p",null,[(0,i._)("span",null," Email: "+(0,l.zw)(o.user.email),1)]),(0,i._)("div",rd,[(0,i._)("div",dd,[(0,i.Wm)(c,{class:"button is-secondary m-2",to:"/change_username"},{default:(0,i.w5)((()=>[(0,i.Uk)("change my username")])),_:1})]),(0,i._)("div",md,[(0,i.Wm)(c,{class:"button is-secondary m-2",to:"/change_email"},{default:(0,i.w5)((()=>[(0,i.Uk)("change my email")])),_:1})]),(0,i._)("div",ud,[(0,i.Wm)(c,{class:"button is-secondary m-2",to:"/change_password"},{default:(0,i.w5)((()=>[(0,i.Uk)("change my password")])),_:1})])])]),hd,o.configuration.active_stripe_portal?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"box button",onClick:t[0]||(t[0]=(...e)=>n.stripePortal&&n.stripePortal(...e))},gd)):(0,i.kq)("",!0)])}var _d={name:"AccountView",data(){return{user:{},configuration:this.$store.state.configuration}},beforeMount(){S.Z.get("auth/users/my_infos/",{headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.user=e.data,this.$store.user=this.user})).catch((e=>{console.log(e)}))},methods:{stripePortal(){(0,S.Z)({method:"get",url:"dss/portal/",headers:{Authorization:"Token "+this.$store.state.token}}).then((e=>{console.log(e.data),window.location.href=e.data.url})).catch((e=>{console.log(e)}))}}};const vd=(0,$.Z)(_d,[["render",wd]]);var yd=vd;const bd={class:"container is-max-desktop"},kd=(0,i._)("h1",{class:"title"},"Change Username",-1),fd=(0,i._)("label",{class:"label"},"Enter your new username",-1),Cd={key:0};function Dd(e,t,a,o,n,c){return(0,i.wg)(),(0,i.iD)("div",bd,[(0,i._)("form",null,[kd,fd,(0,i.wy)((0,i._)("input",{type:"text",class:"input","onUpdate:modelValue":t[0]||(t[0]=e=>n.username=e),placeholder:"Username",required:""},null,512),[[s.nr,n.username]]),n.errors.length?((0,i.wg)(),(0,i.iD)("div",Cd,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.values(n.errors[0]),(e=>((0,i.wg)(),(0,i.iD)("li",{key:e,style:{color:"red"}},(0,l.zw)(e[0]),1)))),128))])])):(0,i.kq)("",!0),(0,i._)("button",{class:"button is-success mt-2",onClick:t[1]||(t[1]=(...e)=>c.onSubmit&&c.onSubmit(...e))},"Confirm")])])}var Md={name:"ChangeUsernameView",data(){return{username:"",errors:[]}},methods:{onSubmit(){this.errors=[],(0,S.Z)({url:"/auth/username/change/",method:"POST",data:{username:this.username},headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{console.log(e.data),(0,Ut.toast)({message:"Username changed",type:"is-success",dismissible:!0,pauseOnHover:!0,position:"bottom-right",duration:5e3}),this.$router.push({name:"account"}),this.$store.state.user.username=this.username})).catch((e=>{this.errors.push(e.response.data),console.log(e.response.data)}))}}};const Id=(0,$.Z)(Md,[["render",Dd]]);var Pd=Id;const Ld={class:"container is-max-desktop"},xd=(0,i._)("h1",{class:"title"},"Change Password",-1),Sd=(0,i._)("label",{class:"label"},"Enter your new password",-1),Td=(0,i._)("label",{class:"label"},"Confirm your new password",-1),$d={key:0};function Ud(e,t,a,o,n,c){return(0,i.wg)(),(0,i.iD)("div",Ld,[(0,i._)("form",null,[xd,Sd,(0,i.wy)((0,i._)("input",{type:"password",class:"input","onUpdate:modelValue":t[0]||(t[0]=e=>n.password=e),required:"",placeholder:"Password"},null,512),[[s.nr,n.password]]),Td,(0,i.wy)((0,i._)("input",{type:"password",class:"input","onUpdate:modelValue":t[1]||(t[1]=e=>n.password2=e),required:"",placeholder:"Password"},null,512),[[s.nr,n.password2]]),n.errors.length?((0,i.wg)(),(0,i.iD)("div",$d,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.values(n.errors[0]),(e=>((0,i.wg)(),(0,i.iD)("li",{key:e,style:{color:"red"}},(0,l.zw)(e[0]),1)))),128))])])):(0,i.kq)("",!0),(0,i._)("button",{class:"button is-success mt-2",onClick:t[2]||(t[2]=(...e)=>c.onSubmit&&c.onSubmit(...e))},"Change password")])])}var Ad={name:"ChangePasswordView",data(){return{password:"",password2:"",errors:[]}},methods:{onSubmit(){this.errors=[],(0,S.Z)({url:"/auth/password/change/",method:"POST",data:{password:this.password,password2:this.password2},headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{console.log(e.data),(0,Ut.toast)({message:"Password changed",type:"is-success",dismissible:!0,pauseOnHover:!0,position:"bottom-right",duration:5e3}),this.$router.push({name:"account"})})).catch((e=>{this.errors.push(e.response.data),console.log(e.response.data)}))}}};const qd=(0,$.Z)(Ad,[["render",Ud]]);var Ed=qd;const zd={class:"container is-max-desktop"},Gd=(0,i._)("h1",{class:"title"},"Change email",-1),Bd=(0,i._)("label",{class:"label"},"Enter your new email",-1),Vd={key:0};function Od(e,t,a,o,n,c){return(0,i.wg)(),(0,i.iD)("div",zd,[(0,i._)("form",null,[Gd,Bd,(0,i.wy)((0,i._)("input",{type:"text",class:"input",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e)},null,512),[[s.nr,n.email]]),n.errors.length?((0,i.wg)(),(0,i.iD)("div",Vd,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.values(n.errors[0]),(e=>((0,i.wg)(),(0,i.iD)("li",{key:e,style:{color:"red"}},(0,l.zw)(e[0]),1)))),128))])])):(0,i.kq)("",!0),(0,i._)("button",{class:"button is-success mt-2",onClick:t[1]||(t[1]=(...e)=>c.onSubmit&&c.onSubmit(...e))},"Confirm")])])}var jd={name:"ChangeEmailView",data(){return{email:"",errors:[]}},methods:{onSubmit(){(0,S.Z)({url:"/auth/email/request_change/",method:"POST",data:{email:this.email},headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{console.log(e.data),(0,Ut.toast)({message:"Confirmation email sent for email change",type:"is-info",dismissible:!0,pauseOnHover:!0,position:"bottom-right",duration:5e3}),this.$router.push({name:"account"})})).catch((e=>{console.log(e.response.data)}))}}};const Hd=(0,$.Z)(jd,[["render",Od]]);var Nd=Hd;const Zd=e=>((0,i.dD)("data-v-63ca643c"),e=e(),(0,i.Cn)(),e),Wd={class:"container is-hidden-mobile"},Fd=Zd((()=>(0,i._)("h1",{class:"title"},"Collections",-1))),Kd={class:"is-pulled-right mr-2"},Yd={key:2},Rd={key:0},Qd={class:"table is-fullwidth"},Jd=Zd((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"Title"),(0,i._)("th",null,"game"),(0,i._)("th",null,"rating"),(0,i._)("th"),(0,i._)("th",null,"last updated"),(0,i._)("th",null,"is shared"),(0,i._)("th",null,"protection")])],-1))),Xd=["onClick"],em={class:"table-name"},tm=["onClick"],am={key:0},sm={key:1},im={class:"is-pulled-right mr-2"},lm={key:3},om={key:0},nm={class:"table is-fullwidth"},cm=Zd((()=>(0,i._)("th",null,"Title",-1))),rm=Zd((()=>(0,i._)("th",null,"game",-1))),dm=Zd((()=>(0,i._)("th",null,"rating",-1))),mm={key:0},um=Zd((()=>(0,i._)("th",null,"author",-1))),hm=Zd((()=>(0,i._)("th",null,"language",-1))),pm=Zd((()=>(0,i._)("th",null,"last updated",-1))),gm=Zd((()=>(0,i._)("th",null,"protection",-1))),wm={class:"table-name"},_m={key:0},vm={key:1},ym={key:2},bm={key:1},km={key:0},fm={key:1,class:"is-pulled-right mr-2"},Cm={key:4},Dm={class:"search-form"},Mm=Zd((()=>(0,i._)("label",{class:"label m-2"},"Only officials",-1))),Im=Zd((()=>(0,i._)("label",{for:"",class:"label m-2 ml-5"},"Language",-1))),Pm=(0,i.uE)('<option value="all" data-v-63ca643c>--All--</option><option value="ar" data-v-63ca643c>Arabic</option><option value="cs" data-v-63ca643c>Czech</option><option value="zh" data-v-63ca643c>Chinese</option><option value="da" data-v-63ca643c>Danish</option><option value="nl" data-v-63ca643c>Dutch</option><option value="en" data-v-63ca643c>English</option><option value="fi" data-v-63ca643c>Finnish</option><option value="fr" data-v-63ca643c>French</option><option value="de" data-v-63ca643c>German</option><option value="el" data-v-63ca643c>Greek</option><option value="hi" data-v-63ca643c>Hindi</option><option value="hu" data-v-63ca643c>Hungarian</option><option value="it" data-v-63ca643c>Italian</option><option value="ja" data-v-63ca643c>Japanese</option><option value="ko" data-v-63ca643c>Korean</option><option value="no" data-v-63ca643c>Norwegian</option><option value="fa" data-v-63ca643c>Persian</option><option value="pl" data-v-63ca643c>Polish</option><option value="pt" data-v-63ca643c>Portuguese</option><option value="ru" data-v-63ca643c>Russian</option><option value="es" data-v-63ca643c>Spanish</option><option value="sv" data-v-63ca643c>Swedish</option><option value="th" data-v-63ca643c>Thai</option><option value="tr" data-v-63ca643c>Turkish</option><option value="vi" data-v-63ca643c>Vietnamese</option>',26),Lm=[Pm],xm={class:"search-form"},Sm=Zd((()=>(0,i._)("span",{class:"label m-1"},"by",-1))),Tm={class:"select m-1 is-small"},$m=Zd((()=>(0,i._)("option",{value:"game"},"Game",-1))),Um=Zd((()=>(0,i._)("option",{value:"title"},"Collection Title",-1))),Am=Zd((()=>(0,i._)("option",{value:"author"},"Author",-1))),qm=[$m,Um,Am],Em={key:0,class:"my-pagination"},zm=["disabled"],Gm=["disabled"],Bm={key:1},Vm={class:"table is-fullwidth"},Om=Zd((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"Title"),(0,i._)("th",null,"game"),(0,i._)("th",null,"rating"),(0,i._)("th",null,"actions"),(0,i._)("th",null,"author"),(0,i._)("th",null,"language"),(0,i._)("th",null,"last updated"),(0,i._)("th",null,"protection")])],-1))),jm={class:"table-name"},Hm={key:0},Nm={key:1};function Zm(e,t,a,o,n,c){const r=(0,i.up)("router-link"),d=(0,i.up)("fa"),m=(0,i.up)("OfficialMark"),u=(0,i.up)("ActionsButton"),h=(0,i.up)("TablesModal");return(0,i.wg)(),(0,i.iD)("div",Wd,[Fd,e.$store.state.user.is_subscriber?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"button is-primary is-small m-2",onClick:t[0]||(t[0]=(...e)=>c.collectionCreate&&c.collectionCreate(...e))}," + New Collection ")):(0,i.kq)("",!0),e.$store.state.user.is_subscriber?((0,i.wg)(),(0,i.j4)(r,{key:1,class:"button is-secondary is-small m-2",to:{name:"exchangesView"}},{default:(0,i.w5)((()=>[(0,i.Uk)(" Open exchanges interface ")])),_:1})):(0,i.kq)("",!0),(0,i._)("div",{onClick:t[1]||(t[1]=e=>n.showMyCollections=!n.showMyCollections),class:"topic"},[(0,i.Uk)("My Collections "),(0,i._)("div",Kd,[n.showMyCollections?((0,i.wg)(),(0,i.j4)(d,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),n.showMyCollections?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(d,{key:1,icon:"angle-right"}))])]),n.showMyCollections?((0,i.wg)(),(0,i.iD)("div",Yd,[n.myCollections.length?((0,i.wg)(),(0,i.iD)("div",Rd,[(0,i._)("table",Qd,[Jd,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.myCollections,(e=>((0,i.wg)(),(0,i.iD)("tr",{class:"hoverable",key:e.id,onClick:t=>c.viewCollectionDetail(e.id)},[(0,i._)("td",em,(0,l.zw)(c.charLimit(e.title)),1),(0,i._)("td",null,(0,l.zw)(c.charLimit(e.game)),1),(0,i._)("td",null,[e.votes_count>1?((0,i.wg)(),(0,i.j4)(d,{key:0,icon:"star",class:"star"})):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,l.zw)(e.rating)+"("+(0,l.zw)(e.votes_count)+") ",1)]),(0,i._)("td",null,[c.is_subscriber?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"button is-small is-secondary",onMouseover:t[2]||(t[2]=e=>n.allowViewCollectionDetail=!1),onMouseout:t[3]||(t[3]=e=>n.allowViewCollectionDetail=!0),onClick:t=>c.newCampainFromMyCollection(e)}," Use for a new campaign ",40,tm)):(0,i.kq)("",!0)]),(0,i._)("td",null,(0,l.zw)(c.formatDate(e.date_updated)),1),(0,i._)("td",null,[e.is_shared?((0,i.wg)(),(0,i.j4)(d,{key:0,icon:"check",style:{color:"green"}})):(0,i.kq)("",!0)]),e.is_copy_free?((0,i.wg)(),(0,i.iD)("td",sm,[(0,i.Wm)(d,{icon:"unlock",style:{color:"green"}})])):((0,i.wg)(),(0,i.iD)("td",am,[(0,i.Wm)(d,{icon:"lock",style:{color:"red"}})]))],8,Xd)))),128))])])])):(0,i.kq)("",!0)])):(0,i.kq)("",!0),(0,i._)("div",{onClick:t[4]||(t[4]=e=>n.showFavorites=!n.showFavorites),class:"topic"},[(0,i.Uk)("My Favorite Collections "),(0,i._)("div",im,[n.showFavorites?((0,i.wg)(),(0,i.j4)(d,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),n.showFavorites?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(d,{key:1,icon:"angle-right"}))])]),n.showFavorites?((0,i.wg)(),(0,i.iD)("div",lm,[n.favorites.length?((0,i.wg)(),(0,i.iD)("div",om,[(0,i._)("table",nm,[(0,i._)("thead",null,[(0,i._)("tr",null,[cm,rm,dm,c.is_subscriber?((0,i.wg)(),(0,i.iD)("th",mm,"actions")):(0,i.kq)("",!0),um,hm,pm,gm])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.favorites,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("td",wm,(0,l.zw)(c.charLimit(e.title)),1),(0,i._)("td",null,[e.is_official?((0,i.wg)(),(0,i.j4)(m,{key:0,collection:e},null,8,["collection"])):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,l.zw)(c.charLimit(e.game)),1)]),(0,i._)("td",null,[e.votes_count>1?((0,i.wg)(),(0,i.j4)(d,{key:0,icon:"star",class:"star"})):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,l.zw)(e.rating)+"("+(0,l.zw)(e.votes_count)+") ",1)]),c.is_subscriber?((0,i.wg)(),(0,i.iD)("td",_m,[(0,i.Wm)(u,{collection:e,tables:n.tables,onFavoritesAction:t[5]||(t[5]=e=>c.favoritesAction(e)),onNewCampainFromMyCollection:t[6]||(t[6]=e=>c.newCampainFromMyCollection(e))},null,8,["collection","tables"])])):(0,i.kq)("",!0),(0,i._)("td",null,(0,l.zw)(c.charLimit(e.author)),1),(0,i._)("td",null,(0,l.zw)(e.language),1),(0,i._)("td",null,(0,l.zw)(c.formatDate(e.date_updated)),1),e.is_copy_free?((0,i.wg)(),(0,i.iD)("td",ym,[(0,i.Wm)(d,{icon:"unlock",style:{color:"green"}})])):((0,i.wg)(),(0,i.iD)("td",vm,[(0,i.Wm)(d,{icon:"lock",style:{color:"red"}})]))])))),128))])])])):((0,i.wg)(),(0,i.iD)("div",bm," you don't have favorites yet. "))])):(0,i.kq)("",!0),(0,i._)("div",{onClick:t[7]||(t[7]=e=>n.showSharedCollections=!n.showSharedCollections),class:"topic"},[(0,i.Uk)(" Browse Shared Collections "),e.$store.state.user.is_subscriber?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",km," (Subscribers only)")),e.$store.state.user.is_subscriber?((0,i.wg)(),(0,i.iD)("div",fm,[n.showSharedCollections?((0,i.wg)(),(0,i.j4)(d,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),n.showSharedCollections?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(d,{key:1,icon:"angle-right"}))])):(0,i.kq)("",!0)]),n.showSharedCollections&e.$store.state.user.is_subscriber?((0,i.wg)(),(0,i.iD)("div",Cm,[(0,i._)("div",Dm,[Mm,(0,i.wy)((0,i._)("input",{type:"checkbox",class:"checkbox","onUpdate:modelValue":t[8]||(t[8]=e=>n.only_officials=e)},null,512),[[s.e8,n.only_officials]]),Im,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>n.language=e),class:"m-2 is-small"},Lm,512),[[s.bM,n.language]])]),(0,i._)("div",xm,[Sm,(0,i._)("div",Tm,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>n.searchBy=e)},qm,512),[[s.bM,n.searchBy]])]),(0,i.wy)((0,i._)("input",{class:"input m-1 is-small",type:"text",placeholder:"Your search...","onUpdate:modelValue":t[11]||(t[11]=e=>n.searchText=e)},null,512),[[s.nr,n.searchText]]),(0,i._)("button",{class:"button is-primary m-1 is-small",onClick:t[12]||(t[12]=(...e)=>c.searchSharedCollections&&c.searchSharedCollections(...e))},"Go")]),(0,i._)("span",null,"Collections found: "+(0,l.zw)(n.sharedCount),1),n.sharedPages>1?((0,i.wg)(),(0,i.iD)("div",Em,[(0,i._)("button",{onClick:t[13]||(t[13]=e=>c.getSharedPage("previous")),disabled:1==n.sharedPage,class:"mr-5 button is-small is-rounded"},"<< ",8,zm),(0,i._)("div",null,"Page "+(0,l.zw)(n.sharedPage)+"/"+(0,l.zw)(n.sharedPages),1),(0,i._)("button",{onClick:t[14]||(t[14]=e=>c.getSharedPage("next")),disabled:n.sharedPages==n.sharedPage,class:"ml-5 button is-small is-rounded"},">> ",8,Gm)])):(0,i.kq)("",!0),n.sharedCollections.length?((0,i.wg)(),(0,i.iD)("div",Bm,[(0,i._)("table",Vm,[Om,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.sharedCollections,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("td",jm,(0,l.zw)(c.charLimit(e.title)),1),(0,i._)("td",null,[e.is_official?((0,i.wg)(),(0,i.j4)(m,{key:0,collection:e},null,8,["collection"])):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,l.zw)(c.charLimit(e.game)),1)]),(0,i._)("td",null,[e.votes_count>1?((0,i.wg)(),(0,i.j4)(d,{key:0,icon:"star",class:"star"})):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,l.zw)(e.rating)+"("+(0,l.zw)(e.votes_count)+") ",1)]),(0,i._)("td",null,[(0,i.Wm)(u,{collection:e,tables:n.tables,onFavoritesAction:t[15]||(t[15]=e=>c.favoritesAction(e))},null,8,["collection","tables"])]),(0,i._)("td",null,(0,l.zw)(c.charLimit(e.author)),1),(0,i._)("td",null,(0,l.zw)(e.language),1),(0,i._)("td",null,(0,l.zw)(c.formatDate(e.date_updated)),1),e.is_copy_free?((0,i.wg)(),(0,i.iD)("td",Nm,[(0,i.Wm)(d,{icon:"unlock",style:{color:"green"}})])):((0,i.wg)(),(0,i.iD)("td",Hm,[(0,i.Wm)(d,{icon:"lock",style:{color:"red"}})]))])))),128))])])])):(0,i.kq)("",!0)])):(0,i.kq)("",!0),(0,i.Wm)(h,{show:n.showTablesModal,tables:n.tables,collection:n.collectionForModal,onCloseTablesModal:t[16]||(t[16]=e=>n.showTablesModal=!1)},null,8,["show","tables","collection"])])}a(541);const Wm={class:"dropdown is-hoverable"},Fm={class:"dropdown-trigger"},Km={class:"button is-small","aria-haspopup":"true","aria-controls":"dropdown-menu3"},Ym=(0,i._)("span",null,"actions",-1),Rm={class:"icon is-small"},Qm=(0,i._)("i",{class:"fas fa-angle-down","aria-hidden":"true"},null,-1),Jm={class:"dropdown-menu",id:"dropdown-menu3",role:"menu"},Xm={class:"dropdown-content"};function eu(e,t,a,s,l,o){const n=(0,i.up)("fa");return(0,i.wg)(),(0,i.iD)("div",Wm,[(0,i._)("div",Fm,[(0,i._)("button",Km,[Ym,(0,i._)("span",Rm,[Qm,(0,i.Wm)(n,{icon:"angle-down"})])])]),(0,i._)("div",Jm,[(0,i._)("div",Xm,[(0,i._)("a",{class:"dropdown-item",onClick:t[0]||(t[0]=t=>e.$emit("newCampainFromMyCollection",a.collection))}," Use for a new campaign "),(0,i._)("a",{class:"dropdown-item",onClick:t[1]||(t[1]=t=>e.$emit("favoritesAction",a.collection))},[(0,i._)("span",null,[(0,i.Wm)(n,{icon:"heart",style:{color:"red"}}),(0,i.Uk)(" add/remove favorite ")])])])])])}var tu={name:"ActionsButton",components:{},props:["collection","tables"],data(){return{showTablesModal:!1}}};const au=(0,$.Z)(tu,[["render",eu]]);var su=au;const iu=e=>((0,i.dD)("data-v-55114893"),e=e(),(0,i.Cn)(),e),lu={class:"modal-content"},ou=iu((()=>(0,i._)("h1",{class:"subtitle"}," Choose a table to create the new campaign ",-1))),nu={class:"buttons"},cu=["onClick"];function ru(e,t,a,s,o,n){return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)(["modal",{"is-active":a.show}])},[(0,i._)("div",{class:"modal-background",onClick:t[0]||(t[0]=e=>a.show=!a.show)}),(0,i._)("div",lu,[ou,(0,i._)("div",nu,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.tables,(e=>((0,i.wg)(),(0,i.iD)("button",{key:e.id,class:"button is-small",onClick:t=>n.createCampainFromCollection(e)},(0,l.zw)(n.charLimit(e.name)),9,cu)))),128))])]),(0,i._)("button",{class:"modal-close is-large","aria-label":"close",onClick:t[1]||(t[1]=e=>a.show=!a.show)})],2)}var du={name:"TablesModal",props:["tables","collection","show"],methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},createCampainFromCollection(e){(0,S.Z)({method:"post",url:"/campains/create_campain_from_collection/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{collection_id:this.collection.id,table_id:e.id}}).then((t=>{(0,Ut.toast)({message:`Campain created successfully for table ${e.name}`,position:"bottom-right",type:"is-success",dismissible:!0,pauseOnHover:!0,duration:5e3}),this.$emit("closeTablesModal")})).catch((e=>{console.log(e)}))}}};const mu=(0,$.Z)(du,[["render",ru],["__scopeId","data-v-55114893"]]);var uu=mu,hu={name:"CollectionsView",components:{OfficialMark:jo,ActionsButton:su,TablesModal:uu},data(){return{showTablesModal:!1,collectionForModal:null,allowViewCollectionDetail:!0,tables:[],searchBy:"game",searchText:"",language:"en",only_officials:!1,showMyCollections:!0,showFavorites:!1,showSharedCollections:!1,myCollections:[],favorites:[],sharedCollections:[],sharedNext:null,sharedPrevious:null,sharedCount:0,sharedPages:0,sharedPage:0}},beforeMount(){this.getMyCollectionList(),this.getFavoritesList()},computed:{is_subscriber(){return this.$store.state.user.is_subscriber}},methods:{charLimit(e){return e?e.length<=25?e:e.slice(0,22)+"...":""},newCampainFromMyCollection(e){this.tables.length<1?(0,Ut.toast)({message:"You must have the role Owner or Game Master in at least 1 table",type:"is-warning",position:"center",dismissible:!0,pauseOnHover:!0,duration:5e3}):(this.collectionForModal=e,this.showTablesModal=!0)},getFavoritesList(){(0,S.Z)({method:"get",url:"campains/collection/favorite_collection/",headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{console.log("Response: ",e.data),this.favorites=e.data,console.log("favorites: ",this.favorites)})).catch((e=>{console.log(e)}))},favoritesAction(e){this.favorites.filter((t=>t.id==e.id)).length?this.removeFromFavorites(e):this.addToFavorites(e)},removeFromFavorites(e){(0,S.Z)({method:"delete",url:"campains/collection/favorite_collection/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{collection_id:e.id}}).then((t=>{console.log("Response: ",t.data),this.favorites=this.favorites.filter((t=>t.id!=e.id))})).catch((e=>{console.log(e)}))},addToFavorites(e){(0,S.Z)({method:"post",url:"campains/collection/favorite_collection/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{collection_id:e.id}}).then((t=>{console.log("Response: ",t.data),this.favorites=this.favorites.filter((t=>t.id!=e.id)),this.favorites.unshift(e)})).catch((e=>{console.log(e)}))},getSharedPage(e){let t="";"next"===e?t=this.sharedNext:"previous"===e&&(t=this.sharedPrevious),(0,S.Z)({method:"get",url:t,headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.sharedCollections=e.data.results,this.sharedNext=e.data.pagination.next,this.sharedPrevious=e.data.pagination.previous,this.sharedCount=e.data.pagination.total,this.sharedPages=e.data.pagination.pages,this.sharedPage=e.data.pagination.page,console.log("Response: ",e.data)})).catch((e=>{console.log(e)}))},searchSharedCollections(){this.sharedCollections=[],(0,S.Z)({method:"get",url:"campains/shared_collections/",headers:{Authorization:`Token ${this.$store.state.token}`},params:{search_by:this.searchBy,search_text:this.searchText,language:this.language,only_officials:this.only_officials}}).then((e=>{this.sharedCollections=e.data.results,this.sharedNext=e.data.pagination.next,this.sharedPrevious=e.data.pagination.previous,this.sharedCount=e.data.pagination.total,this.sharedPages=e.data.pagination.pages,this.sharedPage=e.data.pagination.page,console.log("Response: ",e.data)})).catch((e=>{console.log(e)}))},viewCollectionDetail(e){this.allowViewCollectionDetail&&this.$router.push({name:"collectionDetailView",params:{id:e}})},formatDate(e){const t=new Date(e);return new Intl.DateTimeFormat("default",{dateStyle:"long"}).format(t)},getMyCollectionList(){(0,S.Z)({method:"get",url:"campains/collections_crud/",headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.myCollections=e.data.collections,this.tables=e.data.tables,console.log("initial datas get: ",e.data)})).catch((e=>{console.log(e)}))},collectionCreate(){(0,S.Z)({method:"post",url:"campains/collections_crud/",headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{console.log(e.data),this.myCollections.unshift(e.data)})).catch((e=>{console.log(e)}))}}};const pu=(0,$.Z)(hu,[["render",Zm],["__scopeId","data-v-63ca643c"]]);var gu=pu;const wu=e=>((0,i.dD)("data-v-508a7c68"),e=e(),(0,i.Cn)(),e),_u={class:"columns"},vu={class:"column left-column"},yu={class:"subtitle"},bu={class:"center-elems unscrollable"},ku={key:1},fu={key:0},Cu={key:1},Du={key:2},Mu=wu((()=>(0,i._)("span",{style:{color:"red"},class:"m-2"},"Are you really sure ?",-1))),Iu={href:"MDGuide.html",class:"info-icon tooltip ml-4",target:"_blank"},Pu=wu((()=>(0,i._)("span",{class:"tooltiptext"},"Edition tips",-1))),Lu=wu((()=>(0,i._)("div",null,null,-1))),xu={class:"scrollable"},Su={class:"is-pulled-right mr-2"},Tu={key:0},$u={class:"field is-horizontal mt-2"},Uu=wu((()=>(0,i._)("div",{class:"field-label"},[(0,i._)("label",{class:"label is-small"},"Name")],-1))),Au={class:"field-body"},qu={class:"field"},Eu={class:"control"},zu={class:"field is-horizontal"},Gu=wu((()=>(0,i._)("div",{class:"field-label"},[(0,i._)("label",{class:"label is-small"},"Game")],-1))),Bu={class:"field-body"},Vu={class:"field"},Ou={class:"control"},ju={class:"field is-horizontal"},Hu=wu((()=>(0,i._)("div",{class:"field-label"},[(0,i._)("label",{class:"label is-small"},"language")],-1))),Nu={class:"field-body"},Zu={class:"field"},Wu={class:"control"},Fu=(0,i.uE)('<option value="ar" data-v-508a7c68>Arabic</option><option value="cs" data-v-508a7c68>Czech</option><option value="zh" data-v-508a7c68>Chinese</option><option value="da" data-v-508a7c68>Danish</option><option value="nl" data-v-508a7c68>Dutch</option><option value="en" data-v-508a7c68>English</option><option value="fi" data-v-508a7c68>Finnish</option><option value="fr" data-v-508a7c68>French</option><option value="de" data-v-508a7c68>German</option><option value="el" data-v-508a7c68>Greek</option><option value="hi" data-v-508a7c68>Hindi</option><option value="hu" data-v-508a7c68>Hungarian</option><option value="it" data-v-508a7c68>Italian</option><option value="ja" data-v-508a7c68>Japanese</option><option value="ko" data-v-508a7c68>Korean</option><option value="no" data-v-508a7c68>Norwegian</option><option value="fa" data-v-508a7c68>Persian</option><option value="pl" data-v-508a7c68>Polish</option><option value="pt" data-v-508a7c68>Portuguese</option><option value="ru" data-v-508a7c68>Russian</option><option value="es" data-v-508a7c68>Spanish</option><option value="sv" data-v-508a7c68>Swedish</option><option value="th" data-v-508a7c68>Thai</option><option value="tr" data-v-508a7c68>Turkish</option><option value="vi" data-v-508a7c68>Vietnamese</option>',25),Ku=[Fu],Yu={class:"field is-horizontal"},Ru=wu((()=>(0,i._)("div",{class:"field-label"},[(0,i._)("label",{class:"label is-small"},"Image url")],-1))),Qu={class:"field-body"},Ju={class:"field"},Xu={class:"control"},eh={class:"field is-horizontal"},th=wu((()=>(0,i._)("div",{class:"field-label"},[(0,i._)("label",{class:"label is-small"},"Description")],-1))),ah={class:"field-body"},sh={class:"field"},ih={class:"control"},lh={class:"m-4"},oh={class:"label"},nh=wu((()=>(0,i._)("label",{class:"label"}," Is totally free (no copyright, users may use your creations in their own shared collections) ? ",-1))),ch=["disabled"],rh={class:"center-elems"},dh=["src"],mh={class:"is-pulled-right mr-2"},uh={key:1},hh={key:1,class:"table is-fullwidth is-narrow"},ph=wu((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"Name"),(0,i._)("th",null,"Type")])],-1))),gh=["onClick"],wh={class:"is-pulled-right mr-2"},_h={key:2},vh={key:1,class:"table is-fullwidth is-narrow"},yh=wu((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"Name")])],-1))),bh=["onClick"],kh={class:"column is-6"},fh={class:"unscrollable"},Ch={key:0},Dh={key:1},Mh={class:"subtitle edit-title"},Ih={class:"scrollable"};function Ph(e,t,a,o,n,c){const r=(0,i.up)("fa"),d=(0,i.up)("ItemForm"),m=(0,i.up)("PcForm");return(0,i.wg)(),(0,i.iD)("div",{class:"is-hidden-mobile",onKeydown:t[22]||(t[22]=(0,s.D2)((0,s.iM)(((...e)=>c.saveCollection&&c.saveCollection(...e)),["ctrl","prevent","stop"]),["s"]))},[(0,i._)("div",_u,[(0,i._)("div",vu,[(0,i._)("h1",yu,(0,l.zw)(c.charLimit(n.collection.title)),1),(0,i._)("div",bu,[c.anyModif?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"button is_secondary is-small",onClick:t[0]||(t[0]=(...e)=>c.cancel&&c.cancel(...e))},"Cancel")):(0,i.kq)("",!0),e.$store.state.user?((0,i.wg)(),(0,i.iD)("div",ku,[e.$store.state.user.is_subscriber?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"button is-success is-small ml-2",onClick:t[1]||(t[1]=(...e)=>c.saveCollection&&c.saveCollection(...e)),id:"save-button"}," Save Collection ")):(0,i.kq)("",!0)])):(0,i.kq)("",!0),(0,i._)("button",{class:"button is-warning is-small ml-2",onClick:t[2]||(t[2]=e=>n.allowDeletion=!n.allowDeletion)},[n.allowDeletion?((0,i.wg)(),(0,i.iD)("span",Cu," NO ! Cancel ! ")):((0,i.wg)(),(0,i.iD)("span",fu," Delete Collection "))]),n.allowDeletion?((0,i.wg)(),(0,i.iD)("div",Du,[Mu,(0,i._)("button",{class:"button is-danger is-small ml-2",onClick:t[3]||(t[3]=(...e)=>c.deleteCollection&&c.deleteCollection(...e))}," YES ! Confirm deletion ")])):(0,i.kq)("",!0),(0,i._)("a",Iu,[(0,i.Wm)(r,{icon:"circle-info"}),Pu])]),Lu,(0,i._)("div",xu,[(0,i._)("div",{onClick:t[4]||(t[4]=e=>n.showEdit=!n.showEdit),class:"topic"},[(0,i.Uk)("Edit "),(0,i._)("div",Su,[n.showEdit?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),n.showEdit?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(r,{key:1,icon:"angle-right"}))])]),n.showEdit?((0,i.wg)(),(0,i.iD)("div",Tu,[(0,i._)("div",$u,[Uu,(0,i._)("div",Au,[(0,i._)("div",qu,[(0,i._)("div",Eu,[(0,i.wy)((0,i._)("input",{class:"input is-small",type:"text",placeholder:"Collection name","onUpdate:modelValue":t[5]||(t[5]=e=>n.collection.title=e)},null,512),[[s.nr,n.collection.title]])])])])]),(0,i._)("div",zu,[Gu,(0,i._)("div",Bu,[(0,i._)("div",Vu,[(0,i._)("div",Ou,[(0,i.wy)((0,i._)("input",{class:"input is-small",type:"text",placeholder:"Game","onUpdate:modelValue":t[6]||(t[6]=e=>n.collection.game=e)},null,512),[[s.nr,n.collection.game]])])])])]),(0,i._)("div",ju,[Hu,(0,i._)("div",Nu,[(0,i._)("div",Zu,[(0,i._)("div",Wu,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>n.collection.language=e),class:"is-small"},Ku,512),[[s.bM,n.collection.language]])])])])]),(0,i._)("div",Yu,[Ru,(0,i._)("div",Qu,[(0,i._)("div",Ju,[(0,i._)("div",Xu,[(0,i.wy)((0,i._)("input",{class:"input is-small",type:"text",placeholder:"Image url","onUpdate:modelValue":t[8]||(t[8]=e=>n.collection.image_url=e)},null,512),[[s.nr,n.collection.image_url]])])])])]),(0,i._)("div",eh,[th,(0,i._)("div",ah,[(0,i._)("div",sh,[(0,i._)("div",ih,[(0,i.wy)((0,i._)("textarea",{class:"textarea is-small",placeholder:"Description","onUpdate:modelValue":t[9]||(t[9]=e=>n.collection.description=e)},"\n                  ",512),[[s.nr,n.collection.description]])])])])]),(0,i._)("p",lh,[(0,i._)("label",oh,[(0,i.Uk)("Share with the community: "),(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=e=>n.collection.is_shared=e)},null,512),[[s.e8,n.collection.is_shared]])]),nh,(0,i._)("button",{onClick:t[11]||(t[11]=e=>n.IUnderstand=!0),class:"button is-small is-warning mr-4"}," I understand "),(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=e=>n.collection.is_copy_free=e),onClick:t[13]||(t[13]=e=>n.IUnderstand=!1),disabled:c.copyFreeCheckbox},null,8,ch),[[s.e8,n.collection.is_copy_free]])]),(0,i._)("div",rh,[""!==n.collection.image_url?((0,i.wg)(),(0,i.iD)("img",{key:0,src:n.collection.image_url,alt:"[image not found]"},null,8,dh)):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),(0,i._)("div",{onClick:t[14]||(t[14]=e=>n.showItems=!n.showItems),class:"topic"},[(0,i.Uk)("Items "),(0,i._)("div",mh,[n.showItems?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),n.showItems?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(r,{key:1,icon:"angle-right"}))])]),n.showItems?((0,i.wg)(),(0,i.iD)("div",uh,[c.is_subscriber?((0,i.wg)(),(0,i.iD)("p",{key:0,class:"hoverable",onClick:t[15]||(t[15]=(...e)=>c.createItem&&c.createItem(...e))},"+ New Item")):(0,i.kq)("",!0),n.itemList.length?((0,i.wg)(),(0,i.iD)("table",hh,[ph,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.itemList,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id,class:(0,l.C_)(["hoverable is-small",{"item-creation":e.id.startsWith("temp_id_")}]),onClick:t=>c.editItem(e)},[(0,i._)("td",null,(0,l.zw)(e.name),1),(0,i._)("td",{class:(0,l.C_)(e.type)},(0,l.zw)(e.type),3)],10,gh)))),128))])])):(0,i.kq)("",!0)])):(0,i.kq)("",!0),(0,i._)("div",{onClick:t[16]||(t[16]=e=>n.showPCs=!n.showPCs),class:"topic"},[(0,i.Uk)("PCs "),(0,i._)("div",wh,[n.showPCs?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),n.showPCs?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(r,{key:1,icon:"angle-right"}))])]),n.showPCs?((0,i.wg)(),(0,i.iD)("div",_h,[c.is_subscriber?((0,i.wg)(),(0,i.iD)("p",{key:0,class:"hoverable",onClick:t[17]||(t[17]=(...e)=>c.createPc&&c.createPc(...e))},"+ New PC")):(0,i.kq)("",!0),n.pcList.length?((0,i.wg)(),(0,i.iD)("table",vh,[yh,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.pcList,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id,class:(0,l.C_)(["hoverable is-small",{"item-creation":e.id.startsWith("temp_id_")}]),onClick:t=>c.editPc(e)},[(0,i._)("td",null,(0,l.zw)(e.name),1)],10,bh)))),128))])])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)])]),(0,i._)("div",kh,[(0,i._)("div",fh,[n.showItemForm?((0,i.wg)(),(0,i.iD)("div",Ch,[(0,i._)("h1",{class:(0,l.C_)(["subtitle",n.itemToEdit.type])},(0,l.zw)(c.charLimit(n.itemToEdit.name)),3)])):(0,i.kq)("",!0),n.showPcForm?((0,i.wg)(),(0,i.iD)("div",Dh,[(0,i._)("h1",Mh,(0,l.zw)(c.charLimit(n.pcToEdit.name)),1)])):(0,i.kq)("",!0)]),(0,i._)("div",Ih,[n.showItemForm?((0,i.wg)(),(0,i.j4)(d,{key:0,showItemForm:n.showItemForm,item:n.itemToEdit,onUpdateItem:t[18]||(t[18]=e=>c.updateItem(e)),onDeleteItem:t[19]||(t[19]=e=>c.deleteItem(e))},null,8,["showItemForm","item"])):(0,i.kq)("",!0),n.showPcForm?((0,i.wg)(),(0,i.j4)(m,{key:1,showPcForm:n.showPcForm,pc:n.pcToEdit,onUpdatePc:t[20]||(t[20]=e=>c.updatePc(e)),onDeletePc:t[21]||(t[21]=e=>c.deletePc(e))},null,8,["showPcForm","pc"])):(0,i.kq)("",!0)])])])],32)}const Lh=e=>((0,i.dD)("data-v-7b5d391f"),e=e(),(0,i.Cn)(),e),xh={class:"control"},Sh={key:0,class:"item-creation"},Th=Lh((()=>(0,i._)("label",{class:"label"},"Name",-1))),$h=Lh((()=>(0,i._)("label",{class:"label"},"Image url",-1))),Uh={class:"center-elems"},Ah=["src"],qh={key:1,src:"https://bulma.io/images/placeholders/128x128.png",alt:"not found",class:"image-preview"},Eh=Lh((()=>(0,i._)("label",{class:"label"},"Type",-1))),zh={class:"is-flex is-justify-content-space-between m-2"},Gh=Lh((()=>(0,i._)("label",{class:"label"},"PC's infos",-1))),Bh=["hidden"],Vh=["hidden"],Oh=["innerHTML"],jh={class:"is-flex is-justify-content-space-between m-2"},Hh=Lh((()=>(0,i._)("label",{class:"label"},"GM's infos",-1))),Nh=["hidden"],Zh=["hidden"],Wh=["innerHTML"],Fh={class:"mt-2"};function Kh(e,t,a,o,n,c){return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)({"is-active":a.showItemForm})},[(0,i._)("form",null,[(0,i._)("div",xh,[a.item.id.startsWith("temp_id_")?((0,i.wg)(),(0,i.iD)("div",Sh,"* Item Creation")):(0,i.kq)("",!0),Th,(0,i.wy)((0,i._)("input",{class:"input",type:"text",placeholder:"Name","onUpdate:modelValue":t[0]||(t[0]=e=>a.item.name=e),onKeyup:t[1]||(t[1]=(...e)=>c.updateItem&&c.updateItem(...e))},null,544),[[s.nr,a.item.name]]),$h,(0,i._)("div",Uh,[(0,i.wy)((0,i._)("input",{class:"input mr-2",type:"text",placeholder:"image url","onUpdate:modelValue":t[2]||(t[2]=e=>a.item.image_url=e),onKeyup:t[3]||(t[3]=(...e)=>c.updateItem&&c.updateItem(...e))},null,544),[[s.nr,a.item.image_url]]),a.item.image_url?((0,i.wg)(),(0,i.iD)("img",{key:0,src:a.item.image_url,alt:"not found",class:"image-preview"},null,8,Ah)):((0,i.wg)(),(0,i.iD)("img",qh))]),Eh,(0,i._)("div",{class:"select",onChange:t[5]||(t[5]=(...e)=>c.updateItem&&c.updateItem(...e))},[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>a.item.type=e)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.itemTypes,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e},(0,l.zw)(e),1)))),128))],512),[[s.bM,a.item.type]])],32),(0,i._)("div",zh,[Gh,(0,i._)("button",{class:"is-small",onClick:t[6]||(t[6]=e=>n.showpcsPreview=!n.showpcsPreview)},"preview")]),(0,i._)("div",{hidden:n.showpcsPreview},[(0,i.wy)((0,i._)("textarea",{onKeyup:t[7]||(t[7]=(...t)=>e.updatePc&&e.updatePc(...t)),class:"textarea",placeholder:"Informations for the players","onUpdate:modelValue":t[8]||(t[8]=e=>a.item.data_pc=e)},"\n              ",544),[[s.nr,a.item.data_pc]])],8,Bh),(0,i._)("div",{onClick:t[9]||(t[9]=e=>n.showpcsPreview=!1),hidden:!n.showpcsPreview,class:"content border p-1 hoverable"},[(0,i._)("div",{innerHTML:c.pcPreview},null,8,Oh)],8,Vh),(0,i._)("div",jh,[Hh,(0,i._)("button",{class:"is-small",onClick:t[10]||(t[10]=e=>n.showgmPreview=!n.showgmPreview)},"preview")]),(0,i._)("div",{hidden:n.showgmPreview},[(0,i.wy)((0,i._)("textarea",{onKeyup:t[11]||(t[11]=(...t)=>e.updatePc&&e.updatePc(...t)),class:"textarea",placeholder:"Informations for the GM only","onUpdate:modelValue":t[12]||(t[12]=e=>a.item.data_gm=e)},"\n              ",544),[[s.nr,a.item.data_gm]])],8,Nh),(0,i._)("div",{onClick:t[13]||(t[13]=e=>n.showgmPreview=!1),hidden:!n.showgmPreview,class:"content border p-1 hoverable"},[(0,i._)("div",{innerHTML:c.gmPreview},null,8,Wh)],8,Zh)])]),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.errors,(e=>((0,i.wg)(),(0,i.iD)("p",{key:e,style:{color:"red"}},(0,l.zw)(e),1)))),128))]),(0,i._)("div",Fh,[(0,i._)("button",{class:"button is-danger is-small",onClick:t[14]||(t[14]=t=>e.$emit("deleteItem",a.item.id))},"Delete")])],2)}var Yh={name:"ItemForm",props:["showItemForm","item"],data(){return{itemTypes:["NPC","LOCATION","ORGANIZATION","EVENT","NOTE","RECAP","MISC","MEMO"],showpcsPreview:!1,showgmPreview:!1,errors:[],itemName:this.item.name,itemType:this.item.type,itemImageUrl:this.item.imageUrl,itemPCsInfos:this.item.pcsInfos,itemGmInfos:this.item.gmInfos}},computed:{pcPCsInfos(){return this.item.data_pc},pcPreview(){let e="";return null!==this.pcPCsInfos&&void 0!==this.pcPCsInfos&&(e=marked.parse(this.pcPCsInfos)),e},pcGmInfos(){return this.item.data_gm},gmPreview(){let e="";return null!==this.pcGmInfos&&void 0!==this.pcGmInfos&&(e=marked.parse(this.pcGmInfos)),e}},methods:{updateItem(){this.$emit("updateItem",this.item)},deleteItem(e){this.$emit("deleteItem",e.id)}}};const Rh=(0,$.Z)(Yh,[["render",Kh],["__scopeId","data-v-7b5d391f"]]);var Qh=Rh;const Jh=e=>((0,i.dD)("data-v-fc4655d0"),e=e(),(0,i.Cn)(),e),Xh={class:"control"},ep={key:0,class:"item-creation"},tp=Jh((()=>(0,i._)("label",{class:"label"},"Name",-1))),ap=Jh((()=>(0,i._)("label",{class:"label"},"Image url",-1))),sp={class:"center-elems"},ip=["src"],lp={key:1,src:"https://bulma.io/images/placeholders/128x128.png",alt:"not found",class:"image-preview"},op={class:"is-flex is-justify-content-space-between m-2"},np=Jh((()=>(0,i._)("label",{class:"label"},"PC's infos",-1))),cp=["hidden"],rp=["hidden"],dp=["innerHTML"],mp={class:"is-flex is-justify-content-space-between m-2"},up=Jh((()=>(0,i._)("label",{class:"label"},"Player's infos",-1))),hp=["hidden"],pp=["hidden"],gp=["innerHTML"],wp={class:"is-flex is-justify-content-space-between m-2"},_p=Jh((()=>(0,i._)("label",{class:"label"},"GM's infos",-1))),vp=["hidden"],yp=["hidden"],bp=["innerHTML"],kp={class:"mt-2"};function fp(e,t,a,o,n,c){return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)({"is-active":a.showPcForm})},[(0,i._)("form",null,[(0,i._)("div",Xh,[a.pc.id.startsWith("temp_id_")?((0,i.wg)(),(0,i.iD)("div",ep,"* PC Creation")):(0,i.kq)("",!0),tp,(0,i.wy)((0,i._)("input",{class:"input",type:"text",placeholder:"Name","onUpdate:modelValue":t[0]||(t[0]=e=>a.pc.name=e),onKeyup:t[1]||(t[1]=(...e)=>c.updatePc&&c.updatePc(...e))},null,544),[[s.nr,a.pc.name]]),ap,(0,i._)("div",sp,[(0,i.wy)((0,i._)("input",{class:"input mr-2",type:"text",placeholder:"image url","onUpdate:modelValue":t[2]||(t[2]=e=>a.pc.image_url=e),onKeyup:t[3]||(t[3]=(...e)=>c.updatePc&&c.updatePc(...e))},null,544),[[s.nr,a.pc.image_url]]),a.pc.image_url?((0,i.wg)(),(0,i.iD)("img",{key:0,src:a.pc.image_url,alt:"not found",class:"image-preview"},null,8,ip)):((0,i.wg)(),(0,i.iD)("img",lp))]),(0,i._)("div",op,[np,(0,i._)("button",{class:"is-small",onClick:t[4]||(t[4]=e=>n.showpcsPreview=!n.showpcsPreview)},"preview")]),(0,i._)("div",{hidden:n.showpcsPreview},[(0,i.wy)((0,i._)("textarea",{onKeyup:t[5]||(t[5]=(...e)=>c.updatePc&&c.updatePc(...e)),class:"textarea",placeholder:"Informations for the players","onUpdate:modelValue":t[6]||(t[6]=e=>a.pc.data_pc=e)},"\n              ",544),[[s.nr,a.pc.data_pc]])],8,cp),(0,i._)("div",{onClick:t[7]||(t[7]=e=>n.showpcsPreview=!1),hidden:!n.showpcsPreview,class:"content border p-1 hoverable"},[(0,i._)("div",{innerHTML:c.pcPreview},null,8,dp)],8,rp),(0,i._)("div",mp,[up,(0,i._)("button",{class:"is-small",onClick:t[8]||(t[8]=e=>n.showplayerPreview=!n.showplayerPreview)},"preview")]),(0,i._)("div",{hidden:n.showplayerPreview},[(0,i.wy)((0,i._)("textarea",{onKeyup:t[9]||(t[9]=(...e)=>c.updatePc&&c.updatePc(...e)),class:"textarea",placeholder:"Informations for the player of the character","onUpdate:modelValue":t[10]||(t[10]=e=>a.pc.data_player=e)},"\n              ",544),[[s.nr,a.pc.data_player]])],8,hp),(0,i._)("div",{onClick:t[11]||(t[11]=e=>n.showplayerPreview=!1),hidden:!n.showplayerPreview,class:"content border p-1 hoverable"},[(0,i._)("div",{innerHTML:c.playerPreview},null,8,gp)],8,pp),(0,i._)("div",wp,[_p,(0,i._)("button",{class:"is-small",onClick:t[12]||(t[12]=e=>n.showgmPreview=!n.showgmPreview)},"preview")]),(0,i._)("div",{hidden:n.showgmPreview},[(0,i.wy)((0,i._)("textarea",{onKeyup:t[13]||(t[13]=(...e)=>c.updatePc&&c.updatePc(...e)),class:"textarea",placeholder:"Informations for the GM only","onUpdate:modelValue":t[14]||(t[14]=e=>a.pc.data_gm=e)},"\n              ",544),[[s.nr,a.pc.data_gm]])],8,vp),(0,i._)("div",{onClick:t[15]||(t[15]=e=>n.showgmPreview=!1),hidden:!n.showgmPreview,class:"content border p-1 hoverable"},[(0,i._)("div",{innerHTML:c.gmPreview},null,8,bp)],8,yp)])]),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.errors,(e=>((0,i.wg)(),(0,i.iD)("p",{key:e,style:{color:"red"}},(0,l.zw)(e),1)))),128))]),(0,i._)("div",kp,[(0,i._)("button",{class:"button is-danger is-small",onClick:t[16]||(t[16]=t=>e.$emit("deletePc",a.pc.id))},"Delete")])],2)}var Cp={name:"PcForm",props:["showPcForm","pc"],data(){return{showpcsPreview:!1,showplayerPreview:!1,showgmPreview:!1,errors:[],pcName:this.pc.name,pcImageUrl:this.pc.imageUrl}},computed:{pcPCsInfos(){return this.pc.data_pc},pcPreview(){let e="";return null!==this.pcPCsInfos&&void 0!==this.pcPCsInfos&&(e=marked.parse(this.pcPCsInfos)),e},playerInfos(){return this.pc.data_player},playerPreview(){let e="";return null!==this.playerInfos&&void 0!==this.playerInfos&&(e=marked.parse(this.playerInfos)),e},pcGmInfos(){return this.pc.data_gm},gmPreview(){let e="";return null!==this.pcGmInfos&&void 0!==this.pcGmInfos&&(e=marked.parse(this.pcGmInfos)),e}},methods:{updatePc(){this.$emit("updatePc",this.pc)},deletePc(e){this.$emit("deletePc",e.id)}}};const Dp=(0,$.Z)(Cp,[["render",fp],["__scopeId","data-v-fc4655d0"]]);var Mp=Dp,Ip={name:"CollectionDetailView",components:{ItemForm:Qh,PcForm:Mp},data(){return{IUnderstand:!1,initID:0,showEdit:!0,showItems:!1,showPCs:!1,allowDeletion:!1,collection:{},id:null,showItemForm:!1,showPcForm:!1,itemList:[],pcList:[],itemToEdit:{},itemCreatedList:{},itemUpdatedList:{},itemDeletedList:[],pcToEdit:{},pcCreatedList:{},pcUpdatedList:{},pcDeletedList:[]}},beforeMount(){this.id=this.$route.params.id,this.getCollectionDetail()},computed:{is_subscriber(){return this.$store.state.user.is_subscriber},copyFreeCheckbox(){return!this.IUnderstand&&!this.collection.is_copy_free},anyModif(){return Object.keys(this.itemCreatedList).length>0||Object.keys(this.itemUpdatedList).length>0||this.itemDeletedList.length>0||Object.keys(this.pcCreatedList).length>0||Object.keys(this.pcUpdatedList).length>0}},methods:{charLimit(e){return e?e.length<=25?e:e.slice(0,22)+"...":""},cancel(){this.$router.push({name:"CollectionsView"})},get_temp_id(){return this.initID+=1,"temp_id_"+this.initID.toString()},editPc(e){this.showItemForm=!1,this.showPcForm=!0,this.pcToEdit=e},editItem(e){this.showPcForm=!1,this.showItemForm=!0,this.itemToEdit=e},updatePc(e){e.id.startsWith("temp_id_")?this.pcCreatedList[e.id]=e:this.pcUpdatedList[e.id]=e},updateItem(e){e.id.startsWith("temp_id_")?this.itemCreatedList[e.id]=e:this.itemUpdatedList[e.id]=e},createPc(){let e={id:this.get_temp_id(),name:"New PC"};this.pcList.unshift(e),this.pcCreatedList[e.id]=e},createItem(){let e={id:this.get_temp_id(),name:"New Item",type:"MEMO"};this.itemList.unshift(e),this.itemCreatedList[e.id]=e},deletePc(e){this.pcList=this.pcList.filter((t=>t.id!==e)),e.startsWith("temp_id_")?delete this.pcCreatedList[e]:this.pcDeletedList.push(e),delete this.pcUpdatedList[e],this.showPcForm=!1,this.pcToEdit={}},deleteItem(e){this.itemList=this.itemList.filter((t=>t.id!==e)),e.startsWith("temp_id_")?delete this.itemCreatedList[e]:this.itemDeletedList.push(e),delete this.itemUpdatedList[e],this.showItemForm=!1,this.itemToEdit={}},getCollectionDetail(){(0,S.Z)({method:"get",url:"/campains/collection/",headers:{Authorization:`Token ${this.$store.state.token}`},params:{id:this.id}}).then((e=>{this.collection=e.data.collection_details,this.itemList=e.data.items,this.pcList=e.data.pcs,this.itemCreatedList={},this.itemUpdatedList={},this.itemDeletedList=[],this.pcCreatedList={},this.pcUpdatedList={},this.pcDeletedList=[],"id"in this.itemToEdit&&this.itemToEdit.id.startsWith("temp_id_")&&(this.itemToEdit={},this.showItemForm=!1),"id"in this.pcToEdit&&this.pcToEdit.id.startsWith("temp_id_")&&(this.pcToEdit={},this.showPcForm=!1)})).catch((e=>{console.log(e)}))},deleteCollection(){(0,S.Z)({method:"delete",url:"campains/collections_crud/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{id:this.id}}).then((e=>{this.$router.push({name:"CollectionsView"})})).catch((e=>{console.log(e.message)}))},saveCollection(){(0,S.Z)({method:"put",url:"campains/collections_crud/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{id:this.id,title:this.collection.title,game:this.collection.game,language:this.collection.language,description:this.collection.description,image_url:this.collection.image_url,is_shared:this.collection.is_shared,is_copy_free:this.collection.is_copy_free,items_to_create:this.itemCreatedList,items_to_update:this.itemUpdatedList,items_to_delete:this.itemDeletedList,pcs_to_create:this.pcCreatedList,pcs_to_update:this.pcUpdatedList,pcs_to_delete:this.pcDeletedList}}).then((e=>{(0,Ut.toast)({message:"Collection saved",type:"is-success",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:2e3}),this.getCollectionDetail()})).catch((e=>{(0,Ut.toast)({message:"Saving aborted: something went wrong !",type:"is-danger",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:2e3}),console.log(e.message)}))}}};const Pp=(0,$.Z)(Ip,[["render",Ph],["__scopeId","data-v-508a7c68"]]);var Lp=Pp;const xp=e=>((0,i.dD)("data-v-08659dcb"),e=e(),(0,i.Cn)(),e),Sp={class:"container is-hidden-mobile"},Tp=xp((()=>(0,i._)("h1",{class:"title"},"Exchanges",-1))),$p={class:"columns"},Up={class:"column"},Ap={key:0},qp={class:"radio m-2"},Ep={class:"radio m-2"},zp=xp((()=>(0,i._)("option",{selected:"",hidden:"",value:"null"},"Choose a campaign",-1))),Gp=["value"],Bp={key:0},Vp=xp((()=>(0,i._)("option",{selected:"",hidden:"",value:"null"},"Choose a collection",-1))),Op=xp((()=>(0,i._)("option",{value:"",disabled:""},"--- My collections ---",-1))),jp=["value"],Hp={key:0},Np=xp((()=>(0,i._)("option",{value:"",disabled:""},"--- Favorites ---",-1))),Zp=["value"],Wp={key:0},Fp={key:1},Kp={class:"subtitle"},Yp={key:0},Rp={class:"is-pulled-right"},Qp={key:0},Jp={key:1},Xp={class:"scrollable"},eg={key:0,class:"table is-fullwidth"},tg=xp((()=>(0,i._)("th",null,"Name",-1))),ag=xp((()=>(0,i._)("th",null,"Type",-1))),sg={key:0},ig=["onClick"],lg={key:0},og={key:1,class:"table is-fullwidth"},ng=xp((()=>(0,i._)("th",null,"Name",-1))),cg={key:0},rg=["onClick"],dg={key:0},mg={class:"column"},ug={key:0,class:"label"},hg={class:"control"},pg={class:"radio m-2"},gg={class:"radio m-2"},wg=xp((()=>(0,i._)("option",{selected:"",hidden:"",value:"null"},"Choose a campaign",-1))),_g=["value"],vg={key:0},yg=xp((()=>(0,i._)("option",{selected:"",hidden:"",value:"null"},"Choose a collection",-1))),bg=xp((()=>(0,i._)("option",{value:"",disabled:""},"--- My collections ---",-1))),kg=["value"],fg={key:0},Cg=xp((()=>(0,i._)("option",{value:"",disabled:""},"--- Favorites ---",-1))),Dg=["value"],Mg={key:0},Ig={key:1},Pg={class:"subtitle"},Lg={key:0},xg={key:0},Sg={key:1},Tg={class:"scrollable"},$g={key:0,class:"table is-fullwidth"},Ug={key:0},Ag=xp((()=>(0,i._)("th",null,"Type",-1))),qg=xp((()=>(0,i._)("th",null,"Name",-1))),Eg=["onClick"],zg={key:0},Gg={key:1,class:"table is-fullwidth"},Bg={key:0},Vg=xp((()=>(0,i._)("th",null,"Name",-1))),Og=["onClick"],jg={key:0};function Hg(e,t,a,o,n,c){const r=(0,i.up)("fa");return(0,i.wg)(),(0,i.iD)("div",Sp,[Tp,(0,i._)("div",$p,[(0,i._)("div",Up,[null===n.columnASelected?((0,i.wg)(),(0,i.iD)("div",Ap,[(0,i.Uk)(" Please select: "),(0,i._)("label",qp,[(0,i.wy)((0,i._)("input",{type:"radio",name:"answer","onUpdate:modelValue":t[0]||(t[0]=e=>n.typeA=e),value:"campain"},null,512),[[s.G2,n.typeA]]),(0,i.Uk)(" a Campaign ")]),(0,i._)("label",Ep,[(0,i.wy)((0,i._)("input",{type:"radio",name:"answer","onUpdate:modelValue":t[1]||(t[1]=e=>n.typeA=e),value:"collection"},null,512),[[s.G2,n.typeA]]),(0,i.Uk)(" a Collection ")]),"campain"===n.typeA?(0,i.wy)(((0,i.wg)(),(0,i.iD)("select",{key:0,class:"select is-fullwidth","onUpdate:modelValue":t[2]||(t[2]=e=>n.columnASelected=e),onChange:t[3]||(t[3]=e=>c.getCampainA(n.columnASelected))},[zp,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.campains,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e,key:e.id},[(0,i._)("span",null,[(0,i.Uk)(" ["+(0,l.zw)(c.charLimit(e.table))+"] ["+(0,l.zw)(c.charLimit(e.game))+"] ",1),e.is_copy_free?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",Bp," [copy restricted] ")),(0,i.Uk)(" "+(0,l.zw)(c.charLimit(e.title)),1)])],8,Gp)))),128))],544)),[[s.bM,n.columnASelected]]):(0,i.kq)("",!0),"collection"===n.typeA?(0,i.wy)(((0,i.wg)(),(0,i.iD)("select",{key:1,class:"select is-fullwidth","onUpdate:modelValue":t[4]||(t[4]=e=>n.columnASelected=e),onChange:t[5]||(t[5]=e=>c.getCollectionA(n.columnASelected))},[Vp,Op,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.collections,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e,key:e.id},[(0,i._)("span",null,[(0,i.Uk)(" ["+(0,l.zw)(c.charLimit(e.game))+"] ",1),e.is_copy_free?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",Hp," [copy restricted] ")),(0,i.Uk)(" "+(0,l.zw)(c.charLimit(e.title)),1)])],8,jp)))),128)),Np,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.favorites,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e,key:e.id},[(0,i._)("span",null,[(0,i.Uk)(" ["+(0,l.zw)(c.charLimit(e.game))+"] ",1),e.is_copy_free?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",Wp," [copy restricted] ")),(0,i.Uk)(" "+(0,l.zw)(c.charLimit(e.title)),1)])],8,Zp)))),128))],544)),[[s.bM,n.columnASelected]]):(0,i.kq)("",!0)])):(0,i.kq)("",!0),null!==n.columnASelected?((0,i.wg)(),(0,i.iD)("div",Fp,[(0,i._)("h2",Kp,[(0,i.Uk)((0,l.zw)(c.charLimit(n.columnASelected.title))+" ("+(0,l.zw)(n.typeA),1),"campain"===n.typeA?((0,i.wg)(),(0,i.iD)("span",Yp," for "+(0,l.zw)(n.columnASelected.table),1)):(0,i.kq)("",!0),(0,i.Uk)(") "),(0,i._)("span",Rp,[c.showApplyExchanges?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"button is-small is-success mr-2",onClick:t[6]||(t[6]=(...e)=>c.applyExchanges&&c.applyExchanges(...e))}," Apply exchanges ")):(0,i.kq)("",!0),(0,i._)("button",{class:"button is-small",onClick:t[7]||(t[7]=(...e)=>c.cancel&&c.cancel(...e))},"Cancel")])]),n.aIsLocked?((0,i.wg)(),(0,i.iD)("span",Jp,[(0,i.Wm)(r,{icon:"lock",style:{color:"red"}}),(0,i.Uk)(" Exports restricted (copy protected)")])):((0,i.wg)(),(0,i.iD)("span",Qp,[(0,i.Wm)(r,{icon:"unlock",style:{color:"green"}}),(0,i.Uk)(" Free exports")]))])):(0,i.kq)("",!0),(0,i._)("div",Xp,[null!==n.columnASelected?((0,i.wg)(),(0,i.iD)("table",eg,[(0,i._)("thead",null,[tg,ag,n.aIsLocked?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("th",sg,[(0,i.Uk)("Copy to "),(0,i.Wm)(r,{icon:"arrow-right"})]))]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.campainA.items,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id,class:"hoverable",onClick:t=>c.addToExchanges("from_a","items",e.id)},[(0,i._)("td",null,(0,l.zw)(c.charLimit(e.name)),1),(0,i._)("td",{class:(0,l.C_)(e.type)},(0,l.zw)(e.type),3),n.aIsLocked?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("td",lg,[c.checked("from_a","items",e.id)?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"arrow-right",style:{color:"#8a9df3"},class:"is-pulled-right"})):(0,i.kq)("",!0)]))],8,ig)))),128))])])):(0,i.kq)("",!0),null!==n.columnASelected?((0,i.wg)(),(0,i.iD)("table",og,[(0,i._)("thead",null,[ng,n.aIsLocked?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("th",cg,[(0,i.Uk)("Copy to "),(0,i.Wm)(r,{icon:"arrow-right"})]))]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.campainA.pcs,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id,class:"hoverable",onClick:t=>c.addToExchanges("from_a","pcs",e.id)},[(0,i._)("td",null,(0,l.zw)(c.charLimit(e.name)),1),n.aIsLocked?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("td",dg,[c.checked("from_a","pcs",e.id)?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"arrow-right",style:{color:"#8a9df3"},class:"is-pulled-right"})):(0,i.kq)("",!0)]))],8,rg)))),128))])])):(0,i.kq)("",!0)])]),(0,i._)("div",mg,[null===n.columnBSelected&null!==n.columnASelected?((0,i.wg)(),(0,i.iD)("label",ug,[(0,i.Uk)(" Exchange with: "),(0,i._)("div",hg,[(0,i._)("label",pg,[(0,i.wy)((0,i._)("input",{type:"radio",name:"answer","onUpdate:modelValue":t[8]||(t[8]=e=>n.typeB=e),value:"campain"},null,512),[[s.G2,n.typeB]]),(0,i.Uk)(" a Campaign ")]),(0,i._)("label",gg,[(0,i.wy)((0,i._)("input",{type:"radio",name:"answer","onUpdate:modelValue":t[9]||(t[9]=e=>n.typeB=e),value:"collection"},null,512),[[s.G2,n.typeB]]),(0,i.Uk)(" a Collection ")]),"campain"===n.typeB?(0,i.wy)(((0,i.wg)(),(0,i.iD)("select",{key:0,class:"select is-fullwidth","onUpdate:modelValue":t[10]||(t[10]=e=>n.columnBSelected=e),onChange:t[11]||(t[11]=e=>c.getCampainB(n.columnBSelected))},[wg,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(c.campainsAvailableInB,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e,key:e.id},[(0,i._)("span",null,[(0,i.Uk)(" ["+(0,l.zw)(c.charLimit(e.table))+"] ["+(0,l.zw)(c.charLimit(e.game))+"] ",1),e.is_copy_free?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",vg," [copy restricted] ")),(0,i.Uk)(" "+(0,l.zw)(c.charLimit(e.title)),1)])],8,_g)))),128))],544)),[[s.bM,n.columnBSelected]]):(0,i.kq)("",!0),"collection"===n.typeB?(0,i.wy)(((0,i.wg)(),(0,i.iD)("select",{key:1,class:"select is-fullwidth","onUpdate:modelValue":t[12]||(t[12]=e=>n.columnBSelected=e),onChange:t[13]||(t[13]=e=>c.getCollectionB(n.columnBSelected))},[yg,bg,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(c.collectionsAvailableInB,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e,key:e.id},[(0,i._)("span",null,[(0,i.Uk)(" ["+(0,l.zw)(c.charLimit(e.game))+"] ",1),e.is_copy_free?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",fg," [copy restricted] ")),(0,i.Uk)(" "+(0,l.zw)(c.charLimit(e.title)),1)])],8,kg)))),128)),Cg,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.favorites,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e,key:e.id},[(0,i._)("span",null,[(0,i.Uk)(" ["+(0,l.zw)(c.charLimit(e.game))+"] ",1),e.is_copy_free?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",Mg," [copy restricted] ")),(0,i.Uk)(" "+(0,l.zw)(c.charLimit(e.title)),1)])],8,Dg)))),128))],544)),[[s.bM,n.columnBSelected]]):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),null!==n.columnBSelected?((0,i.wg)(),(0,i.iD)("div",Ig,[(0,i._)("h2",Pg,[(0,i.Uk)((0,l.zw)(c.charLimit(n.columnBSelected.title))+" ("+(0,l.zw)(n.typeB),1),"campain"===n.typeB?((0,i.wg)(),(0,i.iD)("span",Lg," for "+(0,l.zw)(n.columnBSelected.table),1)):(0,i.kq)("",!0),(0,i.Uk)(") ")]),n.bIsLocked?((0,i.wg)(),(0,i.iD)("span",Sg,[(0,i.Wm)(r,{icon:"lock",style:{color:"red"}}),(0,i.Uk)(" Exports restricted (copy protected)")])):((0,i.wg)(),(0,i.iD)("span",xg,[(0,i.Wm)(r,{icon:"unlock",style:{color:"green"}}),(0,i.Uk)(" Free exports")]))])):(0,i.kq)("",!0),(0,i._)("div",Tg,[null!==n.columnBSelected?((0,i.wg)(),(0,i.iD)("table",$g,[(0,i._)("thead",null,[n.bIsLocked?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("th",Ug,[(0,i.Wm)(r,{icon:"arrow-left"}),(0,i.Uk)(" Copy to")])),Ag,qg]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.campainB.items,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id,class:"hoverable",onClick:t=>c.addToExchanges("from_b","items",e.id)},[n.bIsLocked?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("td",zg,[c.checked("from_b","items",e.id)?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"arrow-left",style:{color:"#8a9df3"}})):(0,i.kq)("",!0)])),(0,i._)("td",{class:(0,l.C_)(e.type)},(0,l.zw)(e.type),3),(0,i._)("td",null,(0,l.zw)(c.charLimit(e.name)),1)],8,Eg)))),128))])])):(0,i.kq)("",!0),null!==n.columnBSelected?((0,i.wg)(),(0,i.iD)("table",Gg,[(0,i._)("thead",null,[n.bIsLocked?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("th",Bg,[(0,i.Wm)(r,{icon:"arrow-left"}),(0,i.Uk)(" Copy to")])),Vg]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.campainB.pcs,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id,class:"hoverable",onClick:t=>c.addToExchanges("from_b","pcs",e.id)},[n.bIsLocked?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("td",jg,[c.checked("from_b","pcs",e.id)?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"arrow-left",style:{color:"#8a9df3"}})):(0,i.kq)("",!0)])),(0,i._)("td",null,(0,l.zw)(c.charLimit(e.name)),1)],8,Og)))),128))])])):(0,i.kq)("",!0)])])])])}var Ng={name:"ExchangesView",data(){return{campains:[],columnASelected:null,columnBSelected:null,campainA:[],aIsLocked:!1,bIsLocked:!1,campainB:[],collections:[],favorites:[],exchanges:{a_type:null,a_id:null,b_type:null,b_id:null,from_a:{items:[],pcs:[]},from_b:{items:[],pcs:[]}},typeA:"campain",typeB:"campain"}},beforeMount(){(0,S.Z)({method:"get",url:"/campains/exchanges_loading/",headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.campains=e.data.campains,this.collections=e.data.collections,this.favorites=e.data.favorites})).catch((e=>{console.log(e)}))},computed:{showApplyExchanges(){return this.exchanges.from_a.items.length>0||this.exchanges.from_a.pcs.length>0||this.exchanges.from_b.items.length>0||this.exchanges.from_b.pcs.length>0},collectionsAvailableInB(){return null===this.columnASelected?[]:this.collections.filter((e=>e.id!==this.columnASelected.id))},campainsAvailableInB(){return null===this.columnASelected?[]:this.campains.filter((e=>e.id!==this.columnASelected.id))}},methods:{applyExchanges(){this.exchanges.a_type=this.typeA,this.exchanges.b_type=this.typeB,this.exchanges.a_id=this.columnASelected.id,this.exchanges.b_id=this.columnBSelected.id,(0,S.Z)({method:"post",url:"/campains/apply_exchanges/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{exchanges:this.exchanges}}).then((e=>{this.campainA=e.data.source_a,this.campainB=e.data.source_b,(0,Ut.toast)({message:"Exchanges applied",type:"is-success",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:3e3}),this.exchanges.from_a.items=[],this.exchanges.from_a.pcs=[],this.exchanges.from_b.items=[],this.exchanges.from_b.pcs=[]})).catch((e=>{console.log(e)}))},setLocks(){console.log("column A: ",this.columnASelected),console.log("column B: ",this.columnBSelected),this.typeA===this.typeB&"collection"===this.typeA&&(console.log("collection to collection"),this.columnBSelected.is_copy_free&this.columnASelected.author===this.$store.state.user.id?(this.aIsLocked=!0,this.bIsLocked=!1):this.columnASelected.is_copy_free&this.columnBSelected.author===this.$store.state.user.id?(this.aIsLocked=!1,this.bIsLocked=!0):(this.aIsLocked=!0,this.bIsLocked=!0),this.columnASelected.author===this.columnBSelected.author&this.columnASelected.author===this.$store.state.user.id&&(this.aIsLocked=!1,this.bIsLocked=!1)),"campain"===this.typeA&&("campain"===this.typeB&&(console.log("campain to campain"),this.columnASelected.is_copy_free===this.columnBSelected.is_copy_free?(console.log("both locked or both unlocked"),this.aIsLocked=!1,this.bIsLocked=!1):this.columnASelected.is_copy_free?(this.aIsLocked=!1,this.bIsLocked=!0):(this.aIsLocked=!0,this.bIsLocked=!1)),"collection"===this.typeB&&(this.columnASelected.is_copy_free||(this.aIsLocked=!0,this.bIsLocked=!1),this.columnASelected.is_copy_free&&(this.columnBSelected.is_copy_free||(this.aIsLocked=!0,this.bIsLocked=!0),this.columnBSelected.is_copy_free&&(this.aIsLocked=!0,this.bIsLocked=!1),this.columnBSelected.author===this.$store.state.user.id&&(this.aIsLocked=!1,this.bIsLocked=!1)))),"campain"===this.typeA&"collection"===this.typeB&&(this.columnASelected.is_copy_free||(this.aIsLocked=!0,this.bIsLocked=!1),this.columnASelected.is_copy_free&&(this.columnBSelected.is_copy_free||(this.aIsLocked=!0,this.bIsLocked=!0,this.columnBSelected.author===this.$store.state.user.id&&(this.aIsLocked=!1,this.bIsLocked=!1)),this.columnBSelected.is_copy_free&&(this.aIsLocked=!0,this.bIsLocked=!1,this.columnBSelected.author===this.$store.state.user.id&&(this.aIsLocked=!1,this.bIsLocked=!1)))),"collection"===this.typeA&"campain"===this.typeB&&(this.columnBSelected.is_copy_free||(this.aIsLocked=!1,this.bIsLocked=!0),this.columnBSelected.is_copy_free&&(this.columnASelected.is_copy_free||(this.aIsLocked=!0,this.bIsLocked=!0,this.columnASelected.author===this.$store.state.user.id&&(this.aIsLocked=!1,this.bIsLocked=!1)),this.columnASelected.is_copy_free&&(this.aIsLocked=!1,this.bIsLocked=!0,this.columnASelected.author===this.$store.state.user.id&&(this.aIsLocked=!1,this.bIsLocked=!1))))},charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},addToExchanges(e,t,a){if(!("from_a"===e&this.aIsLocked)&&!("from_b"===e&this.bIsLocked)){if(null===this.columnBSelected)return console.log("campaignSelectedB: ",this.columnBSelected),void(0,Ut.toast)({message:"Please select a campaign or a collection to exchange with",type:"is-warning",position:"center",dismissible:!0,pauseOnHover:!0,duration:1e4});if(this.exchanges[e][t].filter((e=>e===a)).length){let s=this.exchanges[e][t].findIndex((e=>e===a));return this.exchanges[e][t].splice(s,1),void console.log("exchanges",this.exchanges)}this.exchanges[e][t].push(a)}},checked(e,t,a){return!!this.exchanges[e][t].filter((e=>e===a)).length},getCollectionA(e){this.aIsLocked=!e.is_copy_free,null!==this.columnASelected&&(console.log("get datas for : ",e.title),(0,S.Z)({url:"/campains/collection/",method:"get",headers:{Authorization:`Token ${this.$store.state.token}`},params:{id:e.id}}).then((e=>{this.campainA=e.data,console.log(this.campainA)})).catch((e=>{console.log(e)})))},getCollectionB(e){this.bIsLocked=!e.is_copy_free,null!==this.columnBSelected&&(console.log("get datas for : ",e.title),(0,S.Z)({url:"/campains/collection/",method:"get",headers:{Authorization:`Token ${this.$store.state.token}`},params:{id:e.id}}).then((e=>{this.campainB=e.data,console.log(this.campainB),this.setLocks()})).catch((e=>{console.log(e)})))},getCampainA(e){this.aIsLocked=!e.is_copy_free,null!==this.columnASelected&&(console.log("get datas for : ",e.title),(0,S.Z)({method:"get",url:`/campains/campains/${e.id}/`,headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.campainA=e.data.campain,console.log(this.campainA)})).catch((e=>{console.log(e)})))},cancel(){this.columnASelected=null,this.columnBSelected=null,this.campainA=[],this.campainB=[],this.exportsList=[]},getCampainB(e){null!==this.columnBSelected&&(console.log("get datas for : ",e.title),(0,S.Z)({method:"get",url:`/campains/campains/${e.id}/`,headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.campainB=e.data.campain,this.setLocks(),console.log(this.campainB)})).catch((e=>{console.log(e)})))}}};const Zg=(0,$.Z)(Ng,[["render",Hg],["__scopeId","data-v-08659dcb"]]);var Wg=Zg;const Fg=e=>((0,i.dD)("data-v-298c380c"),e=e(),(0,i.Cn)(),e),Kg={class:"container"},Yg=Fg((()=>(0,i._)("h1",{class:"title"},"Subscriptions",-1))),Rg={class:"legal mb-4"},Qg=Fg((()=>(0,i._)("strong",{class:"mr-4"},[(0,i.Uk)(" I accept the "),(0,i._)("a",{href:"privacyPolicy.html",target:"_blank"},"Privacy Policy")],-1))),Jg=Fg((()=>(0,i._)("strong",{class:"mr-4"},[(0,i.Uk)(" I accept the "),(0,i._)("a",{href:"TandC.html",target:"_blank"},"Terms and Conditions")],-1))),Xg=Fg((()=>(0,i._)("strong",{class:"mr-4"}," I am 18+ ",-1))),ew=["onClick"],tw={class:"subtitle",style:{color:"white"}},aw=Fg((()=>(0,i._)("hr",null,null,-1))),sw=Fg((()=>(0,i._)("hr",null,null,-1))),iw={class:""},lw=Fg((()=>(0,i._)("hr",null,null,-1))),ow=Fg((()=>(0,i._)("br",null,null,-1))),nw=Fg((()=>(0,i._)("ul",null,[(0,i._)("li",null,"- Create new campaigns"),(0,i._)("li",null,"- Create new items collections"),(0,i._)("li",null,"- Use the shared collections for your own campaigns")],-1)));function cw(e,t,a,o,n,c){return(0,i.wg)(),(0,i.iD)("div",Kg,[Yg,(0,i._)("div",Rg,[(0,i._)("p",null,[Qg,(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>n.acceptPolicy=e)},null,512),[[s.e8,n.acceptPolicy]])]),(0,i._)("p",null,[Jg,(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=e=>n.acceptTC=e)},null,512),[[s.e8,n.acceptTC]])]),(0,i._)("p",null,[Xg,(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=e=>n.accept18=e)},null,512),[[s.e8,n.accept18]])])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.plans,(e=>((0,i.wg)(),(0,i.iD)("div",{onClick:t=>c.subscribe(e.id),key:e.id,class:(0,l.C_)({box:c.termsAccepted,"box-disabled":!c.termsAccepted})},[(0,i._)("h2",tw,(0,l.zw)(e.product.name),1),aw,(0,i._)("p",null,(0,l.zw)(e.unit_amount/100)+" "+(0,l.zw)(e.currency)+" / "+(0,l.zw)(e.recurring_interval_count)+" "+(0,l.zw)(e.recurring_interval),1),sw,(0,i._)("p",iw,(0,l.zw)(e.product.description),1),lw,(0,i.Uk)(" Get acces to all features suitable for Game Masters. "),ow,nw],10,ew)))),128))])}var rw={name:"SubscriptionsView",data(){return{plans:[],acceptPolicy:!1,acceptTC:!1,accept18:!1}},computed:{termsAccepted(){return this.acceptPolicy&&this.acceptTC&&this.accept18}},methods:{subscribe(e){this.termsAccepted&&(0,S.Z)({method:"post",url:"campains/subscriptions/checkout/",data:{priceId:e},headers:{Authorization:"Token "+this.$store.state.token}}).then((e=>{window.location.href=e.data.url})).catch((e=>{console.log(e)}))}},beforeMount(){(0,S.Z)({url:"campains/subscriptions/plans/",method:"GET",headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.plans=e.data})).catch((e=>{console.log(e)}))}};const dw=(0,$.Z)(rw,[["render",cw],["__scopeId","data-v-298c380c"]]);var mw=dw;const uw=[{path:"/",name:"home",component:ne},{path:"/about",name:"about",component:()=>a.e(443).then(a.bind(a,4228))},{path:"/signup",name:"signup",component:yr},{path:"/login",name:"login",component:$r},{path:"/send_confirmation_email_again",name:"send_confirmation_email_again",component:Vr},{path:"/forgotten_password",name:"forgotten_password",component:Kr},{path:"/login_from_email/:token",name:"login_from_email",component:id},{path:"/account",name:"account",component:yd,meta:{requireLogin:!0}},{path:"/dashboard",name:"dashboard",component:Xe,meta:{requireLogin:!0}},{path:"/change_username",name:"change_username",component:Pd,meta:{requireLogin:!0}},{path:"/change_password",name:"change_password",component:Ed,meta:{requireLogin:!0}},{path:"/change_email",name:"change_email",component:Nd,meta:{requireLogin:!0}},{path:"/create_table",name:"create_table",component:_t,meta:{requireLogin:!0}},{path:"/edit_table/:id",name:"edit_table",component:Et,meta:{requireLogin:!0}},{path:"/table/:id",name:"table",component:ba,meta:{requireLogin:!0}},{path:"/campain/",name:"NewCampainView",component:Ea,meta:{requireLogin:!0}},{path:"/campain/:id",name:"CampainView",component:Uc,meta:{requireLogin:!0}},{path:"/campain/edit/:id",name:"CampainEditView",component:ir,meta:{requireLogin:!0}},{path:"/collections/",name:"CollectionsView",component:gu,meta:{requireLogin:!0}},{path:"/collection/:id",name:"collectionDetailView",component:Lp,meta:{requireLogin:!0}},{path:"/exchanges/",name:"exchangesView",component:Wg,meta:{requireLogin:!0}},{path:"/subscriptions/",name:"subscriptionsView",component:mw,meta:{requireLogin:!0}},{path:"/guide/",name:"guide",component:Se}],hw=(0,q.p7)({history:(0,q.r5)(),routes:uw});hw.beforeEach(((e,t,a)=>{e.matched.some((e=>e.meta.requireLogin))&&!xr.state.isAuthenticated?a({name:"login"}):a()}));var pw=hw,gw=a(3494),ww=a(7749),_w=a(8539);S.Z.defaults.baseURL="https://rpgadventure.eu",gw.vI.add(_w.mRB),(0,s.ri)(A).component("fa",ww.GN).use(xr).use(pw,S.Z).mount("#app")}},t={};function a(s){var i=t[s];if(void 0!==i)return i.exports;var l=t[s]={exports:{}};return e[s].call(l.exports,l,l.exports,a),l.exports}a.m=e,function(){var e=[];a.O=function(t,s,i,l){if(!s){var o=1/0;for(d=0;d<e.length;d++){s=e[d][0],i=e[d][1],l=e[d][2];for(var n=!0,c=0;c<s.length;c++)(!1&l||o>=l)&&Object.keys(a.O).every((function(e){return a.O[e](s[c])}))?s.splice(c--,1):(n=!1,l<o&&(o=l));if(n){e.splice(d--,1);var r=i();void 0!==r&&(t=r)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[s,i,l]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,s){return a.f[s](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/about.c562bacf.js"}}(),function(){a.miniCssF=function(e){return"css/about.3e1b031e.css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="lgm:";a.l=function(s,i,l,o){if(e[s])e[s].push(i);else{var n,c;if(void 0!==l)for(var r=document.getElementsByTagName("script"),d=0;d<r.length;d++){var m=r[d];if(m.getAttribute("src")==s||m.getAttribute("data-webpack")==t+l){n=m;break}}n||(c=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,a.nc&&n.setAttribute("nonce",a.nc),n.setAttribute("data-webpack",t+l),n.src=s),e[s]=[i];var u=function(t,a){n.onerror=n.onload=null,clearTimeout(h);var i=e[s];if(delete e[s],n.parentNode&&n.parentNode.removeChild(n),i&&i.forEach((function(e){return e(a)})),t)return t(a)},h=setTimeout(u.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=u.bind(null,n.onerror),n.onload=u.bind(null,n.onload),c&&document.head.appendChild(n)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p=""}(),function(){if("undefined"!==typeof document){var e=function(e,t,a,s,i){var l=document.createElement("link");l.rel="stylesheet",l.type="text/css";var o=function(a){if(l.onerror=l.onload=null,"load"===a.type)s();else{var o=a&&("load"===a.type?"missing":a.type),n=a&&a.target&&a.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=o,c.request=n,l.parentNode&&l.parentNode.removeChild(l),i(c)}};return l.onerror=l.onload=o,l.href=t,a?a.parentNode.insertBefore(l,a.nextSibling):document.head.appendChild(l),l},t=function(e,t){for(var a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var i=a[s],l=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(l===e||l===t))return i}var o=document.getElementsByTagName("style");for(s=0;s<o.length;s++){i=o[s],l=i.getAttribute("data-href");if(l===e||l===t)return i}},s=function(s){return new Promise((function(i,l){var o=a.miniCssF(s),n=a.p+o;if(t(o,n))return i();e(s,n,null,i,l)}))},i={143:0};a.f.miniCss=function(e,t){var a={443:1};i[e]?t.push(i[e]):0!==i[e]&&a[e]&&t.push(i[e]=s(e).then((function(){i[e]=0}),(function(t){throw delete i[e],t})))}}}(),function(){var e={143:0};a.f.j=function(t,s){var i=a.o(e,t)?e[t]:void 0;if(0!==i)if(i)s.push(i[2]);else{var l=new Promise((function(a,s){i=e[t]=[a,s]}));s.push(i[2]=l);var o=a.p+a.u(t),n=new Error,c=function(s){if(a.o(e,t)&&(i=e[t],0!==i&&(e[t]=void 0),i)){var l=s&&("load"===s.type?"missing":s.type),o=s&&s.target&&s.target.src;n.message="Loading chunk "+t+" failed.\n("+l+": "+o+")",n.name="ChunkLoadError",n.type=l,n.request=o,i[1](n)}};a.l(o,c,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,s){var i,l,o=s[0],n=s[1],c=s[2],r=0;if(o.some((function(t){return 0!==e[t]}))){for(i in n)a.o(n,i)&&(a.m[i]=n[i]);if(c)var d=c(a)}for(t&&t(s);r<o.length;r++)l=o[r],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(d)},s=self["webpackChunklgm"]=self["webpackChunklgm"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(1383)}));s=a.O(s)})();
//# sourceMappingURL=app.e1e06d33.js.map