(function(){"use strict";var e={1340:function(e,t,s){var a=s(9242),i=s(3396),l=s(7139);const o={class:"navbar is-fixed-top pl-2 pr-2 is-dark",role:"navigation","aria-label":"main navigation"},n={class:"navbar-brand"},c=(0,i._)("img",{src:"favicon.ico",alt:"short-logo",class:"mr-2"},null,-1),r=(0,i._)("span",{"aria-hidden":"true"},null,-1),d=(0,i._)("span",{"aria-hidden":"true"},null,-1),m=(0,i._)("span",{"aria-hidden":"true"},null,-1),u=[r,d,m],h={key:0,class:"navbar-start"},p={class:"navbar-end"},g={class:"navbar-item"},w={key:0},_=(0,i._)("strong",null,"Subscribe",-1),v={key:1,class:"navbar-item has-dropdown is-hoverable"},y={class:"navbar-link"},b={class:"navbar-dropdown"},k=(0,i._)("hr",{class:"navbar-divider"},null,-1),f=(0,i._)("a",{class:"navbar-item is-hidden-mobile",href:"https://github.com/byoso/lgm_front/issues",target:"_blank"}," Report an issue ",-1),C={class:"buttons"},D={key:0},M=(0,i._)("strong",null,"Sign up",-1),I={key:1},P=(0,i._)("div",{class:"bottom"},null,-1);function L(e,t,s,a,r,d){const m=(0,i.up)("router-link"),L=(0,i.up)("fa"),x=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("nav",o,[(0,i._)("div",n,[(0,i.Wm)(m,{to:"/",class:"navbar-item",style:{"font-weight":"bold"},onClick:t[0]||(t[0]=e=>r.burgerIsActive=!1)},{default:(0,i.w5)((()=>[c,(0,i.Uk)(" RPGAdventure.eu ")])),_:1}),(0,i._)("a",{role:"button",class:(0,l.C_)(["navbar-burger",{"is-active":r.burgerIsActive}]),onClick:t[1]||(t[1]=e=>d.toggleBurger()),"aria-label":"menu","aria-expanded":!1,"data-target":"navbarBasicExample"},u,2)]),(0,i._)("div",{id:"navbarBasicExample",class:(0,l.C_)(["navbar-menu",{"is-active":r.burgerIsActive}]),onClick:t[2]||(t[2]=e=>r.burgerIsActive=!1)},[e.$store.state.user?((0,i.wg)(),(0,i.iD)("div",h,[e.$store.state.isAuthenticated?((0,i.wg)(),(0,i.j4)(m,{key:0,to:"/dashboard",class:"navbar-item"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Tables ")])),_:1})):(0,i.kq)("",!0),e.$store.state.isAuthenticated?((0,i.wg)(),(0,i.j4)(m,{key:1,to:"/collections",class:"navbar-item is-hidden-mobile"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Collections ")])),_:1})):(0,i.kq)("",!0),e.$store.state.isAuthenticated&e.$store.state.user.is_subscriber?((0,i.wg)(),(0,i.j4)(m,{key:2,class:"navbar-item is-hidden-mobile",to:{name:"exchangesView"}},{default:(0,i.w5)((()=>[(0,i.Uk)(" Exchanges ")])),_:1})):(0,i.kq)("",!0)])):(0,i.kq)("",!0),(0,i._)("div",p,[(0,i._)("div",g,[e.$store.state.user?((0,i.wg)(),(0,i.iD)("div",w,[e.$store.state.isAuthenticated&!e.$store.state.user.is_subscriber&r.open_subscriptions?((0,i.wg)(),(0,i.j4)(m,{key:0,class:"button is-primary is-small mr-5",to:{name:"subscriptionsView"}},{default:(0,i.w5)((()=>[_])),_:1})):(0,i.kq)("",!0)])):(0,i.kq)("",!0),e.$store.state.isAuthenticated?((0,i.wg)(),(0,i.iD)("div",v,[(0,i._)("a",y,[(0,i.Uk)((0,l.zw)(d.user.username)+" ",1),(0,i.Wm)(L,{icon:"user",class:"ml-2"})]),(0,i._)("div",b,[(0,i.Wm)(m,{to:"/account",class:"navbar-item"},{default:(0,i.w5)((()=>[(0,i.Uk)(" account informations ")])),_:1}),k,(0,i.Wm)(m,{to:{name:"about"},class:"navbar-item"},{default:(0,i.w5)((()=>[(0,i.Uk)(" About ")])),_:1}),f])])):(0,i.kq)("",!0),(0,i._)("div",C,[e.$store.state.isAuthenticated?((0,i.wg)(),(0,i.iD)("div",I,[(0,i.Wm)(m,{class:"button is-warning is-small",onClick:d.logout,to:"/"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Log out ")])),_:1},8,["onClick"])])):((0,i.wg)(),(0,i.iD)("div",D,[r.open_subscriptions?((0,i.wg)(),(0,i.j4)(m,{key:0,class:"button is-primary is-small",to:"/signup"},{default:(0,i.w5)((()=>[M])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(m,{class:"button is-light is-small",to:"/login"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Log in ")])),_:1})]))])])])],2)]),(0,i._)("div",null,[(0,i.Wm)(x)]),P])}var x=s(4161),S={name:"App",data(){return{burgerIsActive:!1,open_subscriptions:!1}},methods:{logout(){this.$store.commit("removeToken")},toggleBurger(){this.burgerIsActive=!this.burgerIsActive}},computed:{user(){return this.$store.state.user}},beforeCreate(){this.$store.commit("initializeStore"),this.$store.state.token?x.Z.defaults.headers.common.Authorization="Token "+this.$store.state.token:x.Z.defaults.headers.common.Authorization="",this.user=this.$store.state.user,(0,x.Z)({method:"get",url:"/dsap/configuration/"}).then((e=>{this.$store.state.configuration=e.data,this.open_subscriptions=this.$store.state.configuration.open_subscriptions})).catch((e=>{console.log(e)}))},beforeMount(){},mounted(){document.title="RPGAdventure.eu"}},T=s(89);const $=(0,T.Z)(S,[["render",L]]);var U=$,A=s(2483);const q=e=>((0,i.dD)("data-v-f65de690"),e=e(),(0,i.Cn)(),e),E={class:"home container"},z={class:"columns"},G={class:"column is-2"},B={class:"menu is-hidden-mobile"},V=q((()=>(0,i._)("div",{class:"logo"},[(0,i._)("img",{src:"favicon.ico",class:"logo-image",alt:"logo"}),(0,i._)("h1",{class:"logo-title"}," RPGAdventure.eu ")],-1))),O=q((()=>(0,i._)("p",null,"First steps guide",-1))),j={class:"column is-10 scrollable"};function H(e,t,s,a,l,o){const n=(0,i.up)("router-link"),c=(0,i.up)("ArticleBox");return(0,i.wg)(),(0,i.iD)("div",E,[(0,i._)("div",z,[(0,i._)("div",G,[(0,i._)("div",B,[(0,i.Wm)(n,{to:{name:"about"}},{default:(0,i.w5)((()=>[V])),_:1}),(0,i.Wm)(n,{to:{name:"guide"},class:"m-2"},{default:(0,i.w5)((()=>[O])),_:1})])]),(0,i._)("div",j,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.articles,(e=>((0,i.wg)(),(0,i.j4)(c,{key:e.id,date_created:o.humanDate(e.date_created),title:e.title,subtitle:e.subtitle,content:e.content,image_url:e.image_url,image_size:e.image_size},null,8,["date_created","title","subtitle","content","image_url","image_size"])))),128))])])])}const N={class:"box"},Z={class:"columns"},W={class:"column is-9",id:"right-col"},F={class:"is-pulled-right"},K={class:"title"},Y={class:"subtitle"},R=["innerHTML"],Q={class:"column is-3"},J=["src"],X={key:1,src:"img/article-dflt-img.jpg",alt:"article-noimage",class:"article-noimage is-pulled-right is-hidden-mobile"};function ee(e,t,s,a,o,n){return(0,i.wg)(),(0,i.iD)("div",N,[(0,i._)("div",Z,[(0,i._)("div",W,[(0,i._)("p",F,(0,l.zw)(s.date_created),1),(0,i._)("h1",K,(0,l.zw)(s.title),1),(0,i._)("h2",Y,(0,l.zw)(s.subtitle),1),(0,i._)("div",{class:"content",innerHTML:n.render},null,8,R)]),(0,i._)("div",Q,[""!=s.image_url?((0,i.wg)(),(0,i.iD)("img",{key:0,src:s.image_url,id:"image",alt:"article-image",class:"article-image"},null,8,J)):((0,i.wg)(),(0,i.iD)("img",X))])])])}var te={name:"ArticleBox",props:["date_created","title","subtitle","content","image_url","image_size"],computed:{render(){return marked.parse(this.content)}},mounted(){let e=document.getElementById("image");e&&(e.style.height=this.image_size+"%")}};const se=(0,T.Z)(te,[["render",ee]]);var ae=se,ie={name:"HomeView",components:{ArticleBox:ae},data(){return{articles:[]}},beforeCreate(){(0,x.Z)({method:"GET",url:"home/articles/"}).then((e=>{this.articles=e.data.articles})).catch((e=>{console.log(e)}))},methods:{md(e){return marked.parse(e)},humanDate(e){let t=new Date(e);return t.toLocaleDateString()}}};const le=(0,T.Z)(ie,[["render",H],["__scopeId","data-v-f65de690"]]);var oe=le;const ne=e=>((0,i.dD)("data-v-2e169596"),e=e(),(0,i.Cn)(),e),ce={class:"container"},re=ne((()=>(0,i._)("div",{class:"logo mb-6 is-hidden-mobile"},[(0,i._)("img",{src:"favicon.ico",class:"logo-image",alt:"logo"}),(0,i._)("h1",{class:"logo-title"}," RPGAdventure.eu ")],-1))),de=ne((()=>(0,i._)("h1",{class:"title is-2"},"First steps guide",-1))),me={class:"is-pulled-right mr-2"},ue={key:0},he=(0,i.uE)('<br data-v-2e169596><h2 class="title is-4" data-v-2e169596>Quick introduction</h2><p data-v-2e169596> It is a tool for RPG masters and players to help them to handle the mass of information displayed when playing a RPG, in an elegant way. </p><div data-v-2e169596><img src="img/guide/cards-campains.png" alt="campain items" data-v-2e169596></div><br data-v-2e169596><p class="text" data-v-2e169596> During a RPG campaign, the game master will disclose informations to the players as they discover new elements (NPCs, LOCATIONs, ORGANIZATIONs...). Each element is displayed under the form of a card. </p><div data-v-2e169596><img src="img/guide/cards-items.png" alt="campain items" data-v-2e169596></div><br data-v-2e169596><p class="text" data-v-2e169596> While a campaign is often played on long period of time, the game master and the players can dive instantly into the game, consulting the item cards to remind them the discovered elements of the scenario, and their details. </p><br data-v-2e169596><p class="text" data-v-2e169596> Each card can contain datas for the player, but also datas only readable by the game master. </p><div class="columns" data-v-2e169596><div class="column m-2" data-v-2e169596><p data-v-2e169596><strong data-v-2e169596>Player&#39;s view</strong></p><img src="img/guide/card-item-player.png" alt="item player view" class="card-example" data-v-2e169596></div><div class="column m-2" data-v-2e169596><p data-v-2e169596><strong data-v-2e169596>Game master&#39;s view</strong></p><img src="img/guide/card-item-GM.png" alt="item GM view" class="card-example" data-v-2e169596></div></div><h2 class="title is-4" data-v-2e169596>Play on mobile</h2><p data-v-2e169596> Carrying a laptop is not the most convenient for playing, that&#39;s why the interface of RPGAdventure is adapted for smartphones too. </p><br data-v-2e169596><div class="columns" data-v-2e169596><div class="column" data-v-2e169596><h3 class="title is-5" data-v-2e169596>Game master&#39;s mobile interface</h3><img src="img/guide/mobile_items_gm.png" alt="gm mobile interface" class="image-bordered" data-v-2e169596></div><div class="column" data-v-2e169596><h3 class="title is-5" data-v-2e169596>Player&#39;s mobile interface</h3><img src="img/guide/mobile_items_player.png" alt="player mobile interface" class="image-bordered" data-v-2e169596></div></div><br data-v-2e169596><h2 class="title is-4" data-v-2e169596>About subscriptions</h2><p class="text" data-v-2e169596> Only the game master needs an active subscription to use RPGAdventure.eu, simple players can play as guests. </p>',19),pe=ne((()=>(0,i._)("br",null,null,-1))),ge={class:"is-pulled-right mr-2"},we={key:1},_e=ne((()=>(0,i._)("br",null,null,-1))),ve=ne((()=>(0,i._)("p",{class:"text"},[(0,i.Uk)(" a few steps: "),(0,i._)("ul",null,[(0,i._)("li",null," - Sign up "),(0,i._)("li",null," - Have an active subscription (30 days free trial) "),(0,i._)("li",null," - Create a virtual table: add the e-mail addresses of your guests (guests do not need a subscription), they will receive an invitation in their inbox. "),(0,i._)("li",null," - Create a campaign from the table view. "),(0,i._)("li",null," - Add items to your campaign while playing. ")])],-1))),ye=ne((()=>(0,i._)("br",null,null,-1))),be={class:"is-pulled-right mr-2"},ke={key:2},fe=ne((()=>(0,i._)("br",null,null,-1))),Ce=ne((()=>(0,i._)("p",null," I'd recommend you to have at least tried the quick way before trying this one. ",-1))),De=ne((()=>(0,i._)("br",null,null,-1))),Me=ne((()=>(0,i._)("p",null,[(0,i._)("ul",null,[(0,i._)("li",null," - Sign up "),(0,i._)("li",null," - Have an active subscription (30 days free trial) "),(0,i._)("li",null," - in the Collection interface, create a new collection "),(0,i._)("li",null," - edit the collection to your liking, adding some of the items and PCs you'd like to use in your campaign "),(0,i._)("li",null,' - In the Collection interface, click "Use for a new campaign", than choose the one table you want this new campaign to be available in (you must be a Game Master or Owner of the table). '),(0,i._)("li",null,' - play the campaign, you can add new items to it while playing, and then transfer them back to the collection throught the "Exchanges" interface. ')])],-1)));function Ie(e,t,s,a,l,o){const n=(0,i.up)("fa");return(0,i.wg)(),(0,i.iD)("div",ce,[re,de,(0,i._)("div",{onClick:t[0]||(t[0]=e=>l.showWhatIs=!l.showWhatIs),class:"topic"},[(0,i.Uk)(" What is RPGAdventure.eu ? "),(0,i._)("div",me,[l.showWhatIs?((0,i.wg)(),(0,i.j4)(n,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),l.showWhatIs?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(n,{key:1,icon:"angle-right"}))])]),l.showWhatIs?((0,i.wg)(),(0,i.iD)("div",ue,[he,(0,i._)("button",{class:"m-4 button",onClick:t[1]||(t[1]=e=>l.showWhatIs=!1)},"close this topic")])):(0,i.kq)("",!0),pe,(0,i._)("div",{onClick:t[2]||(t[2]=e=>l.showQuickWay=!l.showQuickWay),class:"topic"},[(0,i.Uk)(" The quick way to beggin "),(0,i._)("div",ge,[l.showQuickWay?((0,i.wg)(),(0,i.j4)(n,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),l.showQuickWay?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(n,{key:1,icon:"angle-right"}))])]),l.showQuickWay?((0,i.wg)(),(0,i.iD)("div",we,[_e,ve,(0,i._)("button",{class:"m-4 button",onClick:t[3]||(t[3]=e=>l.showQuickWay=!1)},"close this topic")])):(0,i.kq)("",!0),ye,(0,i._)("div",{onClick:t[4]||(t[4]=e=>l.showExpertWay=!l.showExpertWay),class:"topic"},[(0,i.Uk)(" The expert way "),(0,i._)("div",be,[l.showExpertWay?((0,i.wg)(),(0,i.j4)(n,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),l.showExpertWay?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(n,{key:1,icon:"angle-right"}))])]),l.showExpertWay?((0,i.wg)(),(0,i.iD)("div",ke,[fe,Ce,De,Me,(0,i._)("button",{class:"m-4 button",onClick:t[5]||(t[5]=e=>l.showExpertWay=!1)},"close this topic")])):(0,i.kq)("",!0)])}var Pe={name:"GuideView",components:{},data(){return{showWhatIs:!1,showQuickWay:!1,showExpertWay:!1}}};const Le=(0,T.Z)(Pe,[["render",Ie],["__scopeId","data-v-2e169596"]]);var xe=Le;const Se=e=>((0,i.dD)("data-v-386c0a8e"),e=e(),(0,i.Cn)(),e),Te={class:"container"},$e={class:"title"},Ue=Se((()=>(0,i._)("br",null,null,-1))),Ae=Se((()=>(0,i._)("br",null,null,-1))),qe={key:1},Ee=Se((()=>(0,i._)("h2",{class:"subtitle"},"My tables as owner:",-1))),ze={class:"table is-bordered is-fullwidth"},Ge=Se((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"name"),(0,i._)("th",{class:"is-hidden-mobile"},"owners"),(0,i._)("th",{class:"is-hidden-mobile"},"guests"),(0,i._)("th",null,"Edit")])],-1))),Be={class:"is-hidden-mobile"},Ve={class:"is-hidden-mobile"},Oe=["onClick"],je=Se((()=>(0,i._)("br",null,null,-1))),He={key:2},Ne=Se((()=>(0,i._)("h2",{class:"subtitle"},"My tables as guest:",-1))),Ze={class:"table is-bordered is-fullwidth"},We=Se((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"name"),(0,i._)("th",{class:"is-hidden-mobile"},"owners"),(0,i._)("th",{class:"is-hidden-mobile"},"guests")])],-1))),Fe={class:"is-hidden-mobile"},Ke={class:"is-hidden-mobile"};function Ye(e,t,s,a,o,n){const c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",Te,[(0,i._)("h1",$e,"Dashboard - "+(0,l.zw)(n.charLimit(o.user.username)),1),Ue,e.$store.state.user.is_subscriber?((0,i.wg)(),(0,i.j4)(c,{key:0,to:"/create_table",class:"button is-success is-small m-2"},{default:(0,i.w5)((()=>[(0,i.Uk)(" + new table ")])),_:1})):(0,i.kq)("",!0),Ae,o.tables_as_owner.length?((0,i.wg)(),(0,i.iD)("div",qe,[Ee,(0,i._)("table",ze,[Ge,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.tables_as_owner,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("td",null,[(0,i.Wm)(c,{onClick:t=>n.storeTable(e),to:{name:"table",params:{id:e.id}},class:"button"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(n.charLimit(e.name)),1)])),_:2},1032,["onClick","to"])]),(0,i._)("td",Be,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.owners,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id},(0,l.zw)(n.charLimit(e.email))+" - "+(0,l.zw)(n.charLimit(e.username)),1)))),128))])]),(0,i._)("td",Ve,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.guests.concat(e.game_masters),(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id},(0,l.zw)(n.charLimit(e.email))+" - "+(0,l.zw)(n.charLimit(e.username)),1)))),128))])]),(0,i._)("td",null,[(0,i._)("span",{class:"button is-warning is-small",onClick:t=>n.editTable(e.id)},"Edit",8,Oe)])])))),128))])])])):(0,i.kq)("",!0),je,o.tables_as_guest.length?((0,i.wg)(),(0,i.iD)("div",He,[Ne,(0,i._)("table",Ze,[We,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.tables_as_guest,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("td",null,[(0,i.Wm)(c,{to:{name:"table",params:{id:e.id}},onClick:t=>n.storeTable(e),class:"button"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(n.charLimit(e.name)),1)])),_:2},1032,["to","onClick"])]),(0,i._)("td",Fe,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.owners,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id},(0,l.zw)(n.charLimit(e.username)),1)))),128))])]),(0,i._)("td",Ke,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.guests.concat(e.game_masters),(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id},(0,l.zw)(n.charLimit(e.email))+" - "+(0,l.zw)(n.charLimit(e.username)),1)))),128))])])])))),128))])])])):(0,i.kq)("",!0)])}s(7658);var Re={name:"DashBoardView",components:{},data(){return{user:"",tables_as_owner:[],tables_as_guest:[]}},beforeMount(){this.user=this.$store.state.user,(0,x.Z)({method:"get",url:"/campains/dashboard/",headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.tables_as_owner=e.data["tables_as_owner"],this.tables_as_guest=e.data["tables_as_guest"],this.tables_as_gm=e.data["tables_as_gm"],this.tables_as_guest=this.tables_as_guest.concat(this.tables_as_gm)})).catch((e=>{console.log(e)}))},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},storeTable(e){this.$store.state.current_table=e},editTable(e){this.$router.push({name:"edit_table",params:{id:e}})}}};const Qe=(0,T.Z)(Re,[["render",Ye],["__scopeId","data-v-386c0a8e"]]);var Je=Qe;const Xe={class:"container is-max-desktop"},et=(0,i._)("h1",{class:"title"},"Create a new table",-1),tt=(0,i._)("h2",{class:"subtitle"},"The table",-1),st=(0,i._)("label",{class:"label"},"Name",-1),at=(0,i._)("label",{class:"label"},"Description",-1),it=(0,i._)("hr",null,null,-1),lt=(0,i._)("h2",{class:"subtitle"},"The Guests emails",-1),ot=(0,i._)("p",{class:"mb-2"},"You can add guests later if you prefer.",-1),nt=["id"],ct={class:"label"},rt={class:"control field is-grouped"},dt=["onUpdate:modelValue"],mt=["onClick"],ut=(0,i._)("br",null,null,-1);function ht(e,t,s,o,n,c){return(0,i.wg)(),(0,i.iD)("div",Xe,[(0,i._)("form",null,[et,tt,st,(0,i.wy)((0,i._)("input",{type:"text",class:"input",placeholder:"Name the table","onUpdate:modelValue":t[0]||(t[0]=e=>n.name=e),required:""},null,512),[[a.nr,n.name]]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.errors.name,(e=>((0,i.wg)(),(0,i.iD)("p",{style:{color:"red"},key:e},(0,l.zw)(e),1)))),128)),at,(0,i.wy)((0,i._)("textarea",{type:"textarea",class:"textarea",rows:"6","onUpdate:modelValue":t[1]||(t[1]=e=>n.description=e)},"\n    ",512),[[a.nr,n.description]]),it,lt,ot,(0,i._)("span",{class:"button is-success is-small m-2",onClick:t[2]||(t[2]=(...e)=>c.addOneGuest&&c.addOneGuest(...e))},"Add more guests"),n.guests.length?((0,i.wg)(),(0,i.iD)("span",{key:0,class:"button is-danger is-small m-2",onClick:t[3]||(t[3]=(...e)=>c.removeOneGuest&&c.removeOneGuest(...e))},"Remove the last guest")):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.guests,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,id:t,class:"field"},[(0,i._)("label",ct,"Guest email"+(0,l.zw)(t+1),1),(0,i._)("div",rt,[(0,i.wy)((0,i._)("input",{type:"email",class:"input guest_email","onUpdate:modelValue":e=>n.guests[t].email=e,placeholder:"Enter the guest's email"},null,8,dt),[[a.nr,n.guests[t].email]]),(0,i._)("span",{class:"button is-danger is-right ml-2",onClick:e=>c.removeGuest(t)},"X",8,mt)])],8,nt)))),128)),ut,(0,i._)("button",{class:"button is-success mt-2",onClick:t[4]||(t[4]=(...e)=>c.onSubmit&&c.onSubmit(...e))},"Confirm")])])}var pt={name:"CreateTableView",components:{},data(){return{name:"",description:"",guests:[],base_key:0,errors:{}}},methods:{addOneGuest(){this.guests.push({email:""})},removeOneGuest(){this.guests.pop(),this.base_key-=1},removeGuest(e){this.guests.splice(e,1)},getKey(){return this.base_key+=1,this.base_key},getGuestsList(){let e=[];for(var t=0;t<this.guests.length;t++)""!=this.guests[t].email&&e.push(this.guests[t].email);return e},onSubmit(){if(""!=this.name){let e=this.getGuestsList();this.errors=[],(0,x.Z)({method:"POST",url:"campains/tables/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{name:this.name,description:this.description,guests:e}}).then((e=>{this.$router.push({name:"dashboard"})})).catch((e=>{e.response&&(console.log(e.response.data),this.errors=e.response.data)}))}}}};const gt=(0,T.Z)(pt,[["render",ht]]);var wt=gt;const _t={class:"container is-max-desktop"},vt={class:"title"},yt=(0,i._)("h2",{class:"subtitle"},"The table",-1),bt=(0,i._)("label",{class:"label"},"Name",-1),kt=(0,i._)("label",{class:"label"},"Description",-1),ft=(0,i._)("hr",null,null,-1),Ct=(0,i._)("h2",{class:"subtitle"},"The Guests emails",-1),Dt=["id"],Mt={class:"label"},It={class:"control field is-grouped"},Pt=["onUpdate:modelValue"],Lt=["onClick"],xt=(0,i._)("br",null,null,-1),St=["disabled"];function Tt(e,t,s,o,n,c){return(0,i.wg)(),(0,i.iD)("div",_t,[(0,i._)("form",null,[(0,i._)("h1",vt,"Edit table '"+(0,l.zw)(n.name)+"'",1),yt,bt,(0,i.wy)((0,i._)("input",{type:"text",class:"input",placeholder:"Name the table","onUpdate:modelValue":t[0]||(t[0]=e=>n.name=e),required:""},null,512),[[a.nr,n.name]]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.errors.name,(e=>((0,i.wg)(),(0,i.iD)("p",{style:{color:"red"},key:e},(0,l.zw)(e),1)))),128)),kt,(0,i.wy)((0,i._)("textarea",{type:"textarea",class:"textarea",rows:"6","onUpdate:modelValue":t[1]||(t[1]=e=>n.description=e)},"\n    ",512),[[a.nr,n.description]]),ft,Ct,(0,i._)("span",{class:"button is-success is-small m-2",onClick:t[2]||(t[2]=(...e)=>c.addOneGuest&&c.addOneGuest(...e))},"Add more guests"),n.guests.length?((0,i.wg)(),(0,i.iD)("span",{key:0,class:"button is-danger is-small m-2",onClick:t[3]||(t[3]=(...e)=>c.removeOneGuest&&c.removeOneGuest(...e))},"Remove the last guest")):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.guests,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,id:t,class:"field"},[(0,i._)("label",Mt,"Guest email"+(0,l.zw)(t+1),1),(0,i._)("div",It,[(0,i.wy)((0,i._)("input",{type:"email",class:"input guest_email","onUpdate:modelValue":e=>n.guests[t].email=e,placeholder:"Enter the guest's email"},null,8,Pt),[[a.nr,n.guests[t].email]]),(0,i._)("span",{class:"button is-danger is-right ml-2",onClick:e=>c.removeGuest(t)},"X",8,Lt)])],8,Dt)))),128)),xt,(0,i._)("button",{class:"button is-success m-2",onClick:t[4]||(t[4]=(...e)=>c.onSubmit&&c.onSubmit(...e))},"Confirm"),(0,i._)("span",{class:"button is-warning m-2",onClick:t[5]||(t[5]=(...e)=>c.unSafeDelete&&c.unSafeDelete(...e))},"Delete '"+(0,l.zw)(n.name)+"'",1),(0,i._)("button",{class:"button is-danger m-2",disabled:n.allowDelete,id:"deleteButtonId",onClick:t[6]||(t[6]=(0,a.iM)(((...e)=>c.deleteTable&&c.deleteTable(...e)),["prevent"]))},"Confirm delete",8,St)])])}var $t=s(5597),Ut={name:"EditTableView",components:{},data(){return{table_id:this.$route.params.id,name:"",description:"",guests:[],base_key:0,errors:{},allowDelete:!0}},beforeMount(){this.table_id=this.$route.params.id,(0,x.Z)({method:"get",url:"/campains/get_table_datas/",headers:{Authorization:`Token ${this.$store.state.token}`},params:{table_id:this.table_id}}).then((e=>{this.name=e.data["name"],this.description=e.data["description"];for(var t=0;t<e.data["guests"].length;t++)this.guests.push({email:e.data["guests"][t].email})})).catch((e=>{console.log(e)}))},methods:{unSafeDelete(){this.allowDelete=!this.allowDelete},deleteTable(){(0,x.Z)({method:"delete",url:"/campains/tables/"+this.table_id+"/",headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{(0,$t.toast)({message:"Table deleted",type:"is-success",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:5e3}),this.$router.push({name:"dashboard"})})).catch((e=>{console.log(e)}))},addOneGuest(){this.guests.push({email:""})},removeOneGuest(){this.guests.pop(),this.base_key-=1},removeGuest(e){this.guests.splice(e,1)},getKey(){return this.base_key+=1,this.base_key},getGuestsList(){let e=[];for(var t=0;t<this.guests.length;t++)""!=this.guests[t].email&&e.push(this.guests[t].email);return e},onSubmit(){if(""!=this.name){let e=this.getGuestsList();this.errors=[],(0,x.Z)({method:"PUT",url:`campains/tables/${this.table_id}/`,headers:{Authorization:`Token ${this.$store.state.token}`},data:{name:this.name,description:this.description,guests:e,table_password:this.table_password}}).then((e=>{this.$store.state.current_table=e.data,this.$router.push({name:"table",params:{id:this.table_id}})})).catch((e=>{this.errors=e.response.data}))}}}};const At=(0,T.Z)(Ut,[["render",Tt]]);var qt=At;const Et=e=>((0,i.dD)("data-v-082ad4b9"),e=e(),(0,i.Cn)(),e),zt={class:"container"},Gt={class:"subtitle"},Bt={class:"is-pulled-right mr-2"},Vt={key:0,class:"is-hidden-mobile"},Ot={class:"columns m-2 is-flex members_n_roles"},jt={class:"column is-4"},Ht=Et((()=>(0,i._)("h2",{class:"subtitle"},"Table Owners",-1))),Nt={class:"column is-4"},Zt=Et((()=>(0,i._)("h2",{class:"subtitle"},"Game masters",-1))),Wt={class:"column is-4"},Ft=Et((()=>(0,i._)("h2",{class:"subtitle"},"Playing only",-1))),Kt={class:"is-pulled-right mr-2"},Yt={key:1},Rt={class:"m-2"},Qt={key:0,class:"container-campain"},Jt={class:"is-pulled-right mr-2"},Xt={key:2},es={class:"m-2"},ts={key:0,class:"container-campain"};function ss(e,t,s,a,o,n){const c=(0,i.up)("fa"),r=(0,i.up)("CampainBox");return(0,i.wg)(),(0,i.iD)("div",zt,[(0,i._)("h1",Gt,"Table "+(0,l.zw)(o.table.name),1),(0,i._)("div",null,[n.is_owner&n.is_subscriber?((0,i.wg)(),(0,i.iD)("a",{key:0,class:"button is-small is-warning m-2",onClick:t[0]||(t[0]=e=>n.editTable(o.table.id))}," Edit "+(0,l.zw)(o.table.name),1)):(0,i.kq)("",!0),(n.is_owner|n.is_game_master)&n.is_subscriber?((0,i.wg)(),(0,i.iD)("a",{key:1,class:"button is-small is-success m-2",onClick:t[1]||(t[1]=(...e)=>n.newCampain&&n.newCampain(...e))}," + new campaign ")):(0,i.kq)("",!0)]),(0,i._)("div",{onClick:t[2]||(t[2]=e=>o.showMembers=!o.showMembers),class:"topic is-hidden-mobile"},[(0,i.Uk)("Members & roles "),(0,i._)("div",Bt,[o.showMembers?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),o.showMembers?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(c,{key:1,icon:"angle-right"}))])]),o.showMembers?((0,i.wg)(),(0,i.iD)("div",Vt,[(0,i._)("div",Ot,[(0,i._)("div",jt,[Ht,(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.table.owners,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id,class:"mt-2"},[(0,i.Uk)((0,l.zw)(e.username)+" ",1),n.is_owner&o.table.owners.length>1&o.user.id!=e.id?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"arrow-right",class:"arrow is-pulled-right ml-2",onClick:t=>n.switchGMOwner(e.id)},null,8,["onClick"])):(0,i.kq)("",!0)])))),128))])]),(0,i._)("div",Nt,[Zt,(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.table.game_masters,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id,class:"mt-2"},[n.is_owner?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"arrow-left",class:"arrow is-pulled-left mr-2",onClick:t=>n.switchGMOwner(e.id)},null,8,["onClick"])):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,l.zw)(e.username)+" ",1),n.is_owner?((0,i.wg)(),(0,i.j4)(c,{key:1,icon:"arrow-right",class:"arrow is-pulled-right ml-2",onClick:t=>n.switchGuestGM(e.id)},null,8,["onClick"])):(0,i.kq)("",!0)])))),128))])]),(0,i._)("div",Wt,[Ft,(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.table.guests,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id,class:"mt-2"},[n.is_owner?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"arrow-left",class:"arrow is-pulled-left mr-2",onClick:t=>n.switchGuestGM(e.id)},null,8,["onClick"])):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,l.zw)(e.email)+" - "+(0,l.zw)(e.username),1)])))),128))])])])])):(0,i.kq)("",!0),(0,i._)("div",{onClick:t[3]||(t[3]=e=>o.showEndedCampains=!o.showEndedCampains),class:"topic"},[(0,i.Uk)("Ended Campaigns "),(0,i._)("div",Kt,[o.showEndedCampains?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),o.showEndedCampains?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(c,{key:1,icon:"angle-right"}))])]),o.showEndedCampains?((0,i.wg)(),(0,i.iD)("div",Yt,[(0,i._)("div",Rt,[o.campains.length?((0,i.wg)(),(0,i.iD)("div",Qt,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.endedCampains,(e=>((0,i.wg)(),(0,i.j4)(r,{key:e.id,class:"is-2",user:o.user,campain:e},null,8,["user","campain"])))),128))])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),(0,i._)("div",{onClick:t[4]||(t[4]=e=>o.showCampains=!o.showCampains),class:"topic"},[(0,i.Uk)("Campaigns "),(0,i._)("div",Jt,[o.showCampains?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),o.showCampains?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(c,{key:1,icon:"angle-right"}))])]),o.showCampains?((0,i.wg)(),(0,i.iD)("div",Xt,[(0,i._)("div",es,[o.campains.length?((0,i.wg)(),(0,i.iD)("div",ts,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.campains,(e=>((0,i.wg)(),(0,i.j4)(r,{key:e.id,class:"is-2",user:o.user,campain:e},null,8,["user","campain"])))),128))])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0)])}const as={class:"campainTitle"},is={key:0,class:"image is-128x128"},ls=["src"],os={class:"m-3"},ns={class:"columns is-mobile"},cs={class:"column"},rs={class:"campainTitle-mobile"},ds={class:"column"},ms={key:0,class:"image-mobile"},us=["src"];function hs(e,t,s,a,o,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",{class:(0,l.C_)(["box m-2 campain is-hidden-mobile",{mastering:s.user.id===s.campain.game_master.id,"not-mastering":s.user.id!==s.campain.game_master.id}]),onClick:t[0]||(t[0]=e=>n.gotoCampain(s.campain.id))},[(0,i._)("h2",as,(0,l.zw)(n.charLimit(s.campain.title)),1),(0,i._)("h2",null,(0,l.zw)(n.charLimit(s.campain.game)),1),(0,i._)("div",null,[s.campain.image_url?((0,i.wg)(),(0,i.iD)("figure",is,[(0,i._)("img",{src:s.campain.image_url},null,8,ls)])):(0,i.kq)("",!0)]),(0,i._)("div",os," mastered by "+(0,l.zw)(n.charLimit(s.campain.game_master.username)),1)],2),(0,i._)("div",{class:(0,l.C_)(["m-1 campain-mobile is-hidden-desktop",{mastering:s.user.id===s.campain.game_master.id,"not-mastering":s.user.id!==s.campain.game_master.id}]),onClick:t[1]||(t[1]=e=>n.gotoCampain(s.campain.id))},[(0,i._)("div",ns,[(0,i._)("div",cs,[(0,i._)("span",rs,(0,l.zw)(s.campain.title),1)]),(0,i._)("div",ds,[""!=s.campain.image_url?((0,i.wg)(),(0,i.iD)("figure",ms,[(0,i._)("img",{src:s.campain.image_url,alt:"campain image"},null,8,us)])):(0,i.kq)("",!0)])])],2)])}var ps={name:"CampainBox",props:["campain","user"],methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},gotoCampain(e){this.$store.state.current_campain=this.campain,this.$router.push({name:"CampainView",params:{id:e}})}}};const gs=(0,T.Z)(ps,[["render",hs],["__scopeId","data-v-6b8f1299"]]);var ws=gs,_s={name:"TableView",components:{CampainBox:ws},data(){return{table:{name:"no name"},allCampains:[],endedCampains:[],campains:[],user:{},showMembers:!1,showEndedCampains:!1,showCampains:!0}},computed:{is_owner(){return this.table.owners.some((e=>e.id===this.$store.state.user.id))},is_game_master(){return this.table.game_masters.some((e=>e.id===this.$store.state.user.id))},is_subscriber(){return this.$store.state.user.is_subscriber}},beforeMount(){this.table=this.$store.state.current_table,this.user=this.$store.state.user,(0,x.Z)({method:"get",url:"campains/get_campains_for_table/",params:{table_id:this.table.id},headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.allCampains=e.data,this.endedCampains=this.allCampains.filter((e=>e.is_ended)),this.sortByGame(this.endedCampains),this.campains=this.allCampains.filter((e=>!e.is_ended)),this.sortByGame(this.campains)})).catch((e=>{console.log("campains error: ",e)}))},methods:{sortByGame(e){e.sort(((e,t)=>e.game>t.game?1:-1))},editTable(e){this.$router.push({name:"edit_table",params:{id:e}})},newCampain(){this.$router.push({name:"NewCampainView"})},switchGuestGM(e){(0,x.Z)({method:"POST",url:"campains/switch_guest_GM/",data:{table_id:this.table.id,user_id:e},headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.table=e.data.table,this.$store.state.current_table=e.data.table,this.table.owners.some((e=>e.id===this.$store.state.user.id))&this.$store.state.user.is_subscriber?this.is_owner=!0:this.is_owner=!1})).catch((e=>{console.log(e)}))},switchGMOwner(e){(0,x.Z)({method:"POST",url:"campains/switch_GM_owner/",data:{table_id:this.table.id,user_id:e},headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.table=e.data.table,this.$store.state.current_table=e.data.table,this.table.owners.some((e=>e.id===this.$store.state.user.id))&this.$store.state.user.is_subscriber?this.is_owner=!0:this.is_owner=!1})).catch((e=>{console.log(e)}))}}};const vs=(0,T.Z)(_s,[["render",ss],["__scopeId","data-v-082ad4b9"]]);var ys=vs;const bs={class:"container is-max-desktop"},ks=(0,i._)("h1",{class:"title"},"Start a New Campaign",-1),fs={class:"subtitle"},Cs={key:0},Ds={class:"mt-2"},Ms=(0,i._)("label",{class:"label"},"Language",-1),Is=(0,i.uE)('<option value="ar">Arabic</option><option value="cs">Czech</option><option value="zh">Chinese</option><option value="da">Danish</option><option value="nl">Dutch</option><option value="en">English</option><option value="fi">Finnish</option><option value="fr">French</option><option value="de">German</option><option value="el">Greek</option><option value="hi">Hindi</option><option value="hu">Hungarian</option><option value="it">Italian</option><option value="ja">Japanese</option><option value="ko">Korean</option><option value="no">Norwegian</option><option value="fa">Persian</option><option value="pl">Polish</option><option value="pt">Portuguese</option><option value="ru">Russian</option><option value="es">Spanish</option><option value="sv">Swedish</option><option value="th">Thai</option><option value="tr">Turkish</option><option value="vi">Vietnamese</option>',25),Ps=[Is],Ls=(0,i._)("label",{class:"label"},"Game",-1),xs=(0,i._)("label",{class:"label"},"Campaign title",-1),Ss=(0,i._)("label",{class:"label"},"Image url",-1),Ts=(0,i._)("label",{class:"label"},"Description",-1);function $s(e,t,s,o,n,c){return(0,i.wg)(),(0,i.iD)("div",bs,[(0,i._)("form",null,[ks,(0,i._)("h2",fs,(0,l.zw)(c.charLimit(n.table.name)),1),n.errors.length?((0,i.wg)(),(0,i.iD)("ul",Cs,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.errors,(e=>((0,i.wg)(),(0,i.iD)("li",{class:"is-danger",key:e,style:{color:"red"}},(0,l.zw)(e),1)))),128))])):(0,i.kq)("",!0),(0,i._)("div",Ds,[Ms,(0,i.wy)((0,i._)("select",{name:"",id:"","onUpdate:modelValue":t[0]||(t[0]=e=>n.language=e)},Ps,512),[[a.bM,n.language]]),Ls,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Game name",class:"input","onUpdate:modelValue":t[1]||(t[1]=e=>n.game=e)},null,512),[[a.nr,n.game]]),xs,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Campain title",class:"input","onUpdate:modelValue":t[2]||(t[2]=e=>n.campainTitle=e)},null,512),[[a.nr,n.campainTitle]]),Ss,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Image url",class:"input","onUpdate:modelValue":t[3]||(t[3]=e=>n.image_url=e)},null,512),[[a.nr,n.image_url]]),Ts,(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Campain description","onUpdate:modelValue":t[4]||(t[4]=e=>n.camapainDescription=e)},null,512),[[a.nr,n.camapainDescription]])]),(0,i._)("button",{class:"button is-success mt-2",onClick:t[5]||(t[5]=(0,a.iM)(((...e)=>c.onSubmit&&c.onSubmit(...e)),["prevent"]))},"Confirm")])])}var Us={name:"NewCampainView",data(){return{table:{},game:"",image_url:"",language:"en",campainTitle:"",camapainDescription:"",errors:[]}},beforeMount(){this.table=this.$store.state.current_table},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},onSubmit(){this.errors=[],""===this.game&&this.errors.push("You must enter a game"),""===this.campainTitle&&this.errors.push("You must enter a title"),this.errors.length>0||(0,x.Z)({method:"post",url:"/campains/campains/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{table_id:this.table.id,game:this.game,title:this.campainTitle,description:this.camapainDescription,image_url:this.image_url,language:this.language}}).then((e=>{this.$router.push({name:"table",params:{id:this.$store.state.current_table.id}})})).catch((e=>{console.log(e.response.data.errors),typeof e==Array?this.errors=e.response.data.errors:this.errors.push(e.response.data.errors[0])}))}}};const As=(0,T.Z)(Us,[["render",$s]]);var qs=As;const Es=e=>((0,i.dD)("data-v-76449592"),e=e(),(0,i.Cn)(),e),zs={class:"is-hidden-tablet",id:"mobile-menu"},Gs={class:"tabs-bar-mobile"},Bs={class:"tabs is-centered"},Vs=["disabled"],Os={key:0},js={class:"columns is-mobile"},Hs={class:"column is-5"},Ns={class:"select is-small"},Zs=Es((()=>(0,i._)("option",{selected:""},"--All--",-1))),Ws={class:"column is-4"},Fs={class:"select is-small"},Ks=Es((()=>(0,i._)("option",{value:"name"},"name",-1))),Ys=Es((()=>(0,i._)("option",{value:"date+"},"date +",-1))),Rs=Es((()=>(0,i._)("option",{value:"date-"},"date -",-1))),Qs=Es((()=>(0,i._)("option",{value:"type"},"type",-1))),Js=[Ks,Ys,Rs,Qs],Xs={class:"column is-3"},ea={key:1},ta={key:2},sa={key:0},aa=["src"],ia=Es((()=>(0,i._)("br",null,null,-1))),la={key:2},oa={class:"m-2"},na={class:"subtitle"},ca={key:3},ra={key:1},da=Es((()=>(0,i._)("hr",null,null,-1))),ma=Es((()=>(0,i._)("label",{class:"label"},"Max items displayed",-1))),ua={class:"select"},ha=(0,i.uE)('<option value="all" data-v-76449592>--All--</option><option value="10" data-v-76449592>10</option><option value="30" data-v-76449592>30</option><option value="50" selected data-v-76449592>50</option><option value="100" data-v-76449592>100</option>',5),pa=[ha],ga=Es((()=>(0,i._)("div",null,[(0,i._)("button",{onclick:"window.scrollTo({top: 0, behavior: 'smooth'});",class:"button is-small",style:{position:"fixed",bottom:"10px",right:"10px"}}," scroll top ")],-1))),wa={class:"columns is-hidden-mobile"},_a=Es((()=>(0,i._)("div",{class:"main-window"},null,-1))),va={class:"column is-9 items-window"},ya=Es((()=>(0,i._)("br",null,null,-1))),ba={class:"columns is-multiline m-2"},ka={class:"column is-3"};function fa(e,t,s,o,n,c){const r=(0,i.up)("fa"),d=(0,i.up)("ItemBoxMobile"),m=(0,i.up)("PcBoxMobile"),u=(0,i.up)("RatingWidget"),h=(0,i.up)("OfficialMark"),p=(0,i.up)("router-link"),g=(0,i.up)("ItemBox"),w=(0,i.up)("CampainTools"),_=(0,i.up)("ItemModalDisplay"),v=(0,i.up)("ItemModalEdit"),y=(0,i.up)("CreateItemModal"),b=(0,i.up)("PCModalCreate"),k=(0,i.up)("PCModalEdit");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",zs,[(0,i._)("div",Gs,[(0,i._)("div",Bs,[(0,i._)("a",{class:"button is-small button-mobile is-active",onClick:t[0]||(t[0]=e=>c.displayMobile("items")),id:"tab-items"},"Items"),(0,i._)("a",{class:"button is-small button-mobile",onClick:t[1]||(t[1]=e=>c.displayMobile("pcs")),id:"tab-pcs"},"PCs"),(0,i._)("a",{class:"button is-small button-mobile",onClick:t[2]||(t[2]=e=>c.displayMobile("infos")),id:"tab-infos"},"Infos"),(0,i._)("a",{class:"button is-small button-mobile",onClick:t[3]||(t[3]=e=>c.displayMobile("settings")),id:"tab-settings"},[(0,i.Wm)(r,{icon:"gear"})]),(0,i._)("button",{class:"button is-small is-success",disabled:n.refreshSpin,onClick:t[4]||(t[4]=(...e)=>c.refresh_campain&&c.refresh_campain(...e))},[(0,i.Wm)(r,{icon:"arrows-rotate",class:(0,l.C_)({spinner:n.refreshSpin})},null,8,["class"])],8,Vs)])]),n.displayMobileItems?((0,i.wg)(),(0,i.iD)("div",Os,[(0,i._)("div",js,[(0,i._)("div",Hs,[(0,i._)("div",Ns,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>n.filterBy=e),onChange:t[6]||(t[6]=e=>c.filterItems(n.filterBy))},[Zs,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.itemTypes,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e},(0,l.zw)(e),1)))),128))],544),[[a.bM,n.filterBy]])])]),(0,i._)("div",Ws,[(0,i._)("div",Fs,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>n.sortBy=e),onClick:t[8]||(t[8]=e=>c.sortItems(n.sortBy))},Js,512),[[a.bM,n.sortBy]])])]),(0,i._)("div",Xs,[(0,i._)("button",{class:"button is-small is-success",onClick:t[9]||(t[9]=e=>n.showCreateItemModal=!0)}," + Item ")])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.shownItems,(e=>((0,i.wg)(),(0,i.j4)(d,{key:e.id,item:e,user:n.user,campain:n.campain,onItemUpdated:t[10]||(t[10]=e=>c.getUpdatedItem(e)),onShowModalDisplay:t[11]||(t[11]=e=>c.showItemModalDisplay(e))},null,8,["item","user","campain"])))),128))])):(0,i.kq)("",!0),n.displayMobilePcs?((0,i.wg)(),(0,i.iD)("div",ea,[c.isGameMaster&n.displayMobilePcs?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"button is-success is-small mb-4",onClick:t[12]||(t[12]=e=>n.showCreatePCModal=!0)}," + PC ")):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.campain.pcs,(e=>((0,i.wg)(),(0,i.j4)(m,{key:e.id,pc:e,user:n.user,campain:n.campain,onUpdatePC:t[13]||(t[13]=e=>c.updatePC(e)),onDeletePC:t[14]||(t[14]=e=>c.deletePC(e))},null,8,["pc","user","campain"])))),128))])):(0,i.kq)("",!0),n.displayMobileInfos?((0,i.wg)(),(0,i.iD)("div",ta,[(0,i.Uk)((0,l.zw)(n.campain.title)+" ",1),n.campain.image_url?((0,i.wg)(),(0,i.iD)("figure",sa,[(0,i._)("img",{src:n.campain.image_url},null,8,aa)])):(0,i.kq)("",!0),ia,n.collection?((0,i.wg)(),(0,i.j4)(u,{key:1,collection:n.collection,onNewCollection:t[15]||(t[15]=t=>e.$emit("newCollection",t))},null,8,["collection"])):(0,i.kq)("",!0),n.campain.is_official?((0,i.wg)(),(0,i.iD)("span",la,[(0,i.Wm)(h,{collection:n.campain},null,8,["collection"])])):(0,i.kq)("",!0),(0,i._)("div",oa,[(0,i.Wm)(p,{to:{name:"table",params:{id:n.table.id}},class:"button is-small is-secondary mr-2"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(c.charLimit(n.table.name)),1)])),_:1},8,["to"]),(0,i._)("span",na,"Mastered by "+(0,l.zw)(c.charLimit(n.campain.game_master.username)),1)])])):(0,i.kq)("",!0),n.displayMobileSettings?((0,i.wg)(),(0,i.iD)("div",ca,[c.isGameMaster?((0,i.wg)(),(0,i.j4)(p,{key:0,to:{name:"CampainEditView",params:{id:n.campain.id}},class:"m-2 button is-small is-warning"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Edit campaign... ")])),_:1},8,["to"])):(0,i.kq)("",!0),c.isGameMaster|e.isOwner?((0,i.wg)(),(0,i.iD)("div",ra,[(0,i.Uk)(" Campaign is ended : "),(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=e=>n.campain.is_ended=e),onChange:t[17]||(t[17]=(...e)=>c.endCampain&&c.endCampain(...e))},null,544),[[a.e8,n.campain.is_ended]])])):(0,i.kq)("",!0),da,(0,i._)("div",null,[ma,(0,i._)("div",ua,[(0,i.wy)((0,i._)("select",{class:"is-small","onUpdate:modelValue":t[18]||(t[18]=e=>n.maxItems=e),onChange:t[19]||(t[19]=e=>c.changeMaxItemsDisplay(n.maxItems))},pa,544),[[a.bM,n.maxItems]])])])])):(0,i.kq)("",!0),ga]),(0,i._)("div",wa,[_a,(0,i._)("div",va,[ya,(0,i._)("div",ba,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.shownItems,(e=>((0,i.wg)(),(0,i.j4)(g,{key:e.id,item:e,user:n.user,campain:n.campain,displayMode:n.itemsDisplayMode,onItemUpdated:t[20]||(t[20]=e=>c.getUpdatedItem(e)),onShowModalDisplay:t[21]||(t[21]=e=>c.showItemModalDisplay(e))},null,8,["item","user","campain","displayMode"])))),128))])]),(0,i._)("div",ka,[(0,i.Wm)(w,{class:"campain-tools",campain:e.$store.state.current_campain,user:e.$store.state.user,refreshSpin:n.refreshSpin,maxItemsDisplay:n.maxItemsDisplay,itemsDisplayMode:n.itemsDisplayMode,collection:n.collection,onRefreshCampain:t[22]||(t[22]=e=>c.refresh_campain()),onChangeMaxItemsDisplay:t[23]||(t[23]=e=>c.changeMaxItemsDisplay(e)),onChangeDisplayMode:t[24]||(t[24]=e=>c.changeDisplayMode(e)),onFilterItems:t[25]||(t[25]=e=>c.filterItems(e)),onSortItems:t[26]||(t[26]=e=>c.sortItems(e)),onSearchItems:t[27]||(t[27]=e=>c.searchItems(e)),onResetSearch:t[28]||(t[28]=t=>e.resetSearch()),onUpdatePC:t[29]||(t[29]=e=>c.updatePC(e)),onDeletePC:t[30]||(t[30]=e=>c.deletePC(e)),onNewCollection:t[31]||(t[31]=e=>c.newCollection(e))},null,8,["campain","user","refreshSpin","maxItemsDisplay","itemsDisplayMode","collection"])])]),n.showItemModalDisplaySwitch?((0,i.wg)(),(0,i.j4)(_,{key:0,item:n.itemToDisplay,user:n.user,campain:n.campain,showIt:n.showItemModalDisplaySwitch,onShowModalDisplay:t[32]||(t[32]=e=>c.showItemModalDisplay(e)),onEditionMode:t[33]||(t[33]=e=>c.showItemModalEditOn(e))},null,8,["item","user","campain","showIt"])):(0,i.kq)("",!0),n.showItemModalEditSwitch?((0,i.wg)(),(0,i.j4)(v,{key:1,item:n.itemToDisplay,user:n.user,campain:n.campain,showIt:n.showItemModalEditSwitch,onShowModalEdit:t[34]||(t[34]=e=>c.showItemModalEditOff(e)),onItemUpdated:t[35]||(t[35]=e=>c.getUpdatedItem(e)),onItemDeleted:t[36]||(t[36]=e=>c.itemDeleted(e))},null,8,["item","user","campain","showIt"])):(0,i.kq)("",!0),n.showCreateItemModal?((0,i.wg)(),(0,i.j4)(y,{key:2,campain:n.campain,showCreateItemModal:n.showCreateItemModal,user:n.user,onCloseCreateItemModal:t[37]||(t[37]=e=>n.showCreateItemModal=!1),onAddItem:c.refresh_campain},null,8,["campain","showCreateItemModal","user","onAddItem"])):(0,i.kq)("",!0),n.showCreatePCModal?((0,i.wg)(),(0,i.j4)(b,{key:3,campain:n.campain,showCreatePCModal:n.showCreatePCModal,user:n.user,onCloseCreatePCModal:t[38]||(t[38]=e=>n.showCreatePCModal=!1),onAddPC:c.refresh_campain},null,8,["campain","showCreatePCModal","user","onAddPC"])):(0,i.kq)("",!0),n.showPCModalEditSwitch?((0,i.wg)(),(0,i.j4)(k,{key:4,showIt:n.showPCModalEditSwitch,pc:e.pcToDisplay,user:n.user,campain:n.campain,onCloseEditPCModal:t[39]||(t[39]=e=>n.showPCModalEditSwitch=!1),onUpdatePC:t[40]||(t[40]=e=>c.updatePC(e)),onDeletePC:t[41]||(t[41]=e=>c.deletePC(e))},null,8,["showIt","pc","user","campain"])):(0,i.kq)("",!0)])}const Ca=e=>((0,i.dD)("data-v-34268ce8"),e=e(),(0,i.Cn)(),e),Da={class:"sidebar"},Ma={class:"top-line"},Ia={class:"campain-title"},Pa=["disabled"],La={class:"is-pulled-right mr-2"},xa={key:0},Sa={key:0},Ta=["src"],$a=Ca((()=>(0,i._)("br",null,null,-1))),Ua={key:2},Aa={class:"m-2"},qa={class:"subtitle"},Ea={class:"is-pulled-right mr-2"},za={key:0,class:"m-2"},Ga={key:1},Ba=Ca((()=>(0,i._)("hr",null,null,-1))),Va=Ca((()=>(0,i._)("label",{class:"label"},"Items display",-1))),Oa={class:"field"},ja={class:"control"},Ha={class:"radio"},Na={class:"radio"},Za=Ca((()=>(0,i._)("label",{class:"label"},"Max items",-1))),Wa={class:"select"},Fa=(0,i.uE)('<option value="all" data-v-34268ce8>--All--</option><option value="10" data-v-34268ce8>10</option><option value="30" data-v-34268ce8>30</option><option value="50" data-v-34268ce8>50</option><option value="100" data-v-34268ce8>100</option>',5),Ka=[Fa],Ya={class:"is-pulled-right mr-2"},Ra={key:1},Qa={key:0},Ja=["onClick"],Xa=["onClick"],ei={key:1},ti={key:2},si={key:3,class:"is-pulled-right"},ai={key:4,class:"is-pulled-right"},ii=Ca((()=>(0,i._)("div",{class:"sep"},null,-1))),li={class:"is-pulled-right mr-2"},oi={key:2},ni=Ca((()=>(0,i._)("label",{class:"label"},"Search",-1))),ci={class:"field"},ri={class:"control button-in-input"},di=Ca((()=>(0,i._)("label",{class:"label"},"Filters",-1))),mi={class:"select"},ui=Ca((()=>(0,i._)("option",null,"--All--",-1))),hi={class:"select"},pi=Ca((()=>(0,i._)("option",{value:"name"},"name",-1))),gi=Ca((()=>(0,i._)("option",{value:"date+"},"date +",-1))),wi=Ca((()=>(0,i._)("option",{value:"date-"},"date -",-1))),_i=Ca((()=>(0,i._)("option",{value:"type"},"type",-1))),vi=[pi,gi,wi,_i];function yi(e,t,s,o,n,c){const r=(0,i.up)("fa"),d=(0,i.up)("RatingWidget"),m=(0,i.up)("OfficialMark"),u=(0,i.up)("router-link"),h=(0,i.up)("CreateItemModal"),p=(0,i.up)("PCModalCreate"),g=(0,i.up)("PCModalDisplay"),w=(0,i.up)("PCModalEdit");return(0,i.wg)(),(0,i.iD)("div",Da,[(0,i._)("div",Ma,[(0,i._)("span",Ia,(0,l.zw)(c.charLimit(s.campain.title)),1),(0,i._)("button",{class:"button is-success is-small mb-2",disabled:s.refreshSpin,onClick:t[0]||(t[0]=(...e)=>c.refreshCampain&&c.refreshCampain(...e))},[(0,i.Wm)(r,{icon:"arrows-rotate",class:(0,l.C_)(["mr-2",{spinner:s.refreshSpin}])},null,8,["class"]),(0,i.Uk)(" refresh ")],8,Pa)]),(0,i._)("div",{onClick:t[1]||(t[1]=e=>n.showInfo=!n.showInfo),class:"topic"},[(0,i.Uk)("Campain infos "),(0,i._)("div",La,[n.showInfo?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),n.showInfo?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(r,{key:1,icon:"angle-right"}))])]),n.showInfo?((0,i.wg)(),(0,i.iD)("div",xa,[s.campain.image_url?((0,i.wg)(),(0,i.iD)("figure",Sa,[(0,i._)("img",{src:s.campain.image_url},null,8,Ta)])):(0,i.kq)("",!0),$a,s.collection?((0,i.wg)(),(0,i.j4)(d,{key:1,collection:s.collection,onNewCollection:t[2]||(t[2]=t=>e.$emit("newCollection",t))},null,8,["collection"])):(0,i.kq)("",!0),s.campain.is_official?((0,i.wg)(),(0,i.iD)("span",Ua,[(0,i.Wm)(m,{collection:s.campain},null,8,["collection"])])):(0,i.kq)("",!0),(0,i._)("div",Aa,[(0,i.Wm)(u,{to:{name:"table",params:{id:n.table.id}},class:"button is-small is-secondary mr-2"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(c.charLimit(n.table.name)),1)])),_:1},8,["to"]),(0,i._)("span",qa,"Mastered by "+(0,l.zw)(c.charLimit(s.campain.game_master.username)),1)])])):(0,i.kq)("",!0),(0,i._)("div",null,[(0,i._)("div",{onClick:t[3]||(t[3]=e=>n.showSettings=!n.showSettings),class:"topic"},[(0,i.Uk)("Settings "),(0,i._)("div",Ea,[n.showSettings?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),n.showSettings?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(r,{key:1,icon:"angle-right"}))])]),n.showSettings?((0,i.wg)(),(0,i.iD)("div",za,[c.isGameMaster?((0,i.wg)(),(0,i.j4)(u,{key:0,to:{name:"CampainEditView",params:{id:s.campain.id}},class:"m-2 button is-small is-warning"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Edit campain... ")])),_:1},8,["to"])):(0,i.kq)("",!0),c.isGameMaster|c.isOwner?((0,i.wg)(),(0,i.iD)("div",Ga,[(0,i.Uk)(" Campain is ended : "),(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=e=>n.is_ended=e),onChange:t[5]||(t[5]=(...e)=>c.endCampain&&c.endCampain(...e))},null,544),[[a.e8,n.is_ended]]),Ba])):(0,i.kq)("",!0),Va,(0,i._)("div",Oa,[(0,i._)("div",ja,[(0,i._)("label",Ha,[(0,i.wy)((0,i._)("input",{type:"radio",name:"Settings",value:"mini","onUpdate:modelValue":t[6]||(t[6]=e=>n.displayMode=e),onChange:t[7]||(t[7]=(...e)=>c.changeDisplayMode&&c.changeDisplayMode(...e))},null,544),[[a.G2,n.displayMode]]),(0,i.Uk)(" Minimal ")]),(0,i._)("label",Na,[(0,i.wy)((0,i._)("input",{type:"radio",name:"Settings",value:"image","onUpdate:modelValue":t[8]||(t[8]=e=>n.displayMode=e),onChange:t[9]||(t[9]=(...e)=>c.changeDisplayMode&&c.changeDisplayMode(...e))},null,544),[[a.G2,n.displayMode]]),(0,i.Uk)(" With Images ")])])]),Za,(0,i._)("div",Wa,[(0,i.wy)((0,i._)("select",{class:"is-small","onUpdate:modelValue":t[10]||(t[10]=e=>n.maxItems=e),onChange:t[11]||(t[11]=(...e)=>c.changeMaxItemsDisplay&&c.changeMaxItemsDisplay(...e))},Ka,544),[[a.bM,n.maxItems]])])])):(0,i.kq)("",!0)]),(0,i._)("div",{onClick:t[12]||(t[12]=e=>n.showPlayers=!n.showPlayers),class:"topic"},[(0,i.Uk)("Player Characters "),(0,i._)("div",Ya,[n.showPlayers?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),n.showPlayers?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(r,{key:1,icon:"angle-right"}))])]),n.showPlayers?((0,i.wg)(),(0,i.iD)("div",Ra,[c.isGameMaster?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"button is-small is-success m-2",onClick:t[13]||(t[13]=(...e)=>c.toggleCreatePCModal&&c.toggleCreatePCModal(...e))},"+ New PC")):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.campain.pcs,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id},[c.isGameMaster|!e.locked?((0,i.wg)(),(0,i.iD)("div",Qa,[(0,i._)("div",{class:"line-hoverable",onClick:t=>c.showPC(e)},[c.isGameMaster?((0,i.wg)(),(0,i.iD)("span",{key:0,class:"mr-2",onClick:t=>c.togglePcLock(e),onMouseover:t[14]||(t[14]=e=>n.PCModalAvailable=!1),onMouseleave:t[15]||(t[15]=e=>n.PCModalAvailable=!0)},[e.locked?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"eye-slash",style:{color:"red"}})):((0,i.wg)(),(0,i.j4)(r,{key:1,icon:"eye",style:{color:"green"}}))],40,Xa)):(0,i.kq)("",!0),e.name?((0,i.wg)(),(0,i.iD)("span",ei,(0,l.zw)(c.charLimit(e.name)),1)):(0,i.kq)("",!0),e.name?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",ti,"--- ")),null!=e.user?((0,i.wg)(),(0,i.iD)("span",si,(0,l.zw)(c.charLimit(e.user.username)),1)):((0,i.wg)(),(0,i.iD)("span",ai,"---"))],8,Ja),ii])):(0,i.kq)("",!0)])))),128))])):(0,i.kq)("",!0),(0,i._)("div",{onClick:t[16]||(t[16]=e=>n.showItemTools=!n.showItemTools),class:"topic"},[(0,i._)("div",li,[n.showItemTools?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),n.showItemTools?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(r,{key:1,icon:"angle-right"}))]),(0,i.Uk)(" Item tools ")]),n.showItemTools?((0,i.wg)(),(0,i.iD)("div",oi,[(0,i._)("button",{class:"button is-small is-success m-2",onClick:t[17]||(t[17]=(...e)=>c.toggleCreateItemModal&&c.toggleCreateItemModal(...e))},"+ New Item"),ni,(0,i._)("div",ci,[(0,i._)("div",ri,[(0,i.wy)((0,i._)("input",{class:"input is-small",type:"text",placeholder:"Search by name","onUpdate:modelValue":t[18]||(t[18]=e=>n.searchBy=e),onKeyup:[t[19]||(t[19]=(0,a.D2)((t=>{n.searchBy="",e.$emit("searchItems",n.searchBy)}),["enter"])),t[20]||(t[20]=t=>e.$emit("searchItems",n.searchBy))]},null,544),[[a.nr,n.searchBy]]),(0,i._)("button",{onClick:t[21]||(t[21]=t=>{n.searchBy="",e.$emit("searchItems",n.searchBy)})},"reset")])]),di,(0,i._)("div",mi,[(0,i.wy)((0,i._)("select",{class:"is-small","onUpdate:modelValue":t[22]||(t[22]=e=>n.filterBy=e),onChange:t[23]||(t[23]=t=>e.$emit("filterItems",n.filterBy))},[ui,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.itemTypes,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e},(0,l.zw)(e),1)))),128))],544),[[a.bM,n.filterBy]])]),(0,i._)("div",hi,[(0,i.wy)((0,i._)("select",{class:"is-small","onUpdate:modelValue":t[24]||(t[24]=e=>n.sortBy=e),onClick:t[25]||(t[25]=t=>e.$emit("sortItems",n.sortBy))},vi,512),[[a.bM,n.sortBy]])])])):(0,i.kq)("",!0),n.showCreateItemModal?((0,i.wg)(),(0,i.j4)(h,{key:3,campain:s.campain,showCreateItemModal:n.showCreateItemModal,user:s.user,onCloseCreateItemModal:c.toggleCreateItemModal,onAddItem:c.addItem},null,8,["campain","showCreateItemModal","user","onCloseCreateItemModal","onAddItem"])):(0,i.kq)("",!0),n.showCreatePCModal?((0,i.wg)(),(0,i.j4)(p,{key:4,campain:s.campain,showCreatePCModal:n.showCreatePCModal,user:s.user,onCloseCreatePCModal:c.toggleCreatePCModal,onAddPC:c.addPC},null,8,["campain","showCreatePCModal","user","onCloseCreatePCModal","onAddPC"])):(0,i.kq)("",!0),n.showPCModalDisplaySwitch?((0,i.wg)(),(0,i.j4)(g,{key:5,showIt:n.showPCModalDisplaySwitch,pc:n.pcToDisplay,user:s.user,campain:s.campain,onClosePCModalDisplay:t[26]||(t[26]=e=>n.showPCModalDisplaySwitch=!n.showPCModalDisplaySwitch),onEditionModePC:t[27]||(t[27]=e=>c.editionModePC(e))},null,8,["showIt","pc","user","campain"])):(0,i.kq)("",!0),n.showPCModalEditSwitch?((0,i.wg)(),(0,i.j4)(w,{key:6,showIt:n.showPCModalEditSwitch,pc:n.pcToDisplay,user:s.user,campain:s.campain,onCloseEditPCModal:t[28]||(t[28]=e=>n.showPCModalEditSwitch=!n.showPCModalEditSwitch),onUpdatePC:t[29]||(t[29]=e=>c.updatePC(e)),onDeletePC:t[30]||(t[30]=e=>c.deletePC(e))},null,8,["showIt","pc","user","campain"])):(0,i.kq)("",!0)])}const bi=e=>((0,i.dD)("data-v-d33dd85a"),e=e(),(0,i.Cn)(),e),ki={class:"modal-card"},fi={class:"modal-card-head"},Ci=bi((()=>(0,i._)("p",{class:"modal-card-title"},"Create a new item",-1))),Di={class:"modal-card-body"},Mi={class:"control"},Ii=bi((()=>(0,i._)("label",{class:"label"},"Name",-1))),Pi=bi((()=>(0,i._)("label",{class:"label"},"Image url",-1))),Li={key:0},xi=bi((()=>(0,i._)("label",{class:"label"},"Type",-1))),Si={class:"select"},Ti={class:"is-flex is-justify-content-space-between m-2"},$i=bi((()=>(0,i._)("label",{class:"label"},"PC's infos",-1))),Ui=["hidden"],Ai=["hidden"],qi={key:1},Ei={class:"is-flex is-justify-content-space-between m-2"},zi=bi((()=>(0,i._)("label",{class:"label"},"GM's infos",-1))),Gi=["hidden"],Bi=["hidden"],Vi={class:"modal-card-foot"},Oi={href:"MDGuide.html",class:"info-icon tooltip",target:"_blank"},ji=bi((()=>(0,i._)("span",{class:"tooltiptext"},"Edition tips",-1)));function Hi(e,t,s,o,n,c){const r=(0,i.up)("fa");return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)(["modal",{"is-active":s.showCreateItemModal}])},[(0,i._)("div",{class:"modal-background",onClick:t[0]||(t[0]=t=>e.$emit("closeCreateItemModal"))}),(0,i._)("div",ki,[(0,i._)("header",fi,[Ci,(0,i._)("button",{class:"delete","aria-label":"close",onClick:t[1]||(t[1]=t=>e.$emit("closeCreateItemModal"))})]),(0,i._)("section",Di,[(0,i._)("form",null,[(0,i._)("div",Mi,[Ii,(0,i.wy)((0,i._)("input",{class:"input",type:"text",placeholder:"Name","onUpdate:modelValue":t[2]||(t[2]=e=>n.itemName=e)},null,512),[[a.nr,n.itemName]]),Pi,(0,i.wy)((0,i._)("input",{class:"input",type:"text",placeholder:"image url","onUpdate:modelValue":t[3]||(t[3]=e=>n.itemImageUrl=e)},null,512),[[a.nr,n.itemImageUrl]]),c.isGameMaster?((0,i.wg)(),(0,i.iD)("div",Li,[xi,(0,i._)("div",Si,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.itemType=e)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.itemTypes,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e},(0,l.zw)(e),1)))),128))],512),[[a.bM,n.itemType]])])])):(0,i.kq)("",!0),(0,i._)("div",Ti,[$i,(0,i._)("button",{class:"is-small",onClick:t[5]||(t[5]=e=>c.MDPreview("pcsInfos"))},"preview")]),(0,i._)("div",{hidden:n.showpcsPreview},[(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Informations for the players",id:"pcsInfos","onUpdate:modelValue":t[6]||(t[6]=e=>n.itemPCsInfos=e)},null,512),[[a.nr,n.itemPCsInfos]])],8,Ui),(0,i._)("div",{id:"pcsInfosPreview",onClick:t[7]||(t[7]=e=>c.MDPreview("pcsInfos")),hidden:!n.showpcsPreview,class:"content border p-1"},null,8,Ai),c.isGameMaster?((0,i.wg)(),(0,i.iD)("div",qi,[(0,i._)("div",Ei,[zi,(0,i._)("button",{class:"is-small",onClick:t[8]||(t[8]=e=>c.MDPreview("gmInfos"))},"preview")]),(0,i._)("div",{hidden:n.showgmPreview},[(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Informations for the GM only",id:"gmInfos","onUpdate:modelValue":t[9]||(t[9]=e=>n.itemGmInfos=e)},null,512),[[a.nr,n.itemGmInfos]])],8,Gi),(0,i._)("div",{id:"gmInfosPreview",onClick:t[10]||(t[10]=e=>c.MDPreview("gmInfos")),hidden:!n.showgmPreview,class:"content border p-1"},null,8,Bi)])):(0,i.kq)("",!0)])])]),(0,i._)("footer",Vi,[(0,i._)("button",{class:"button is-success is-small",onClick:t[11]||(t[11]=(0,a.iM)((e=>c.onSubmit()),["prevent"]))},"Save"),(0,i._)("button",{class:"button is-small",onClick:t[12]||(t[12]=t=>e.$emit("closeCreateItemModal"))},"Cancel"),(0,i._)("a",Oi,[(0,i.Wm)(r,{icon:"circle-info"}),ji]),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.errors,(e=>((0,i.wg)(),(0,i.iD)("p",{key:e,style:{color:"red"}},(0,l.zw)(e),1)))),128))])])])],2)}var Ni={name:"CreateItemModal",props:["showCreateItemModal","campain","user"],computed:{isGameMaster(){return this.user.id===this.campain.game_master.id}},data(){return{itemTypes:["NPC","LOCATION","ORGANIZATION","EVENT","NOTE","RECAP","MISC","MEMO"],showpcsPreview:!1,showgmPreview:!1,errors:[],itemName:"",itemType:"MEMO",itemImageUrl:"",itemPCsInfos:"",itemGmInfos:"",item:{}}},methods:{onSubmit(){this.errors=[],this.isGameMaster||(this.itemType="MEMO"),null!==this.itemType?(0,x.Z)({method:"post",url:"/campains/items/create/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{campainId:this.campain.id,title:this.itemName,type:this.itemType,image_url:this.itemImageUrl,pcsInfos:this.itemPCsInfos,gmInfos:this.itemGmInfos}}).then((e=>{this.$emit("addItem"),this.$emit("closeCreateItemModal")})).catch((e=>{console.log(e)})):this.errors.push("Type required.")},MDPreview(e){"pcsInfos"===e?this.showpcsPreview=!this.showpcsPreview:"gmInfos"===e&&(this.showgmPreview=!this.showgmPreview);let t=document.getElementById(e),s=t.value;this.MDPreviewContent=marked.parse(s);let a=document.getElementById(e+"Preview");a.innerHTML=this.MDPreviewContent}}};const Zi=(0,T.Z)(Ni,[["render",Hi],["__scopeId","data-v-d33dd85a"]]);var Wi=Zi;const Fi=e=>((0,i.dD)("data-v-a11614e4"),e=e(),(0,i.Cn)(),e),Ki={class:"modal-card"},Yi={class:"modal-card-head"},Ri=Fi((()=>(0,i._)("p",{class:"modal-card-title"},"Create a new PC",-1))),Qi={class:"modal-card-body"},Ji={class:"control"},Xi={key:0},el=Fi((()=>(0,i._)("label",{class:"label"},"Player",-1))),tl={class:"select"},sl=Fi((()=>(0,i._)("option",{value:""},"None",-1))),al=["value"],il=Fi((()=>(0,i._)("label",{class:"label"},"Name",-1))),ll=Fi((()=>(0,i._)("label",{class:"label"},"Image url",-1))),ol={class:"is-flex is-justify-content-space-between m-2"},nl=Fi((()=>(0,i._)("label",{class:"label"},"Other players infos",-1))),cl=["hidden"],rl=["hidden"],dl={key:1},ml={class:"is-flex is-justify-content-space-between m-2"},ul=Fi((()=>(0,i._)("label",{class:"label"},"Player's infos",-1))),hl=["hidden"],pl=["hidden"],gl={key:2},wl={class:"is-flex is-justify-content-space-between m-2"},_l=Fi((()=>(0,i._)("label",{class:"label"},"GM's infos",-1))),vl=["hidden"],yl=["hidden"],bl={class:"modal-card-foot"},kl={href:"MDGuide.html",class:"info-icon tooltip",target:"_blank"},fl=Fi((()=>(0,i._)("span",{class:"tooltiptext"},"Edition tips",-1)));function Cl(e,t,s,o,n,c){const r=(0,i.up)("fa");return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)(["modal mt-6",{"is-active":s.showCreatePCModal}])},[(0,i._)("div",{class:"modal-background",onClick:t[0]||(t[0]=t=>e.$emit("closeCreatePCModal"))}),(0,i._)("div",Ki,[(0,i._)("header",Yi,[Ri,(0,i._)("button",{class:"delete","aria-label":"close",onClick:t[1]||(t[1]=t=>e.$emit("closeCreatePCModal"))})]),(0,i._)("section",Qi,[(0,i._)("form",null,[(0,i._)("div",Ji,[c.isGameMaster?((0,i.wg)(),(0,i.iD)("div",Xi,[el,(0,i._)("div",tl,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.player_id=e)},[sl,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.players,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,l.zw)(c.charLimit(e.username)),9,al)))),128))],512),[[a.bM,n.player_id]])])])):(0,i.kq)("",!0),il,(0,i.wy)((0,i._)("input",{class:"input",type:"text",placeholder:"Name","onUpdate:modelValue":t[3]||(t[3]=e=>n.name=e)},null,512),[[a.nr,n.name]]),ll,(0,i.wy)((0,i._)("input",{class:"input",type:"text",placeholder:"image url","onUpdate:modelValue":t[4]||(t[4]=e=>n.image_url=e)},null,512),[[a.nr,n.image_url]]),(0,i._)("div",ol,[nl,(0,i._)("button",{class:"is-small",onClick:t[5]||(t[5]=e=>c.MDPreview("pcsInfos"))},"preview")]),(0,i._)("div",{hidden:n.showpcsPreview},[(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Informations for the other players",id:"pcsInfos","onUpdate:modelValue":t[6]||(t[6]=e=>n.pcs_infos=e)},null,512),[[a.nr,n.pcs_infos]])],8,cl),(0,i._)("div",{id:"pcsInfosPreview",onClick:t[7]||(t[7]=e=>c.MDPreview("pcsInfos")),hidden:!n.showpcsPreview,class:"content border p-1"},null,8,rl),c.isGameMaster|c.isPlayer?((0,i.wg)(),(0,i.iD)("div",dl,[(0,i._)("div",ml,[ul,(0,i._)("button",{class:"is-small",onClick:t[8]||(t[8]=e=>c.MDPreview("playerInfos"))},"preview")]),(0,i._)("div",{hidden:n.showplayerPreview},[(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Informations for the player only",id:"playerInfos","onUpdate:modelValue":t[9]||(t[9]=e=>n.player_infos=e)},null,512),[[a.nr,n.player_infos]])],8,hl),(0,i._)("div",{id:"playerInfosPreview",onClick:t[10]||(t[10]=e=>c.MDPreview("playerInfos")),hidden:!n.showplayerPreview,class:"content border p-1"},null,8,pl)])):(0,i.kq)("",!0),c.isGameMaster?((0,i.wg)(),(0,i.iD)("div",gl,[(0,i._)("div",wl,[_l,(0,i._)("button",{class:"is-small",onClick:t[11]||(t[11]=e=>c.MDPreview("gmInfos"))},"preview")]),(0,i._)("div",{hidden:n.showgmPreview},[(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Informations for the GM only",id:"gmInfos","onUpdate:modelValue":t[12]||(t[12]=e=>n.gm_infos=e)},null,512),[[a.nr,n.gm_infos]])],8,vl),(0,i._)("div",{id:"gmInfosPreview",onClick:t[13]||(t[13]=e=>c.MDPreview("gmInfos")),hidden:!n.showgmPreview,class:"content border p-1"},null,8,yl)])):(0,i.kq)("",!0)])])]),(0,i._)("footer",bl,[(0,i._)("button",{class:"button is-success is-small",onClick:t[14]||(t[14]=(0,a.iM)((e=>c.onSubmit()),["prevent"]))},"Save"),(0,i._)("button",{class:"button is-small",onClick:t[15]||(t[15]=t=>e.$emit("closeCreatePCModal"))},"Cancel"),(0,i._)("a",kl,[(0,i.Wm)(r,{icon:"circle-info"}),fl]),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.errors,(e=>((0,i.wg)(),(0,i.iD)("p",{key:e,style:{color:"red"}},(0,l.zw)(e),1)))),128))])])])],2)}var Dl={name:"PCModalCreate",props:["user","campain","showCreatePCModal"],computed:{isGameMaster(){return this.user.id===this.campain.game_master.id},isPlayer(){return null!==this.player_id&&this.user.id===this.player_id}},data(){return{showpcsPreview:!1,showplayerPreview:!1,showgmPreview:!1,errors:[],name:"",image_url:"",player_id:null,players:[],pcs_infos:"",player_infos:"",gm_infos:""}},beforeMount(){this.players=this.campain.table.owners.concat(this.campain.table.guests)},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},onSubmit(){""===this.player_id&&(this.player_id=null);let e={campain_id:this.campain.id,name:this.name,image_url:this.image_url,player_id:this.player_id,data_pc:this.pcs_infos,data_player:this.player_infos,data_gm:this.gm_infos};(0,x.Z)({method:"post",url:"/campains/pc/create/",data:e,headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.$emit("closeCreatePCModal"),this.$emit("addPC")})).catch((e=>{console.log(e.response),this.errors=e.response.data}))},MDPreview(e){"pcsInfos"===e?this.showpcsPreview=!this.showpcsPreview:"gmInfos"===e?this.showgmPreview=!this.showgmPreview:"playerInfos"===e&&(this.showplayerPreview=!this.showplayerPreview);let t=document.getElementById(e),s=t.value;this.MDPreviewContent=marked.parse(s);let a=document.getElementById(e+"Preview");a.innerHTML=this.MDPreviewContent}}};const Ml=(0,T.Z)(Dl,[["render",Cl],["__scopeId","data-v-a11614e4"]]);var Il=Ml;const Pl=e=>((0,i.dD)("data-v-5456861a"),e=e(),(0,i.Cn)(),e),Ll={class:"modal-card"},xl={class:"modal-card-head"},Sl={class:"columns"},Tl={class:"column is-8"},$l={class:"modal-card-title"},Ul={class:"column is-4 mb-4"},Al={class:"items-right"},ql={class:"modal-card-body"},El=["innerHTML"],zl={key:0},Gl=["innerHTML"],Bl={key:2},Vl=["innerHTML"],Ol={key:4},jl=Pl((()=>(0,i._)("hr",null,null,-1))),Hl=["src"],Nl=Pl((()=>(0,i._)("footer",{class:"modal-card-foot"},null,-1)));function Zl(e,t,s,a,o,n){return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)(["modal mt-6",{"is-active":s.showIt}])},[(0,i._)("div",{class:"modal-background",onClick:t[0]||(t[0]=t=>e.$emit("closePCModalDisplay",s.pc))}),(0,i._)("div",Ll,[(0,i._)("header",xl,[(0,i._)("div",Sl,[(0,i._)("div",Tl,[(0,i._)("span",$l,(0,l.zw)(n.charLimit(s.pc.name)),1)]),(0,i._)("div",Ul,[(0,i._)("div",Al,[n.isGameMaster|n.isPlayer?((0,i.wg)(),(0,i.iD)("span",{key:0,class:"button is-small is-success mr-2",onClick:t[1]||(t[1]=(...e)=>n.editionMode&&n.editionMode(...e))}," Edit ")):(0,i.kq)("",!0),(0,i._)("button",{class:"delete","aria-label":"close",onClick:t[2]||(t[2]=t=>e.$emit("closePCModalDisplay",s.pc))})])])])]),(0,i._)("section",ql,[(0,i._)("div",{class:"content",id:"data_pc",innerHTML:n.dataPC},null,8,El),n.isGameMaster|n.isPlayer?((0,i.wg)(),(0,i.iD)("hr",zl)):(0,i.kq)("",!0),n.isGameMaster|n.isPlayer?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"content",id:"data_player",innerHTML:n.dataPlayer},null,8,Gl)):(0,i.kq)("",!0),n.isGameMaster?((0,i.wg)(),(0,i.iD)("hr",Bl)):(0,i.kq)("",!0),n.isGameMaster?((0,i.wg)(),(0,i.iD)("div",{key:3,class:"content",id:"data_gm",innerHTML:n.dataGM},null,8,Vl)):(0,i.kq)("",!0),s.pc.image_url?((0,i.wg)(),(0,i.iD)("div",Ol,[jl,(0,i._)("img",{src:s.pc.image_url,alt:"[image]",class:"item-image"},null,8,Hl)])):(0,i.kq)("",!0)]),Nl])],2)}var Wl={name:"PCModalDisplay",props:["pc","user","campain","showIt"],mounted(){let e=document.getElementsByTagName("p");for(let t=0;t<e.length;t++)e[t].style.wordBreak="keep-all"},computed:{isGameMaster(){return this.user.id===this.campain.game_master.id},isPlayer(){return null!==this.pc.user&&this.user.id===this.pc.user.id},dataPC(){return null===this.pc.data_pc|"undefined"===this.pc.data_pc?"":marked.parse(this.pc.data_pc)},dataPlayer(){return null===this.pc.data_player|"undefined"===this.pc.data_player?"":this.isPlayer|this.isGameMaster?marked.parse(this.pc.data_player):""},dataGM(){return this.isGameMaster?marked.parse(this.pc.data_gm):""}},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},editionMode(e){this.$emit("showPCModalDisplay",this.pc),this.$emit("editionModePC",this.pc)}}};const Fl=(0,T.Z)(Wl,[["render",Zl],["__scopeId","data-v-5456861a"]]);var Kl=Fl;const Yl=e=>((0,i.dD)("data-v-d19ec1e2"),e=e(),(0,i.Cn)(),e),Rl={class:"modal-card"},Ql={class:"modal-card-head"},Jl={class:"modal-card-title"},Xl={class:"modal-card-body"},eo={class:"control"},to={key:0},so=Yl((()=>(0,i._)("label",{class:"label"},"Player",-1))),ao={class:"select"},io=Yl((()=>(0,i._)("option",{value:""},"None",-1))),lo=["value"],oo=Yl((()=>(0,i._)("label",{class:"label"},"Name",-1))),no=Yl((()=>(0,i._)("label",{class:"label"},"Image url",-1))),co={class:"is-flex is-justify-content-space-between m-2"},ro=Yl((()=>(0,i._)("label",{class:"label"},"Other players infos",-1))),mo=["hidden"],uo=["hidden"],ho={key:1},po={class:"is-flex is-justify-content-space-between m-2"},go=Yl((()=>(0,i._)("label",{class:"label"},"Player's infos",-1))),wo=["hidden"],_o=["hidden"],vo={key:2},yo={class:"is-flex is-justify-content-space-between m-2"},bo=Yl((()=>(0,i._)("label",{class:"label"},"GM's infos",-1))),ko=["hidden"],fo=["hidden"],Co={class:"modal-card-foot"},Do={class:"columns"},Mo={class:"column"},Io={href:"MDGuide.html",class:"info-icon tooltip",target:"_blank"},Po=Yl((()=>(0,i._)("span",{class:"tooltiptext"},"Edition tips",-1))),Lo={class:"column"},xo={key:0},So=["disabled"],To={class:"column"};function $o(e,t,s,o,n,c){const r=(0,i.up)("fa");return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)(["modal mt-6",{"is-active":s.showIt}])},[(0,i._)("div",{class:"modal-background",onClick:t[0]||(t[0]=t=>e.$emit("closeEditPCModal"))}),(0,i._)("div",Rl,[(0,i._)("header",Ql,[(0,i._)("p",Jl,(0,l.zw)(c.charLimit(n.name)),1),(0,i._)("button",{class:"delete","aria-label":"close",onClick:t[1]||(t[1]=t=>e.$emit("closeEditPCModal"))})]),(0,i._)("section",Xl,[(0,i._)("form",null,[(0,i._)("div",eo,[c.isGameMaster?((0,i.wg)(),(0,i.iD)("div",to,[so,(0,i._)("div",ao,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.player_id=e)},[io,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.players,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,l.zw)(c.charLimit(e.username)),9,lo)))),128))],512),[[a.bM,n.player_id]])])])):(0,i.kq)("",!0),oo,(0,i.wy)((0,i._)("input",{class:"input",type:"text",placeholder:"Name","onUpdate:modelValue":t[3]||(t[3]=e=>n.name=e)},null,512),[[a.nr,n.name]]),no,(0,i.wy)((0,i._)("input",{class:"input",type:"text",placeholder:"image url","onUpdate:modelValue":t[4]||(t[4]=e=>n.image_url=e)},null,512),[[a.nr,n.image_url]]),(0,i._)("div",co,[ro,(0,i._)("button",{class:"is-small",onClick:t[5]||(t[5]=e=>c.MDPreview("pcsInfos"))},"preview")]),(0,i._)("div",{hidden:n.showpcsPreview},[(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Informations for the other players",id:"pcsInfos","onUpdate:modelValue":t[6]||(t[6]=e=>n.pcs_infos=e)},null,512),[[a.nr,n.pcs_infos]])],8,mo),(0,i._)("div",{id:"pcsInfosPreview",onClick:t[7]||(t[7]=e=>c.MDPreview("pcsInfos")),hidden:!n.showpcsPreview,class:"content border p-1"},null,8,uo),c.isGameMaster|c.isPlayer?((0,i.wg)(),(0,i.iD)("div",ho,[(0,i._)("div",po,[go,(0,i._)("button",{class:"is-small",onClick:t[8]||(t[8]=e=>c.MDPreview("playerInfos"))},"preview")]),(0,i._)("div",{hidden:n.showplayerPreview},[(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Informations for the player only",id:"playerInfos","onUpdate:modelValue":t[9]||(t[9]=e=>n.player_infos=e)},null,512),[[a.nr,n.player_infos]])],8,wo),(0,i._)("div",{id:"playerInfosPreview",onClick:t[10]||(t[10]=e=>c.MDPreview("playerInfos")),hidden:!n.showplayerPreview,class:"content border p-1"},null,8,_o)])):(0,i.kq)("",!0),c.isGameMaster?((0,i.wg)(),(0,i.iD)("div",vo,[(0,i._)("div",yo,[bo,(0,i._)("button",{class:"is-small",onClick:t[11]||(t[11]=e=>c.MDPreview("gmInfos"))},"preview")]),(0,i._)("div",{hidden:n.showgmPreview},[(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Informations for the GM only",id:"gmInfos","onUpdate:modelValue":t[12]||(t[12]=e=>n.gm_infos=e)},null,512),[[a.nr,n.gm_infos]])],8,ko),(0,i._)("div",{id:"gmInfosPreview",onClick:t[13]||(t[13]=e=>c.MDPreview("gmInfos")),hidden:!n.showgmPreview,class:"content border p-1"},null,8,fo)])):(0,i.kq)("",!0)])])]),(0,i._)("footer",Co,[(0,i._)("div",Do,[(0,i._)("div",Mo,[(0,i._)("button",{class:"button is-success is-small mb-2",onClick:t[14]||(t[14]=(0,a.iM)((e=>c.onSubmit()),["prevent"]))},"Save"),(0,i._)("button",{class:"button is-small",onClick:t[15]||(t[15]=t=>e.$emit("closeEditPCModal"))},"Cancel"),(0,i._)("a",Io,[(0,i.Wm)(r,{icon:"circle-info"}),Po])]),(0,i._)("div",Lo,[c.isGameMaster?((0,i.wg)(),(0,i.iD)("div",xo,[(0,i._)("button",{class:"button is-warning is-small mb-2",onClick:t[16]||(t[16]=e=>n.deleteActive=!n.deleteActive)},"delete"),(0,i._)("button",{class:"button is-danger is-small mb-2",disabled:n.deleteActive,onClick:t[17]||(t[17]=(...e)=>c.deletePC&&c.deletePC(...e))}," confirm delete ",8,So)])):(0,i.kq)("",!0)]),(0,i._)("div",To,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.errors,(e=>((0,i.wg)(),(0,i.iD)("p",{key:e,style:{color:"red"}},(0,l.zw)(e),1)))),128))])])])])],2)}var Uo={name:"PCModalEdit",props:["user","pc","showIt","campain","showEditPCModal"],computed:{isGameMaster(){return this.user.id===this.campain.game_master.id},isPlayer(){return null!==this.player_id&&this.user.id===this.player_id}},data(){return{showpcsPreview:!1,showplayerPreview:!1,showgmPreview:!1,errors:[],name:"",image_url:"",player_id:null,players:[],pcs_infos:"",player_infos:"",gm_infos:"",id:null,deleteActive:!0}},beforeMount(){this.players=this.campain.table.owners.concat(this.campain.table.guests).concat(this.campain.table.game_masters),this.name=this.pc.name,this.image_url=this.pc.image_url,null!==this.pc.user?this.player_id=this.pc.user.id:this.player_id=null,this.pcs_infos=this.pc.data_pc,this.player_infos=this.pc.data_player,this.gm_infos=this.pc.data_gm,this.id=this.pc.id},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},deletePC(){this.errors=[],(0,x.Z)({method:"delete",url:"/campains/pc/delete/",data:{id:this.id,campain_id:this.campain.id},headers:{Authorization:`Token ${this.$store.state.token}`}}).then(this.$emit("deletePC",this.id),this.$emit("closeEditPCModal")).catch((e=>{console.log(e.response.data)}))},onSubmit(){""===this.player_id&&(this.player_id=null);let e={id:this.id,campain_id:this.campain.id,name:this.name,image_url:this.image_url,player_id:this.player_id,data_pc:this.pcs_infos,data_player:this.player_infos,data_gm:this.gm_infos};(0,x.Z)({method:"put",url:"/campains/pc/update/",data:e,headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.$emit("updatePC",e.data),this.$emit("closeEditPCModal")})).catch((e=>{console.log(e.response.data.message),this.errors.push(e.response.data.message)}))},MDPreview(e){"pcsInfos"===e?this.showpcsPreview=!this.showpcsPreview:"gmInfos"===e?this.showgmPreview=!this.showgmPreview:"playerInfos"===e&&(this.showplayerPreview=!this.showplayerPreview);let t=document.getElementById(e),s=t.value;this.MDPreviewContent=marked.parse(s);let a=document.getElementById(e+"Preview");a.innerHTML=this.MDPreviewContent}}};const Ao=(0,T.Z)(Uo,[["render",$o],["__scopeId","data-v-d19ec1e2"]]);var qo=Ao;const Eo=["href"],zo={key:1};function Go(e,t,s,a,o,n){return(0,i.wg)(),(0,i.iD)("span",{class:(0,l.C_)(["official m-2",{"hoverable-official":n.has_url}])},[n.has_url?((0,i.wg)(),(0,i.iD)("a",{key:0,href:s.collection.official_url,target:"_blank",style:{"text-decoration":"none"}}," official ",8,Eo)):((0,i.wg)(),(0,i.iD)("span",zo," official "))],2)}var Bo={name:"OfficialMark",props:["collection"],computed:{has_url(){return null!==this.collection.official_url}}};const Vo=(0,T.Z)(Bo,[["render",Go],["__scopeId","data-v-1e574f7e"]]);var Oo=Vo;const jo=e=>((0,i.dD)("data-v-05935f40"),e=e(),(0,i.Cn)(),e),Ho=jo((()=>(0,i._)("br",null,null,-1))),No={key:0,class:"ml-5"};function Zo(e,t,s,a,o,n){const c=(0,i.up)("fa");return null!==s.collection?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,l.C_)(["rating-widget",{"can-vote":!s.collection.voted}])},[(0,i._)("span",null,"collection by "+(0,l.zw)(n.charLimit(s.collection.author)),1),Ho,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.starList,(e=>((0,i.wg)(),(0,i.iD)("span",{key:e.id},[(0,i.Wm)(c,{icon:e.icon,class:(0,l.C_)(["star",{"star-full":e.on,hoverable:!s.collection.voted}]),onClick:t=>n.vote(e.id)},null,8,["icon","class","onClick"])])))),128)),(0,i._)("span",null,(0,l.zw)(s.collection.rating)+"("+(0,l.zw)(s.collection.votes_count)+")",1),s.collection.voted?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",No,"please rate it"))],2)):(0,i.kq)("",!0)}var Wo={name:"RatingWidget",data(){return{keys_base:0,rating:0,starList:[]}},props:["collection"],computed:{new_key(){return this.keys_base+=1,this.keys_base}},beforeMount(){this.rating=Number(this.collection.rating),this.get_stars()},methods:{charLimit(e){return e||(e=""),"undefined"===e|null===e?"":e.length<=25?e:e.slice(0,22)+"..."},get_stars(){for(var e=1;e<=5;e++)e<=this.rating||e<=this.rating+.25?this.starList.push({icon:"star",id:e,on:!0}):e<=this.rating+.75?this.starList.push({icon:"star-half-stroke",id:e,on:!0}):this.starList.push({icon:"star",id:e,on:!1})},vote(e){this.collection.voted||(0,x.Z)({method:"put",url:"campains/ratings/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{rate:e,collection_id:this.collection.id}}).then((e=>{let t=e.data;(0,$t.toast)({message:"Thank you for voting :)",type:"is-success",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:3e3}),this.$emit("newCollection",t)})).catch((e=>{console.log(e)}))}}};const Fo=(0,T.Z)(Wo,[["render",Zo],["__scopeId","data-v-05935f40"]]);var Ko=Fo,Yo={name:"CampainTools",components:{CreateItemModal:Wi,PCModalCreate:Il,PCModalDisplay:Kl,PCModalEdit:qo,OfficialMark:Oo,RatingWidget:Ko},props:["user","campain","refreshSpin","maxItemsDisplay","itemsDisplayMode","collection"],computed:{isGameMaster(){return this.user.id===this.campain.game_master.id},isOwner(){let e=this.$store.state.current_table;return e.owners.filter((e=>e.id===this.user.id)).length>0}},data(){return{table:{},itemTypes:["NPC","LOCATION","ORGANIZATION","EVENT","NOTE","RECAP","MISC","MEMO"],typeSelected:"--All--",sortBySelected:"date",maxItems:null,displayMode:null,showInfo:!0,showItemTools:!1,showPlayers:!1,showCreateItemModal:!1,showDisplayItemModal:!1,showCreatePCModal:!1,showPCModalDisplaySwitch:!1,PCModalAvailable:!0,showPCModalEditSwitch:!1,pcToDisplay:{},showSettings:!1,filterBy:"--All--",sortBy:"date+",searchBy:"",is_ended:this.campain.is_ended}},beforeMount(){this.displayMode=this.$store.state.prefs.itemsDisplayMode,this.table=this.$store.state.current_table,this.maxItems=this.maxItemsDisplay},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},editionModePC(e){this.showPCModalDisplaySwitch=!this.showPCModalDisplaySwitch,this.pcToDisplay=e,this.showPCModalEditSwitch=!this.showPCModalEditSwitch},changeDisplayMode(){this.$emit("changeDisplayMode",this.displayMode)},changeMaxItemsDisplay(){this.$emit("changeMaxItemsDisplay",this.maxItems)},addItem(){this.refreshCampain()},addPC(){this.refreshCampain()},refreshCampain(){this.$emit("refreshCampain")},toggleCreateItemModal(){this.showCreateItemModal=!this.showCreateItemModal},toggleCreatePCModal(){this.showCreatePCModal=!this.showCreatePCModal},togglePcLock(e){e.locked=!e.locked,(0,x.Z)({method:"put",url:"/campains/pc/update/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{id:e.id,locked:e.locked}}).then((t=>{this.$emit("updatePC",e)})).catch((e=>{console.log(e)}))},showPC(e){this.PCModalAvailable&&(this.pcToDisplay=e,this.showPCModalDisplaySwitch=!this.showPCModalDisplaySwitch)},updatePC(e){this.$emit("updatePC",e)},deletePC(e){this.$emit("deletePC",e)},endCampain(){(0,x.Z)({method:"put",url:"/campains/switch_end_campain/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{campain_id:this.campain.id,table_id:this.table.id}}).then((e=>{(0,$t.toast)({message:"Campain end status changed",type:"is-success",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:2e3})})).catch((e=>{console.log(e),(0,$t.toast)({message:"Something went wrong, please try again",type:"is-danger",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:2e3})}))}}};const Ro=(0,T.Z)(Yo,[["render",yi],["__scopeId","data-v-34268ce8"]]);var Qo=Ro;const Jo=e=>((0,i.dD)("data-v-9cdd45e0"),e=e(),(0,i.Cn)(),e),Xo={class:"card-content p-1"},en={class:"item-title is-size-6"},tn=Jo((()=>(0,i._)("span",{class:"tooltiptext"},"Visibility for the players",-1))),sn={key:0,class:"is-centered"},an=["src"],ln=Jo((()=>(0,i._)("div",{class:"content"},[(0,i._)("br")],-1)));function on(e,t,s,a,o,n){const c=(0,i.up)("fa");return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)(["card is-3 item-box m-2",s.item.type]),onClick:t[3]||(t[3]=e=>n.openDetailsModal(s.item))},[(0,i._)("div",Xo,[(0,i._)("div",en,[n.isGameMaster?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"is-pulled-right button is-small is-rounded tooltip",onClick:t[0]||(t[0]=(...e)=>n.toggleItemLock&&n.toggleItemLock(...e)),onMouseover:t[1]||(t[1]=e=>o.openDetailsModalSwitch=!1),onMouseleave:t[2]||(t[2]=e=>o.openDetailsModalSwitch=!0)},[tn,o.locked?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"eye-slash",style:{color:"red"}})):((0,i.wg)(),(0,i.j4)(c,{key:1,icon:"eye",style:{color:"green"}}))],32)):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,l.zw)(n.charLimit(s.item.name)),1)]),"image"===s.displayMode?((0,i.wg)(),(0,i.iD)("div",sn,[s.item.image_url?((0,i.wg)(),(0,i.iD)("img",{key:0,src:s.item.image_url,alt:"[image]",class:"item-image"},null,8,an)):(0,i.kq)("",!0)])):(0,i.kq)("",!0),ln])],2)}var nn={name:"ItemBox",props:["item","user","campain","displayMode"],data(){return{locked:!1,openDetailsModalSwitch:!0}},beforeMount(){this.locked=this.item.locked},computed:{isGameMaster(){return this.user.id===this.campain.game_master.id}},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},openDetailsModal(e){this.openDetailsModalSwitch&&this.$emit("showModalDisplay",e)},toggleItemLock(){(0,x.Z)({method:"put",url:"/campains/items/update/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{id:this.item.id,locked:!this.locked}}).then((e=>{this.$emit("itemUpdated",e.data),this.locked=!this.locked})).catch((e=>{console.log(e)}))}}};const cn=(0,T.Z)(nn,[["render",on],["__scopeId","data-v-9cdd45e0"]]);var rn=cn;const dn=e=>((0,i.dD)("data-v-f95f1528"),e=e(),(0,i.Cn)(),e),mn={class:"m-1"},un={class:"columns is-mobile"},hn={class:"item-name"},pn={key:0,class:"column is-3"},gn=dn((()=>(0,i._)("span",null,null,-1)));function wn(e,t,s,a,o,n){const c=(0,i.up)("fa");return(0,i.wg)(),(0,i.iD)("div",mn,[(0,i._)("div",un,[(0,i._)("div",{class:(0,l.C_)(["colunm is-mobile mobile-item-row",[s.item.type,{"is-9":n.isGameMaster,"is-12":!n.isGameMaster}]]),onClick:t[0]||(t[0]=e=>n.openDetailsModal(s.item))},[(0,i._)("span",hn,(0,l.zw)(n.charLimit(s.item.name)),1)],2),n.isGameMaster?((0,i.wg)(),(0,i.iD)("div",pn,[n.isGameMaster?((0,i.wg)(),(0,i.iD)("span",{key:0,class:"is-pulled-right mr-5",onClick:t[1]||(t[1]=(...e)=>n.toggleItemLock&&n.toggleItemLock(...e))},[o.locked?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"eye-slash",style:{color:"red"}})):((0,i.wg)(),(0,i.j4)(c,{key:1,icon:"eye",style:{color:"green"}}))])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)]),gn])}var _n={name:"ItemBoxMobile",props:["item","user","campain"],data(){return{locked:!1,openDetailsModalSwitch:!0}},beforeMount(){this.locked=this.item.locked},computed:{isGameMaster(){return this.user.id===this.campain.game_master.id}},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},openDetailsModal(e){this.openDetailsModalSwitch&&this.$emit("showModalDisplay",e)},toggleItemLock(){(0,x.Z)({method:"put",url:"/campains/items/update/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{id:this.item.id,locked:!this.locked}}).then((e=>{this.$emit("itemUpdated",e.data),this.locked=!this.locked})).catch((e=>{console.log(e)}))}}};const vn=(0,T.Z)(_n,[["render",wn],["__scopeId","data-v-f95f1528"]]);var yn=vn;const bn=e=>((0,i.dD)("data-v-217cf5b0"),e=e(),(0,i.Cn)(),e),kn={class:"m-1"},fn={class:"columns is-mobile"},Cn={class:"item-name"},Dn={key:0,class:"is-pulled-right"},Mn={key:0,class:"column is-3"},In=bn((()=>(0,i._)("span",null,null,-1)));function Pn(e,t,s,a,o,n){const c=(0,i.up)("fa"),r=(0,i.up)("PCModalDisplay"),d=(0,i.up)("PCModalEdit");return(0,i.wg)(),(0,i.iD)("div",kn,[(0,i._)("div",fn,[(0,i._)("div",{class:(0,l.C_)(["colunm is-mobile mobile-pc-row",{"is-9":n.isGameMaster,"is-12":!n.isGameMaster}]),onClick:t[0]||(t[0]=e=>n.showPC(s.pc))},[(0,i._)("p",Cn,(0,l.zw)(n.charLimit(s.pc.name)),1),s.pc.user?((0,i.wg)(),(0,i.iD)("p",Dn,(0,l.zw)(n.charLimit(s.pc.user.username)),1)):(0,i.kq)("",!0)],2),n.isGameMaster?((0,i.wg)(),(0,i.iD)("div",Mn,[n.isGameMaster?((0,i.wg)(),(0,i.iD)("span",{key:0,class:"is-pulled-right mr-5",onClick:t[1]||(t[1]=e=>n.togglePcLock(s.pc))},[s.pc.locked?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"eye-slash",style:{color:"red"}})):((0,i.wg)(),(0,i.j4)(c,{key:1,icon:"eye",style:{color:"green"}}))])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)]),In,o.showPCModalDisplaySwitch?((0,i.wg)(),(0,i.j4)(r,{key:0,showIt:o.showPCModalDisplaySwitch,pc:e.pcToDisplay,user:s.user,campain:s.campain,onClosePCModalDisplay:t[2]||(t[2]=e=>o.showPCModalDisplaySwitch=!1),onEditionModePC:t[3]||(t[3]=e=>n.editionModePC(e))},null,8,["showIt","pc","user","campain"])):(0,i.kq)("",!0),o.showPCModalEditSwitch?((0,i.wg)(),(0,i.j4)(d,{key:1,showIt:o.showPCModalEditSwitch,pc:e.pcToDisplay,user:s.user,campain:s.campain,onCloseEditPCModal:t[4]||(t[4]=e=>o.showPCModalEditSwitch=!o.showPCModalEditSwitch),onUpdatePC:t[5]||(t[5]=e=>n.updatePC(e)),onDeletePC:t[6]||(t[6]=e=>n.deletePC(e))},null,8,["showIt","pc","user","campain"])):(0,i.kq)("",!0)])}var Ln={name:"PcBoxMobile",components:{PCModalCreate:Il,PCModalDisplay:Kl,PCModalEdit:qo},props:["pc","user","campain"],data(){return{locked:!1,showPCModalDisplaySwitch:!1,showPCModalEditSwitch:!1}},beforeMount(){this.locked=this.pc.locked},computed:{isGameMaster(){return this.user.id===this.campain.game_master.id}},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},showPC(e){this.pcToDisplay=e,this.showPCModalDisplaySwitch=!this.showPCModalDisplaySwitch},editionModePC(e){this.showPCModalDisplaySwitch=!this.showPCModalDisplaySwitch,this.pcToDisplay=e,this.showPCModalEditSwitch=!this.showPCModalEditSwitch},updatePC(e){this.$emit("updatePC",e)},deletePC(e){this.$emit("deletePC",e)},togglePcLock(e){e.locked=!e.locked,(0,x.Z)({method:"put",url:"/campains/pc/update/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{id:e.id,locked:e.locked}}).then((t=>{this.$emit("updatePC",e)})).catch((e=>{console.log(e)}))}}};const xn=(0,T.Z)(Ln,[["render",Pn],["__scopeId","data-v-217cf5b0"]]);var Sn=xn;const Tn=e=>((0,i.dD)("data-v-16ec5ded"),e=e(),(0,i.Cn)(),e),$n={class:"modal-card"},Un={class:"modal-card-head"},An={class:"columns"},qn={class:"column is-8"},En={class:"modal-card-title"},zn={class:"column is-4 mb-4"},Gn={class:"items-right"},Bn={class:"item-type"},Vn={class:"modal-card-body"},On=["innerHTML"],jn={key:0},Hn=["innerHTML"],Nn={key:2},Zn=Tn((()=>(0,i._)("hr",null,null,-1))),Wn=["src"],Fn=Tn((()=>(0,i._)("footer",{class:"modal-card-foot"},null,-1)));function Kn(e,t,s,a,o,n){return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)(["modal",{"is-active":s.showIt}])},[(0,i._)("div",{class:"modal-background",onClick:t[0]||(t[0]=t=>e.$emit("showModalDisplay",s.item))}),(0,i._)("div",$n,[(0,i._)("header",Un,[(0,i._)("div",An,[(0,i._)("div",qn,[(0,i._)("span",En,(0,l.zw)(n.charLimit(s.item.name)),1)]),(0,i._)("div",zn,[(0,i._)("div",Gn,[(0,i._)("span",Bn,(0,l.zw)(s.item.type),1),n.isGameMaster|"MEMO"===s.item.type?((0,i.wg)(),(0,i.iD)("span",{key:0,class:"button is-small is-success mr-2",onClick:t[1]||(t[1]=e=>n.editionMode(s.item))}," Edit ")):(0,i.kq)("",!0),(0,i._)("button",{class:"delete","aria-label":"close",onClick:t[2]||(t[2]=t=>e.$emit("showModalDisplay",s.item))})])])])]),(0,i._)("section",Vn,[(0,i._)("div",{class:"content",id:"data_pc",innerHTML:n.dataPC},null,8,On),n.isGameMaster?((0,i.wg)(),(0,i.iD)("hr",jn)):(0,i.kq)("",!0),n.isGameMaster?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"content",id:"data_gm",innerHTML:n.dataGM},null,8,Hn)):(0,i.kq)("",!0),s.item.image_url?((0,i.wg)(),(0,i.iD)("div",Nn,[Zn,(0,i._)("img",{src:s.item.image_url,alt:"[image]",class:"item-image"},null,8,Wn)])):(0,i.kq)("",!0)]),Fn])],2)}var Yn={name:"ItemModalDisplay",props:["item","user","campain","showIt"],computed:{isGameMaster(){return this.user.id===this.campain.game_master.id},dataPC(){return marked.parse(this.item.data_pc)},dataGM(){return this.isGameMaster?marked.parse(this.item.data_gm):""}},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},editionMode(e){this.$emit("showModalDisplay",e),this.$emit("editionMode",e)}},mounted(){let e=document.getElementsByTagName("p");for(let t=0;t<e.length;t++)e[t].style.wordBreak="keep-all"}};const Rn=(0,T.Z)(Yn,[["render",Kn],["__scopeId","data-v-16ec5ded"]]);var Qn=Rn;const Jn=e=>((0,i.dD)("data-v-34b74cc8"),e=e(),(0,i.Cn)(),e),Xn={class:"modal-card"},ec={class:"modal-card-head"},tc={class:"modal-card-title"},sc={class:"modal-card-body"},ac={class:"control"},ic=Jn((()=>(0,i._)("label",{class:"label"},"Name",-1))),lc=Jn((()=>(0,i._)("label",{class:"label"},"Image url",-1))),oc={key:0},nc=Jn((()=>(0,i._)("label",{class:"label"},"Type",-1))),cc={class:"select"},rc={class:"is-flex is-justify-content-space-between m-2"},dc=Jn((()=>(0,i._)("label",{class:"label"},"PC's infos",-1))),mc=["hidden"],uc=["hidden"],hc={key:1},pc={class:"is-flex is-justify-content-space-between m-2"},gc=Jn((()=>(0,i._)("label",{class:"label"},"GM's infos",-1))),wc=["hidden"],_c=["hidden"],vc={class:"modal-card-foot"},yc={class:"columns"},bc={class:"column"},kc={href:"MDGuide.html",class:"info-icon tooltip",target:"_blank"},fc=Jn((()=>(0,i._)("span",{class:"tooltiptext"},"Edition tips",-1))),Cc={class:"column"},Dc=["disabled"],Mc={class:"column"};function Ic(e,t,s,o,n,c){const r=(0,i.up)("fa");return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)(["modal",{"is-active":s.showIt}])},[(0,i._)("div",{class:"modal-background",onClick:t[0]||(t[0]=t=>e.$emit("showModalEdit",s.item))}),(0,i._)("div",Xn,[(0,i._)("header",ec,[(0,i._)("span",tc,(0,l.zw)(c.charLimit(n.itemName)),1),(0,i._)("button",{class:"delete","aria-label":"close",onClick:t[1]||(t[1]=t=>e.$emit("showModalEdit",s.item))})]),(0,i._)("section",sc,[(0,i._)("form",null,[(0,i._)("div",ac,[ic,(0,i.wy)((0,i._)("input",{class:"input",type:"text",placeholder:"Name","onUpdate:modelValue":t[2]||(t[2]=e=>n.itemName=e)},null,512),[[a.nr,n.itemName]]),lc,(0,i.wy)((0,i._)("input",{class:"input",type:"text",placeholder:"image url","onUpdate:modelValue":t[3]||(t[3]=e=>n.itemImageUrl=e)},null,512),[[a.nr,n.itemImageUrl]]),c.isGameMaster?((0,i.wg)(),(0,i.iD)("div",oc,[nc,(0,i._)("div",cc,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.itemType=e)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.itemTypes,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e},(0,l.zw)(e),1)))),128))],512),[[a.bM,n.itemType]])])])):(0,i.kq)("",!0),(0,i._)("div",rc,[dc,(0,i._)("button",{class:"is-small",onClick:t[5]||(t[5]=e=>c.MDPreview("pcsInfos"))},"preview")]),(0,i._)("div",{hidden:n.showpcsPreview},[(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Informations for the players",id:"pcsInfos","onUpdate:modelValue":t[6]||(t[6]=e=>n.itemPCsInfos=e)},null,512),[[a.nr,n.itemPCsInfos]])],8,mc),(0,i._)("div",{id:"pcsInfosPreview",onClick:t[7]||(t[7]=e=>c.MDPreview("pcsInfos")),hidden:!n.showpcsPreview,class:"content border p-1"},null,8,uc),c.isGameMaster?((0,i.wg)(),(0,i.iD)("div",hc,[(0,i._)("div",pc,[gc,(0,i._)("button",{class:"is-small",onClick:t[8]||(t[8]=e=>c.MDPreview("gmInfos"))},"preview")]),(0,i._)("div",{hidden:n.showgmPreview},[(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Informations for the GM only",id:"gmInfos","onUpdate:modelValue":t[9]||(t[9]=e=>n.itemGmInfos=e)},null,512),[[a.nr,n.itemGmInfos]])],8,wc),(0,i._)("div",{id:"gmInfosPreview",onClick:t[10]||(t[10]=e=>c.MDPreview("gmInfos")),hidden:!n.showgmPreview,class:"content border p-1"},null,8,_c)])):(0,i.kq)("",!0)])])]),(0,i._)("footer",vc,[(0,i._)("div",yc,[(0,i._)("div",bc,[(0,i._)("button",{class:"button is-small is-success mb-2",onClick:t[11]||(t[11]=t=>c.confirmUpdate(e.updated_item))}," Confirm "),(0,i._)("button",{class:"button is-small",onClick:t[12]||(t[12]=t=>e.$emit("showModalEdit",s.item))},"Cancel"),(0,i._)("a",kc,[(0,i.Wm)(r,{icon:"circle-info"}),fc])]),(0,i._)("div",Cc,[(0,i._)("button",{class:"button is-warning is-small mb-2",onClick:t[13]||(t[13]=e=>n.deleteActive=!n.deleteActive)},"delete"),(0,i._)("button",{class:"button is-danger is-small mb-2",disabled:n.deleteActive,onClick:t[14]||(t[14]=(...e)=>c.deleteItem&&c.deleteItem(...e))}," confirm delete ",8,Dc)]),(0,i._)("div",Mc,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.errors,(e=>((0,i.wg)(),(0,i.iD)("p",{key:e,style:{color:"red"}},(0,l.zw)(e),1)))),128))])])])])],2)}var Pc={name:"ItemModalEdit",props:["item","user","campain","showIt"],data(){return{itemTypes:["NPC","LOCATION","ORGANIZATION","EVENT","NOTE","RECAP","MISC","MEMO"],showpcsPreview:!1,showgmPreview:!1,errors:[],itemName:this.item.name,itemType:this.item.type,itemImageUrl:this.item.image_url,itemPCsInfos:this.item.data_pc,itemGmInfos:this.item.data_gm,deleteActive:!0}},computed:{isGameMaster(){return this.user.id===this.campain.game_master.id}},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},deleteItem(){this.errors=[];let e=this.item.id;(0,x.Z)({method:"delete",url:"/campains/items/delete/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{id:e}}).then((t=>{this.$emit("itemDeleted",e)})).catch((e=>{this.errors.push(e.response.data.message)}))},confirmUpdate(){if(this.errors=[],this.isGameMaster||(this.itemType="MEMO"),""===this.itemType)return void this.errors.push("Type required.");let e={id:this.item.id,name:this.itemName,type:this.itemType,image_url:this.itemImageUrl,language:"en",data_pc:this.itemPCsInfos,data_gm:this.itemGmInfos};(0,x.Z)({method:"put",url:"/campains/items/update/",headers:{Authorization:`Token ${this.$store.state.token}`},data:e}).then((t=>{this.$emit("itemUpdated",t.data),this.$emit("showModalEdit",e)})).catch((e=>{this.errors.push(e.response.data.message)}))},MDPreview(e){"pcsInfos"===e?this.showpcsPreview=!this.showpcsPreview:"gmInfos"===e&&(this.showgmPreview=!this.showgmPreview);let t=document.getElementById(e),s=t.value;this.MDPreviewContent=marked.parse(s);let a=document.getElementById(e+"Preview");a.innerHTML=this.MDPreviewContent}}};const Lc=(0,T.Z)(Pc,[["render",Ic],["__scopeId","data-v-34b74cc8"]]);var xc=Lc,Sc={name:"CampainView",components:{CampainTools:Qo,ItemBox:rn,ItemModalDisplay:Qn,ItemModalEdit:xc,ItemBoxMobile:yn,CreateItemModal:Wi,PCModalCreate:Il,PCModalEdit:qo,PcBoxMobile:Sn,OfficialMark:Oo,RatingWidget:Ko},data(){return{user:{},campain:{title:"no title"},collection:{},table:{},refreshSpin:!1,itemsDisplayMode:"image",shownItems:[],maxItemsDisplay:50,showItemModalDisplaySwitch:!1,showItemModalEditSwitch:!1,itemToDisplay:{},filterBy:"--All--",sortBy:"date+",searchBy:"",displayMobileItems:!0,displayMobilePcs:!1,displayMobileInfos:!1,displayMobileSettings:!1,itemTypes:["NPC","LOCATION","ORGANIZATION","EVENT","NOTE","RECAP","MISC","MEMO"],showCreateItemModal:!1,showCreatePCModal:!1,showPCModalDisplaySwitch:!1,showPCModalEditSwitch:!1,maxItems:50}},computed:{isGameMaster(){return this.user.id===this.campain.game_master.id}},beforeMount(){this.itemsDisplayMode=this.$store.state.prefs.itemsDisplayMode,this.user=this.$store.state.user,this.campain=this.$store.state.current_campain,this.collection=this.campain.parent_collection,this.refresh_campain()},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},displayMobile(e){let t=document.getElementById("tab-items"),s=document.getElementById("tab-pcs"),a=document.getElementById("tab-infos"),i=document.getElementById("tab-settings");"items"==e?(this.displayMobileItems=!0,this.displayMobilePcs=!1,this.displayMobileInfos=!1,this.displayMobileSettings=!1,t.classList.add("is-active"),s.classList.remove("is-active"),a.classList.remove("is-active"),i.classList.remove("is-active")):"pcs"==e?(this.displayMobileItems=!1,this.displayMobilePcs=!0,this.displayMobileInfos=!1,this.displayMobileSettings=!1,t.classList.remove("is-active"),s.classList.add("is-active"),a.classList.remove("is-active"),i.classList.remove("is-active")):"infos"==e?(this.displayMobileItems=!1,this.displayMobilePcs=!1,this.displayMobileInfos=!0,this.displayMobileSettings=!1,t.classList.remove("is-active"),s.classList.remove("is-active"),a.classList.add("is-active"),i.classList.remove("is-active")):"settings"==e&&(this.displayMobileItems=!1,this.displayMobilePcs=!1,this.displayMobileInfos=!1,this.displayMobileSettings=!0,t.classList.remove("is-active"),s.classList.remove("is-active"),a.classList.remove("is-active"),i.classList.add("is-active"))},newCollection(e){this.refresh_campain()},itemDeleted(e){this.showItemModalDisplaySwitch=!1,this.showItemModalEditSwitch=!1;let t=this.campain.items.find((t=>t.id==e)),s=this.campain.items.indexOf(t);-1!==s&&this.campain.items.splice(s,1)},searchItems(e){this.searchBy=e,""==e?(this.shownItems=this.campain.items,this.filterItems(this.filterBy)):this.shownItems=this.campain.items.filter((t=>t.name.toLowerCase().includes(e.toLowerCase())))},filterItems(e){this.filterBy=e,this.shownItems="--All--"==e?this.campain.items:this.campain.items.filter((t=>t.type==e)),this.sortItems(this.sortBy)},sortItems(e){this.shownItems=this.shownItems.sort(((t,s)=>"date-"==e?new Date(t.date_unlocked)-new Date(s.date_unlocked):"date+"==e?new Date(s.date_unlocked)-new Date(t.date_unlocked):"name"==e?t.name.localeCompare(s.name):"type"==e?t.type.localeCompare(s.type):void 0))},showItemModalEditOn(e){this.showItemModalDisplaySwitch=!1,this.showItemModalEditSwitch=!0,this.itemToDisplay=e},showItemModalEditOff(e){this.showItemModalDisplaySwitch=!0,this.showItemModalEditSwitch=!1,this.itemToDisplay=e},showItemModalDisplay(e){this.showItemModalDisplaySwitch=!this.showItemModalDisplaySwitch,this.itemToDisplay=e},getUpdatedItem(e){let t=this.campain.items.find((t=>t.id==e.id)),s=this.campain.items.indexOf(t);-1!==s&&this.campain.items.splice(s,1,e);this.$store.state.current_campain.items.find((t=>t.id==e.id)),this.$store.state.current_campain.items.indexOf(t);-1!==s&&this.$store.state.current_campain.items.splice(s,1,e)},changeDisplayMode(e){this.$store.state.prefs.itemsDisplayMode=e,this.itemsDisplayMode=e},changeMaxItemsDisplay(e){this.maxItemsDisplay=e,"all"===this.maxItemsDisplay?this.shownItems=this.campain.items:this.shownItems=this.campain.items.slice(0,this.maxItemsDisplay)},refresh_campain(){this.user=this.$store.state.user,this.campain=this.$store.state.current_campain,this.table=this.$store.state.current_table,this.refreshSpin=!0,(0,x.Z)({method:"get",url:`/campains/campains/${this.campain.id}/`,headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.collection=e.data.collection,this.campain=e.data.campain,this.isGameMaster||(this.campain.items=this.campain.items.filter((e=>!e.locked))),this.shownItems=this.campain.items,this.table=e.data.campain.table,this.$store.state.current_campain=e.data.campain,this.$store.state.current_table=e.data.campain.table,this.refreshSpin=!1,this.filterItems(this.filterBy)})).catch((e=>{console.log(e),this.refreshSpin=!1}))},updatePC(e){let t=this.campain.pcs.find((t=>t.id==e.id)),s=this.campain.pcs.indexOf(t);-1!==s&&this.campain.pcs.splice(s,1,e)},deletePC(e){let t=this.campain.pcs.find((t=>t.id==e)),s=this.campain.pcs.indexOf(t);-1!==s&&this.campain.pcs.splice(s,1)},endCampain(){(0,x.Z)({method:"put",url:"/campains/switch_end_campain/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{campain_id:this.campain.id,table_id:this.table.id}}).then((e=>{(0,$t.toast)({message:"Campain end status changed",type:"is-success",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:2e3})})).catch((e=>{console.log(e),(0,$t.toast)({message:"Something went wrong, please try again",type:"is-danger",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:2e3})}))}}};const Tc=(0,T.Z)(Sc,[["render",fa],["__scopeId","data-v-76449592"]]);var $c=Tc;const Uc=e=>((0,i.dD)("data-v-7ce7d099"),e=e(),(0,i.Cn)(),e),Ac={class:"container is-max-desktop"},qc=Uc((()=>(0,i._)("h1",{class:"title"},"Edit Campain",-1))),Ec={class:"subtitle"},zc={key:0},Gc={class:"mt-2"},Bc=Uc((()=>(0,i._)("label",{class:"label"},"Language",-1))),Vc=(0,i.uE)('<option value="ar" data-v-7ce7d099>Arabic</option><option value="cs" data-v-7ce7d099>Czech</option><option value="zh" data-v-7ce7d099>Chinese</option><option value="da" data-v-7ce7d099>Danish</option><option value="nl" data-v-7ce7d099>Dutch</option><option value="en" data-v-7ce7d099>English</option><option value="fi" data-v-7ce7d099>Finnish</option><option value="fr" data-v-7ce7d099>French</option><option value="de" data-v-7ce7d099>German</option><option value="el" data-v-7ce7d099>Greek</option><option value="hi" data-v-7ce7d099>Hindi</option><option value="hu" data-v-7ce7d099>Hungarian</option><option value="it" data-v-7ce7d099>Italian</option><option value="ja" data-v-7ce7d099>Japanese</option><option value="ko" data-v-7ce7d099>Korean</option><option value="no" data-v-7ce7d099>Norwegian</option><option value="fa" data-v-7ce7d099>Persian</option><option value="pl" data-v-7ce7d099>Polish</option><option value="pt" data-v-7ce7d099>Portuguese</option><option value="ru" data-v-7ce7d099>Russian</option><option value="es" data-v-7ce7d099>Spanish</option><option value="sv" data-v-7ce7d099>Swedish</option><option value="th" data-v-7ce7d099>Thai</option><option value="tr" data-v-7ce7d099>Turkish</option><option value="vi" data-v-7ce7d099>Vietnamese</option>',25),Oc=[Vc],jc=Uc((()=>(0,i._)("label",{class:"label"},"Game",-1))),Hc=Uc((()=>(0,i._)("label",{class:"label"},"Campain title",-1))),Nc=Uc((()=>(0,i._)("label",{class:"label"},"Image url",-1))),Zc=Uc((()=>(0,i._)("label",{class:"label"},"Description",-1))),Wc={class:"m-2"},Fc=Uc((()=>(0,i._)("strong",null,"Is this campain is ended ? ",-1))),Kc={key:0},Yc=(0,i.uE)('<label class="label m-2" data-v-7ce7d099> is copy locked ? </label><p class="text" data-v-7ce7d099> Once it is checked, it can not be unchecked. </p><p class="text" data-v-7ce7d099> A locked campaign will not be albe to export any items at all, but will be able to import items from any other campaigns and collections. </p><p class="text" data-v-7ce7d099> This feature prevents copyright issues. </p><p class="text" data-v-7ce7d099> DO NOT CHECK if you want to create a collection from this campaign. </p>',5),Rc={class:"m-2"},Qc=["disabled"],Jc={key:1},Xc=["disabled"];function er(e,t,s,o,n,c){const r=(0,i.up)("fa");return(0,i.wg)(),(0,i.iD)("div",Ac,[(0,i._)("form",null,[qc,(0,i._)("h2",Ec,(0,l.zw)(c.charLimit(n.campainTitle)),1),n.errors.length?((0,i.wg)(),(0,i.iD)("ul",zc,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.errors,(e=>((0,i.wg)(),(0,i.iD)("li",{class:"is-danger",key:e,style:{color:"red"}},(0,l.zw)(e),1)))),128))])):(0,i.kq)("",!0),(0,i._)("div",Gc,[Bc,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.language=e)},Oc,512),[[a.bM,n.language]]),jc,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Game name",class:"input","onUpdate:modelValue":t[1]||(t[1]=e=>n.game=e)},null,512),[[a.nr,n.game]]),Hc,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Campain title",class:"input","onUpdate:modelValue":t[2]||(t[2]=e=>n.campainTitle=e)},null,512),[[a.nr,n.campainTitle]]),Nc,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Image url",class:"input","onUpdate:modelValue":t[3]||(t[3]=e=>n.image_url=e)},null,512),[[a.nr,n.image_url]]),Zc,(0,i.wy)((0,i._)("textarea",{class:"textarea",placeholder:"Campain description","onUpdate:modelValue":t[4]||(t[4]=e=>n.camapainDescription=e)},null,512),[[a.nr,n.camapainDescription]]),(0,i._)("div",Wc,[Fc,(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=t=>e.is_ended=t)},null,512),[[a.e8,e.is_ended]])]),n.campain.is_copy_free?((0,i.wg)(),(0,i.iD)("div",Kc,[Yc,(0,i._)("div",Rc,[(0,i._)("button",{class:"button is-small is-warning mr-4",onClick:t[6]||(t[6]=e=>n.allowCopyLock=!0)},"I Understand"),(0,i.wy)((0,i._)("input",{type:"checkbox",class:"ml-4","onUpdate:modelValue":t[7]||(t[7]=e=>n.is_copy_locked=e),disabled:!n.allowCopyLock},null,8,Qc),[[a.e8,n.is_copy_locked]])])])):((0,i.wg)(),(0,i.iD)("div",Jc,[(0,i._)("p",null,[(0,i.Uk)("This campaign is copy locked "),(0,i.Wm)(r,{icon:"lock",style:{color:"red"}})])]))]),(0,i._)("button",{class:"button is-success mt-2",onClick:t[8]||(t[8]=(0,a.iM)(((...e)=>c.onSubmit&&c.onSubmit(...e)),["prevent"]))},"Confirm"),(0,i._)("button",{class:"button is-secondary m-2",onClick:t[9]||(t[9]=(0,a.iM)(((...e)=>c.onCancel&&c.onCancel(...e)),["prevent"]))},"Cancel"),(0,i._)("button",{class:"button is-warning m-2",onClick:t[10]||(t[10]=e=>n.allowDeleteCampain=!n.allowDeleteCampain)}," delete campaign "),(0,i._)("button",{disabled:!n.allowDeleteCampain,onClick:t[11]||(t[11]=(0,a.iM)((e=>c.deleteCampain(n.campain.id)),["prevent"])),class:"button is-danger m-2"},"Confirm deletion ",8,Xc)])])}var tr={name:"CampainEditView",data(){return{user:this.$store.state.user,campain:{},table:{},game:"",image_url:"",language:"en",gameMasterId:null,campainTitle:"",camapainDescription:"",is_copy_locked:!1,errors:[],allowDeleteCampain:!1,allowCopyLock:!1}},beforeMount(){this.table=this.$store.state.current_table,this.campain=this.$store.state.current_campain,this.game=this.campain.game,this.image_url=this.campain.image_url,this.language=this.campain.language,this.campainTitle=this.campain.title,this.camapainDescription=this.campain.description,this.gameMasterId=this.campain.game_master.id,this.is_copy_locked=!this.campain.is_copy_free,this.is_ended=this.campain.is_ended},computed:{isGameMaster(){return this.user.id===this.campain.game_master.id}},methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},onSubmit(){if(this.errors=[],""===this.game&&this.errors.push("You must enter a game"),""===this.campainTitle&&this.errors.push("You must enter a title"),null===this.gameMasterId&&this.errors.push("You must select a master"),this.errors.length>0)return;let e={campain_id:this.campain.id,game:this.game,title:this.campainTitle,description:this.camapainDescription,image_url:this.image_url,language:this.language,is_copy_free:!this.is_copy_locked,is_ended:this.is_ended};(0,x.Z)({method:"put",url:"/campains/update_campain/",headers:{Authorization:`Token ${this.$store.state.token}`},data:e}).then((e=>{this.$router.push({name:"CampainView",params:{id:this.$store.state.current_campain.id}})})).catch((e=>{console.log(e.response.data),this.errors.push(e.response.data.message)}))},onCancel(){this.$router.push({name:"CampainView",params:{id:this.$store.state.current_campain.id}})},deleteCampain(e){(0,x.Z)({method:"delete",url:`/campains/campains/${this.campain.id}/`,headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.$router.push({name:"table",params:{id:this.table.id}})})).catch((e=>{console.log(e)}))}}};const sr=(0,T.Z)(tr,[["render",er],["__scopeId","data-v-7ce7d099"]]);var ar=sr;const ir={class:"container is-max-desktop"},lr=(0,i._)("h1",{class:"title"},"Signup",-1),or=(0,i._)("p",{class:"label"},"Enter your username",-1),nr=(0,i._)("p",{class:"label"},"Enter your email",-1),cr=(0,i._)("p",{class:"label"},"Enter your password",-1),rr=(0,i._)("p",{class:"label"},"Confirm your password",-1),dr=(0,i._)("br",null,null,-1),mr={class:"m-5"},ur=(0,i._)("a",{href:"TandC.html",target:"_blank"}," terms and conditions",-1),hr=(0,i._)("a",{href:"privacyPolicy.html",target:"_blank"}," privacy policy ",-1),pr={key:0};function gr(e,t,s,o,n,c){return(0,i.wg)(),(0,i.iD)("div",ir,[(0,i._)("form",null,[lr,or,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"username",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>n.username=e),class:"input"},null,512),[[a.nr,n.username]]),nr,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"email",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>n.email=e),class:"input"},null,512),[[a.nr,n.email]]),cr,(0,i.wy)((0,i._)("input",{type:"password",required:"",placeholder:"password","onUpdate:modelValue":t[2]||(t[2]=e=>n.password=e),class:"input"},null,512),[[a.nr,n.password]]),rr,(0,i.wy)((0,i._)("input",{type:"password",required:"",placeholder:"password","onUpdate:modelValue":t[3]||(t[3]=e=>n.password2=e),class:"input"},null,512),[[a.nr,n.password2]]),dr,(0,i._)("div",mr,[(0,i._)("p",null,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=e=>n.termsOfService=e),onChange:t[5]||(t[5]=(...e)=>c.checkCreateButton&&c.checkCreateButton(...e))},null,544),[[a.e8,n.termsOfService]]),(0,i.Uk)(" I accept the "),ur]),(0,i._)("p",null,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=e=>n.privacyPolicy=e),onChange:t[7]||(t[7]=(...e)=>c.checkCreateButton&&c.checkCreateButton(...e))},null,544),[[a.e8,n.privacyPolicy]]),(0,i.Uk)(" I accept the "),hr])]),n.errors.length?((0,i.wg)(),(0,i.iD)("div",pr,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.values(n.errors[0]),(e=>((0,i.wg)(),(0,i.iD)("li",{key:e,style:{color:"red"}},(0,l.zw)(e[0]),1)))),128))])])):(0,i.kq)("",!0),(0,i._)("button",{class:"button is-success mt-2",id:"createAccountButton",disabled:"",onClick:t[8]||(t[8]=(...e)=>c.createAccount&&c.createAccount(...e))},"Create my account")])])}var wr={name:"SignupView",components:{},data(){return{username:"",email:"",password:"",password2:"",termsOfService:!1,privacyPolicy:!1,errors:[]}},methods:{checkCreateButton(){this.termsOfService&&this.privacyPolicy?document.querySelector("#createAccountButton").disabled=!1:document.querySelector("#createAccountButton").disabled=!0},checkEntries(){return""===this.username||""===this.email||""===this.password||""===this.password2?(this.errors.push({credentials:["All fields must be filled"]}),!1):this.password===this.password2||(this.errors.push({password:["Passwords don't match"]}),!1)},createAccount(){console.log("create account"),this.errors=[],this.checkEntries()&&x.Z.post("auth/users/",{username:this.username,email:this.email,password:this.password}).then((e=>{(0,$t.toast)({message:"Account created, please check your email to confirm your account",type:"is-success",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:1e4}),this.$router.push({name:"home"})})).catch((e=>{console.log(e.response.data),this.errors.push(e.response.data)}))}}};const _r=(0,T.Z)(wr,[["render",gr]]);var vr=_r;const yr={class:"container is-max-desktop"},br=(0,i._)("h1",{class:"title"},"Login",-1),kr=(0,i._)("p",{class:"label"},"Enter a credential",-1),fr=(0,i._)("p",{class:"label"},"Enter your password",-1),Cr=(0,i._)("br",null,null,-1),Dr={class:"m-2"},Mr={class:"m-2"};function Ir(e,t,s,l,o,n){const c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",yr,[(0,i._)("form",null,[br,kr,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Email or username","onUpdate:modelValue":t[0]||(t[0]=e=>o.credential=e),required:"",class:"input"},null,512),[[a.nr,o.credential]]),fr,(0,i.wy)((0,i._)("input",{type:"password",placeholder:"Password","onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),required:"",class:"input"},null,512),[[a.nr,o.password]]),Cr,(0,i._)("button",{class:"button is-success mt-2",onClick:t[2]||(t[2]=(...e)=>n.onSubmit&&n.onSubmit(...e))},"Login"),(0,i._)("p",Dr,[(0,i.Wm)(c,{to:"/forgotten_password"},{default:(0,i.w5)((()=>[(0,i.Uk)("I forgot my password")])),_:1})]),(0,i._)("p",Mr,[(0,i.Wm)(c,{to:"/send_confirmation_email_again"},{default:(0,i.w5)((()=>[(0,i.Uk)("I already have an account, but please send me the confirmation email again")])),_:1})])])])}var Pr=s(65),Lr=(0,Pr.MT)({state:{isloading:!1,isAuthenticated:!1,token:null,user:{},current_table:{name:"current_table",id:"no_id"},current_campain:{name:"current_campain",id:"no_id"},prefs:{itemsDisplayMode:"image"},configuration:{}},getters:{},mutations:{initializeStore(e){localStorage.getItem("store")?(e.token=localStorage.getItem("token"),e.isAuthenticated=!0):(e.token=null,e.isAuthenticated=!1)},setIsLoading(e,t){e.isloading=t},setToken(e,t){e.token=t,e.isAuthenticated=!0},removeToken(e){e.token=null,e.isAuthenticated=!1}},actions:{},modules:{}}),xr={name:"LoginView",components:{},data(){return{credential:"",password:""}},methods:{onSubmit(){""!==this.credential&&""!==this.password&&x.Z.post("auth/token/login/",{credential:this.credential,password:this.password}).then((e=>{this.$store.commit("setToken",e.data.auth_token),this.$store.state.user=e.data.user,(0,$t.toast)({message:"Logged in",type:"is-success",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:3e3}),this.$router.push({name:"dashboard"})})).catch((e=>{if(console.log("error: ",e),void 0!=e.response){let a="";for(var t in e.response.data)for(var s=0;s<e.response.data[t].length;s++)a+=e.response.data[t][s]+"\n";(0,$t.toast)({message:`${a}`,type:"is-danger",position:"center",dismissible:!0,pauseOnHover:!0,duration:3e3})}}))}}};const Sr=(0,T.Z)(xr,[["render",Ir]]);var Tr=Sr;const $r={class:"container is-max-desktop"},Ur=(0,i._)("h1",{class:"title"},"Send me the confirmation email again",-1),Ar=(0,i._)("label",{class:"label"},"Credential",-1),qr={key:0};function Er(e,t,s,o,n,c){return(0,i.wg)(),(0,i.iD)("div",$r,[(0,i._)("form",null,[Ur,Ar,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Email or username","onUpdate:modelValue":t[0]||(t[0]=e=>n.credential=e),required:"",class:"input"},null,512),[[a.nr,n.credential]]),n.errors.length?((0,i.wg)(),(0,i.iD)("div",qr,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.values(n.errors[0]),(e=>((0,i.wg)(),(0,i.iD)("li",{key:e,style:{color:"red"}},(0,l.zw)(e[0]),1)))),128))])])):(0,i.kq)("",!0),(0,i._)("button",{class:"button is-success mt-2",onClick:t[1]||(t[1]=(...e)=>c.onSubmit&&c.onSubmit(...e))},"Send the email")])])}var zr={name:"SendConfirmationEmailAgainView",data(){return{credential:"",errors:[]}},methods:{onSubmit(){console.log("click !"),this.errors=[],x.Z.post("auth/email/confirm_email/resend/",{credential:this.credential}).then((e=>{(0,$t.toast)({message:"The email has been sent, please check your inbox",type:"is-info",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:5e3}),this.$router.push({name:"home"})})).catch((e=>{this.errors.push(e.response.data)}))}}};const Gr=(0,T.Z)(zr,[["render",Er]]);var Br=Gr;const Vr={class:"container is-max-desktop"},Or=(0,i._)("h1",{class:"title"},"Forgotten password",-1),jr=(0,i._)("p",{class:"label"},"Enter your email or your username",-1),Hr={key:0};function Nr(e,t,s,o,n,c){return(0,i.wg)(),(0,i.iD)("div",Vr,[(0,i._)("form",null,[Or,jr,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Email or username","onUpdate:modelValue":t[0]||(t[0]=e=>n.credential=e),required:"",class:"input"},null,512),[[a.nr,n.credential]]),n.errors.length?((0,i.wg)(),(0,i.iD)("div",Hr,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.values(n.errors[0]),(e=>((0,i.wg)(),(0,i.iD)("li",{key:e,style:{color:"red"}},(0,l.zw)(e[0]),1)))),128))])])):(0,i.kq)("",!0),(0,i._)("button",{class:"button is-success mt-2",onClick:t[1]||(t[1]=(...e)=>c.onSubmit&&c.onSubmit(...e))},"Send me an email to reset my password")])])}var Zr={name:"ForgottenPasswordView",components:{},data(){return{credential:"",errors:[]}},methods:{onSubmit(){this.errors=[],x.Z.post("/auth/password/request_reset/",{credential:this.credential}).then((e=>{console.log(e.data),(0,$t.toast)({message:"The email has been sent, please check your inbox",type:"is-info",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:5e3}),this.$router.push({name:"home"})})).catch((e=>{this.errors.push(e.response.data),console.log(e.response.data)}))}}};const Wr=(0,T.Z)(Zr,[["render",Nr]]);var Fr=Wr;const Kr={class:"container is-max-desktop"},Yr=(0,i._)("h1",{class:"title"},"Please confirm your identity",-1),Rr=(0,i._)("h2",{class:"subtitle"},"Confirm your account, then change your password if needed",-1),Qr=(0,i._)("p",null,"Use this token: ",-1),Jr=(0,i._)("p",{class:"label mt-2"},"Enter your email or username",-1),Xr={key:0};function ed(e,t,s,o,n,c){return(0,i.wg)(),(0,i.iD)("div",Kr,[(0,i._)("form",null,[Yr,Rr,Qr,(0,i._)("p",null,(0,l.zw)(n.jwt_token),1),Jr,(0,i.wy)((0,i._)("input",{type:"text",placeholder:"Email or username","onUpdate:modelValue":t[0]||(t[0]=e=>n.credential=e),required:"",class:"input"},null,512),[[a.nr,n.credential]]),n.errors.length?((0,i.wg)(),(0,i.iD)("div",Xr,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.values(n.errors[0]),(e=>((0,i.wg)(),(0,i.iD)("li",{key:e,style:{color:"red"}},(0,l.zw)(e[0]),1)))),128))])])):(0,i.kq)("",!0),(0,i._)("button",{class:"button is-success mt-2",onClick:t[1]||(t[1]=(...e)=>c.onSubmit&&c.onSubmit(...e))},"login")])])}var td={name:"LoginFromEmailView",data(){return{jwt_token:"",credential:"",errors:[]}},methods:{onSubmit(){x.Z.post("auth/login_with_jwt/",{credential:this.credential,jwt_token:this.jwt_token}).then((e=>{(0,$t.toast)({message:"You are now logged in and confirmed!",type:"is-success",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:5e3}),this.$store.commit("setToken",e.data.auth_token),this.$store.state.user=e.data.user,this.$router.push({name:"account"})})).catch((e=>{this.errors.push(e.response.data)}))}},beforeMount(){this.jwt_token=this.$route.params.token}};const sd=(0,T.Z)(td,[["render",ed]]);var ad=sd;const id={class:"container"},ld={class:"box mt-4"},od=(0,i._)("h1",{class:"subtitle"},"Account informations",-1),nd=(0,i._)("hr",null,null,-1),cd={class:"columns"},rd={class:"column"},dd={class:"column"},md={class:"column"},ud=(0,i._)("div",{class:"is-flex is-justify-content-space-around m-4"},[(0,i._)("a",{href:"privacyPolicy.html",target:"_blank"},"Privacy Policy"),(0,i._)("a",{href:"TandC.html",target:"_blank"},"Terms and Conditions")],-1),hd=(0,i._)("h2",{class:"subtitle"}," Subscriptions and Invoices Portal",-1),pd=[hd];function gd(e,t,s,a,o,n){const c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",id,[(0,i._)("div",ld,[od,nd,(0,i._)("p",null,[(0,i._)("span",null," Username: "+(0,l.zw)(o.user.username),1)]),(0,i._)("p",null,[(0,i._)("span",null," Email: "+(0,l.zw)(o.user.email),1)]),(0,i._)("div",cd,[(0,i._)("div",rd,[(0,i.Wm)(c,{class:"button is-secondary m-2",to:"/change_username"},{default:(0,i.w5)((()=>[(0,i.Uk)("change my username")])),_:1})]),(0,i._)("div",dd,[(0,i.Wm)(c,{class:"button is-secondary m-2",to:"/change_email"},{default:(0,i.w5)((()=>[(0,i.Uk)("change my email")])),_:1})]),(0,i._)("div",md,[(0,i.Wm)(c,{class:"button is-secondary m-2",to:"/change_password"},{default:(0,i.w5)((()=>[(0,i.Uk)("change my password")])),_:1})])])]),ud,(0,i._)("div",{class:"box button",onClick:t[0]||(t[0]=(...e)=>n.stripePortal&&n.stripePortal(...e))},pd)])}var wd={name:"AccountView",data(){return{user:{}}},beforeMount(){x.Z.get("auth/users/my_infos/",{headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.user=e.data,this.$store.user=this.user})).catch((e=>{console.log(e)}))},methods:{stripePortal(){(0,x.Z)({method:"get",url:"dss/portal/",headers:{Authorization:"Token "+this.$store.state.token}}).then((e=>{console.log(e.data),window.location.href=e.data.url})).catch((e=>{console.log(e)}))}}};const _d=(0,T.Z)(wd,[["render",gd]]);var vd=_d;const yd={class:"container is-max-desktop"},bd=(0,i._)("h1",{class:"title"},"Change Username",-1),kd=(0,i._)("label",{class:"label"},"Enter your new username",-1),fd={key:0};function Cd(e,t,s,o,n,c){return(0,i.wg)(),(0,i.iD)("div",yd,[(0,i._)("form",null,[bd,kd,(0,i.wy)((0,i._)("input",{type:"text",class:"input","onUpdate:modelValue":t[0]||(t[0]=e=>n.username=e),placeholder:"Username",required:""},null,512),[[a.nr,n.username]]),n.errors.length?((0,i.wg)(),(0,i.iD)("div",fd,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.values(n.errors[0]),(e=>((0,i.wg)(),(0,i.iD)("li",{key:e,style:{color:"red"}},(0,l.zw)(e[0]),1)))),128))])])):(0,i.kq)("",!0),(0,i._)("button",{class:"button is-success mt-2",onClick:t[1]||(t[1]=(...e)=>c.onSubmit&&c.onSubmit(...e))},"Confirm")])])}var Dd={name:"ChangeUsernameView",data(){return{username:"",errors:[]}},methods:{onSubmit(){this.errors=[],(0,x.Z)({url:"/auth/username/change/",method:"POST",data:{username:this.username},headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{console.log(e.data),(0,$t.toast)({message:"Username changed",type:"is-success",dismissible:!0,pauseOnHover:!0,position:"bottom-right",duration:5e3}),this.$router.push({name:"account"}),this.$store.state.user.username=this.username})).catch((e=>{this.errors.push(e.response.data),console.log(e.response.data)}))}}};const Md=(0,T.Z)(Dd,[["render",Cd]]);var Id=Md;const Pd={class:"container is-max-desktop"},Ld=(0,i._)("h1",{class:"title"},"Change Password",-1),xd=(0,i._)("label",{class:"label"},"Enter your new password",-1),Sd=(0,i._)("label",{class:"label"},"Confirm your new password",-1),Td={key:0};function $d(e,t,s,o,n,c){return(0,i.wg)(),(0,i.iD)("div",Pd,[(0,i._)("form",null,[Ld,xd,(0,i.wy)((0,i._)("input",{type:"password",class:"input","onUpdate:modelValue":t[0]||(t[0]=e=>n.password=e),required:"",placeholder:"Password"},null,512),[[a.nr,n.password]]),Sd,(0,i.wy)((0,i._)("input",{type:"password",class:"input","onUpdate:modelValue":t[1]||(t[1]=e=>n.password2=e),required:"",placeholder:"Password"},null,512),[[a.nr,n.password2]]),n.errors.length?((0,i.wg)(),(0,i.iD)("div",Td,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.values(n.errors[0]),(e=>((0,i.wg)(),(0,i.iD)("li",{key:e,style:{color:"red"}},(0,l.zw)(e[0]),1)))),128))])])):(0,i.kq)("",!0),(0,i._)("button",{class:"button is-success mt-2",onClick:t[2]||(t[2]=(...e)=>c.onSubmit&&c.onSubmit(...e))},"Change password")])])}var Ud={name:"ChangePasswordView",data(){return{password:"",password2:"",errors:[]}},methods:{onSubmit(){this.errors=[],(0,x.Z)({url:"/auth/password/change/",method:"POST",data:{password:this.password,password2:this.password2},headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{console.log(e.data),(0,$t.toast)({message:"Password changed",type:"is-success",dismissible:!0,pauseOnHover:!0,position:"bottom-right",duration:5e3}),this.$router.push({name:"account"})})).catch((e=>{this.errors.push(e.response.data),console.log(e.response.data)}))}}};const Ad=(0,T.Z)(Ud,[["render",$d]]);var qd=Ad;const Ed={class:"container is-max-desktop"},zd=(0,i._)("h1",{class:"title"},"Change email",-1),Gd=(0,i._)("label",{class:"label"},"Enter your new email",-1),Bd={key:0};function Vd(e,t,s,o,n,c){return(0,i.wg)(),(0,i.iD)("div",Ed,[(0,i._)("form",null,[zd,Gd,(0,i.wy)((0,i._)("input",{type:"text",class:"input",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e)},null,512),[[a.nr,n.email]]),n.errors.length?((0,i.wg)(),(0,i.iD)("div",Bd,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.values(n.errors[0]),(e=>((0,i.wg)(),(0,i.iD)("li",{key:e,style:{color:"red"}},(0,l.zw)(e[0]),1)))),128))])])):(0,i.kq)("",!0),(0,i._)("button",{class:"button is-success mt-2",onClick:t[1]||(t[1]=(...e)=>c.onSubmit&&c.onSubmit(...e))},"Confirm")])])}var Od={name:"ChangeEmailView",data(){return{email:"",errors:[]}},methods:{onSubmit(){(0,x.Z)({url:"/auth/email/request_change/",method:"POST",data:{email:this.email},headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{console.log(e.data),(0,$t.toast)({message:"Confirmation email sent for email change",type:"is-info",dismissible:!0,pauseOnHover:!0,position:"bottom-right",duration:5e3}),this.$router.push({name:"account"})})).catch((e=>{console.log(e.response.data)}))}}};const jd=(0,T.Z)(Od,[["render",Vd]]);var Hd=jd;const Nd=e=>((0,i.dD)("data-v-63ca643c"),e=e(),(0,i.Cn)(),e),Zd={class:"container is-hidden-mobile"},Wd=Nd((()=>(0,i._)("h1",{class:"title"},"Collections",-1))),Fd={class:"is-pulled-right mr-2"},Kd={key:2},Yd={key:0},Rd={class:"table is-fullwidth"},Qd=Nd((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"Title"),(0,i._)("th",null,"game"),(0,i._)("th",null,"rating"),(0,i._)("th"),(0,i._)("th",null,"last updated"),(0,i._)("th",null,"is shared"),(0,i._)("th",null,"protection")])],-1))),Jd=["onClick"],Xd={class:"table-name"},em=["onClick"],tm={key:0},sm={key:1},am={class:"is-pulled-right mr-2"},im={key:3},lm={key:0},om={class:"table is-fullwidth"},nm=Nd((()=>(0,i._)("th",null,"Title",-1))),cm=Nd((()=>(0,i._)("th",null,"game",-1))),rm=Nd((()=>(0,i._)("th",null,"rating",-1))),dm={key:0},mm=Nd((()=>(0,i._)("th",null,"author",-1))),um=Nd((()=>(0,i._)("th",null,"language",-1))),hm=Nd((()=>(0,i._)("th",null,"last updated",-1))),pm=Nd((()=>(0,i._)("th",null,"protection",-1))),gm={class:"table-name"},wm={key:0},_m={key:1},vm={key:2},ym={key:1},bm={key:0},km={key:1,class:"is-pulled-right mr-2"},fm={key:4},Cm={class:"search-form"},Dm=Nd((()=>(0,i._)("label",{class:"label m-2"},"Only officials",-1))),Mm=Nd((()=>(0,i._)("label",{for:"",class:"label m-2 ml-5"},"Language",-1))),Im=(0,i.uE)('<option value="all" data-v-63ca643c>--All--</option><option value="ar" data-v-63ca643c>Arabic</option><option value="cs" data-v-63ca643c>Czech</option><option value="zh" data-v-63ca643c>Chinese</option><option value="da" data-v-63ca643c>Danish</option><option value="nl" data-v-63ca643c>Dutch</option><option value="en" data-v-63ca643c>English</option><option value="fi" data-v-63ca643c>Finnish</option><option value="fr" data-v-63ca643c>French</option><option value="de" data-v-63ca643c>German</option><option value="el" data-v-63ca643c>Greek</option><option value="hi" data-v-63ca643c>Hindi</option><option value="hu" data-v-63ca643c>Hungarian</option><option value="it" data-v-63ca643c>Italian</option><option value="ja" data-v-63ca643c>Japanese</option><option value="ko" data-v-63ca643c>Korean</option><option value="no" data-v-63ca643c>Norwegian</option><option value="fa" data-v-63ca643c>Persian</option><option value="pl" data-v-63ca643c>Polish</option><option value="pt" data-v-63ca643c>Portuguese</option><option value="ru" data-v-63ca643c>Russian</option><option value="es" data-v-63ca643c>Spanish</option><option value="sv" data-v-63ca643c>Swedish</option><option value="th" data-v-63ca643c>Thai</option><option value="tr" data-v-63ca643c>Turkish</option><option value="vi" data-v-63ca643c>Vietnamese</option>',26),Pm=[Im],Lm={class:"search-form"},xm=Nd((()=>(0,i._)("span",{class:"label m-1"},"by",-1))),Sm={class:"select m-1 is-small"},Tm=Nd((()=>(0,i._)("option",{value:"game"},"Game",-1))),$m=Nd((()=>(0,i._)("option",{value:"title"},"Collection Title",-1))),Um=Nd((()=>(0,i._)("option",{value:"author"},"Author",-1))),Am=[Tm,$m,Um],qm={key:0,class:"my-pagination"},Em=["disabled"],zm=["disabled"],Gm={key:1},Bm={class:"table is-fullwidth"},Vm=Nd((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"Title"),(0,i._)("th",null,"game"),(0,i._)("th",null,"rating"),(0,i._)("th",null,"actions"),(0,i._)("th",null,"author"),(0,i._)("th",null,"language"),(0,i._)("th",null,"last updated"),(0,i._)("th",null,"protection")])],-1))),Om={class:"table-name"},jm={key:0},Hm={key:1};function Nm(e,t,s,o,n,c){const r=(0,i.up)("router-link"),d=(0,i.up)("fa"),m=(0,i.up)("OfficialMark"),u=(0,i.up)("ActionsButton"),h=(0,i.up)("TablesModal");return(0,i.wg)(),(0,i.iD)("div",Zd,[Wd,e.$store.state.user.is_subscriber?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"button is-primary is-small m-2",onClick:t[0]||(t[0]=(...e)=>c.collectionCreate&&c.collectionCreate(...e))}," + New Collection ")):(0,i.kq)("",!0),e.$store.state.user.is_subscriber?((0,i.wg)(),(0,i.j4)(r,{key:1,class:"button is-secondary is-small m-2",to:{name:"exchangesView"}},{default:(0,i.w5)((()=>[(0,i.Uk)(" Open exchanges interface ")])),_:1})):(0,i.kq)("",!0),(0,i._)("div",{onClick:t[1]||(t[1]=e=>n.showMyCollections=!n.showMyCollections),class:"topic"},[(0,i.Uk)("My Collections "),(0,i._)("div",Fd,[n.showMyCollections?((0,i.wg)(),(0,i.j4)(d,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),n.showMyCollections?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(d,{key:1,icon:"angle-right"}))])]),n.showMyCollections?((0,i.wg)(),(0,i.iD)("div",Kd,[n.myCollections.length?((0,i.wg)(),(0,i.iD)("div",Yd,[(0,i._)("table",Rd,[Qd,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.myCollections,(e=>((0,i.wg)(),(0,i.iD)("tr",{class:"hoverable",key:e.id,onClick:t=>c.viewCollectionDetail(e.id)},[(0,i._)("td",Xd,(0,l.zw)(c.charLimit(e.title)),1),(0,i._)("td",null,(0,l.zw)(c.charLimit(e.game)),1),(0,i._)("td",null,[e.votes_count>1?((0,i.wg)(),(0,i.j4)(d,{key:0,icon:"star",class:"star"})):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,l.zw)(e.rating)+"("+(0,l.zw)(e.votes_count)+") ",1)]),(0,i._)("td",null,[c.is_subscriber?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"button is-small is-secondary",onMouseover:t[2]||(t[2]=e=>n.allowViewCollectionDetail=!1),onMouseout:t[3]||(t[3]=e=>n.allowViewCollectionDetail=!0),onClick:t=>c.newCampainFromMyCollection(e)}," Use for a new campaign ",40,em)):(0,i.kq)("",!0)]),(0,i._)("td",null,(0,l.zw)(c.formatDate(e.date_updated)),1),(0,i._)("td",null,[e.is_shared?((0,i.wg)(),(0,i.j4)(d,{key:0,icon:"check",style:{color:"green"}})):(0,i.kq)("",!0)]),e.is_copy_free?((0,i.wg)(),(0,i.iD)("td",sm,[(0,i.Wm)(d,{icon:"unlock",style:{color:"green"}})])):((0,i.wg)(),(0,i.iD)("td",tm,[(0,i.Wm)(d,{icon:"lock",style:{color:"red"}})]))],8,Jd)))),128))])])])):(0,i.kq)("",!0)])):(0,i.kq)("",!0),(0,i._)("div",{onClick:t[4]||(t[4]=e=>n.showFavorites=!n.showFavorites),class:"topic"},[(0,i.Uk)("My Favorite Collections "),(0,i._)("div",am,[n.showFavorites?((0,i.wg)(),(0,i.j4)(d,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),n.showFavorites?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(d,{key:1,icon:"angle-right"}))])]),n.showFavorites?((0,i.wg)(),(0,i.iD)("div",im,[n.favorites.length?((0,i.wg)(),(0,i.iD)("div",lm,[(0,i._)("table",om,[(0,i._)("thead",null,[(0,i._)("tr",null,[nm,cm,rm,c.is_subscriber?((0,i.wg)(),(0,i.iD)("th",dm,"actions")):(0,i.kq)("",!0),mm,um,hm,pm])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.favorites,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("td",gm,(0,l.zw)(c.charLimit(e.title)),1),(0,i._)("td",null,[e.is_official?((0,i.wg)(),(0,i.j4)(m,{key:0,collection:e},null,8,["collection"])):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,l.zw)(c.charLimit(e.game)),1)]),(0,i._)("td",null,[e.votes_count>1?((0,i.wg)(),(0,i.j4)(d,{key:0,icon:"star",class:"star"})):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,l.zw)(e.rating)+"("+(0,l.zw)(e.votes_count)+") ",1)]),c.is_subscriber?((0,i.wg)(),(0,i.iD)("td",wm,[(0,i.Wm)(u,{collection:e,tables:n.tables,onFavoritesAction:t[5]||(t[5]=e=>c.favoritesAction(e)),onNewCampainFromMyCollection:t[6]||(t[6]=e=>c.newCampainFromMyCollection(e))},null,8,["collection","tables"])])):(0,i.kq)("",!0),(0,i._)("td",null,(0,l.zw)(c.charLimit(e.author)),1),(0,i._)("td",null,(0,l.zw)(e.language),1),(0,i._)("td",null,(0,l.zw)(c.formatDate(e.date_updated)),1),e.is_copy_free?((0,i.wg)(),(0,i.iD)("td",vm,[(0,i.Wm)(d,{icon:"unlock",style:{color:"green"}})])):((0,i.wg)(),(0,i.iD)("td",_m,[(0,i.Wm)(d,{icon:"lock",style:{color:"red"}})]))])))),128))])])])):((0,i.wg)(),(0,i.iD)("div",ym," you don't have favorites yet. "))])):(0,i.kq)("",!0),(0,i._)("div",{onClick:t[7]||(t[7]=e=>n.showSharedCollections=!n.showSharedCollections),class:"topic"},[(0,i.Uk)(" Browse Shared Collections "),e.$store.state.user.is_subscriber?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",bm," (Subscribers only)")),e.$store.state.user.is_subscriber?((0,i.wg)(),(0,i.iD)("div",km,[n.showSharedCollections?((0,i.wg)(),(0,i.j4)(d,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),n.showSharedCollections?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(d,{key:1,icon:"angle-right"}))])):(0,i.kq)("",!0)]),n.showSharedCollections&e.$store.state.user.is_subscriber?((0,i.wg)(),(0,i.iD)("div",fm,[(0,i._)("div",Cm,[Dm,(0,i.wy)((0,i._)("input",{type:"checkbox",class:"checkbox","onUpdate:modelValue":t[8]||(t[8]=e=>n.only_officials=e)},null,512),[[a.e8,n.only_officials]]),Mm,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>n.language=e),class:"m-2 is-small"},Pm,512),[[a.bM,n.language]])]),(0,i._)("div",Lm,[xm,(0,i._)("div",Sm,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>n.searchBy=e)},Am,512),[[a.bM,n.searchBy]])]),(0,i.wy)((0,i._)("input",{class:"input m-1 is-small",type:"text",placeholder:"Your search...","onUpdate:modelValue":t[11]||(t[11]=e=>n.searchText=e)},null,512),[[a.nr,n.searchText]]),(0,i._)("button",{class:"button is-primary m-1 is-small",onClick:t[12]||(t[12]=(...e)=>c.searchSharedCollections&&c.searchSharedCollections(...e))},"Go")]),(0,i._)("span",null,"Collections found: "+(0,l.zw)(n.sharedCount),1),n.sharedPages>1?((0,i.wg)(),(0,i.iD)("div",qm,[(0,i._)("button",{onClick:t[13]||(t[13]=e=>c.getSharedPage("previous")),disabled:1==n.sharedPage,class:"mr-5 button is-small is-rounded"},"<< ",8,Em),(0,i._)("div",null,"Page "+(0,l.zw)(n.sharedPage)+"/"+(0,l.zw)(n.sharedPages),1),(0,i._)("button",{onClick:t[14]||(t[14]=e=>c.getSharedPage("next")),disabled:n.sharedPages==n.sharedPage,class:"ml-5 button is-small is-rounded"},">> ",8,zm)])):(0,i.kq)("",!0),n.sharedCollections.length?((0,i.wg)(),(0,i.iD)("div",Gm,[(0,i._)("table",Bm,[Vm,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.sharedCollections,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("td",Om,(0,l.zw)(c.charLimit(e.title)),1),(0,i._)("td",null,[e.is_official?((0,i.wg)(),(0,i.j4)(m,{key:0,collection:e},null,8,["collection"])):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,l.zw)(c.charLimit(e.game)),1)]),(0,i._)("td",null,[e.votes_count>1?((0,i.wg)(),(0,i.j4)(d,{key:0,icon:"star",class:"star"})):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,l.zw)(e.rating)+"("+(0,l.zw)(e.votes_count)+") ",1)]),(0,i._)("td",null,[(0,i.Wm)(u,{collection:e,tables:n.tables,onFavoritesAction:t[15]||(t[15]=e=>c.favoritesAction(e))},null,8,["collection","tables"])]),(0,i._)("td",null,(0,l.zw)(c.charLimit(e.author)),1),(0,i._)("td",null,(0,l.zw)(e.language),1),(0,i._)("td",null,(0,l.zw)(c.formatDate(e.date_updated)),1),e.is_copy_free?((0,i.wg)(),(0,i.iD)("td",Hm,[(0,i.Wm)(d,{icon:"unlock",style:{color:"green"}})])):((0,i.wg)(),(0,i.iD)("td",jm,[(0,i.Wm)(d,{icon:"lock",style:{color:"red"}})]))])))),128))])])])):(0,i.kq)("",!0)])):(0,i.kq)("",!0),(0,i.Wm)(h,{show:n.showTablesModal,tables:n.tables,collection:n.collectionForModal,onCloseTablesModal:t[16]||(t[16]=e=>n.showTablesModal=!1)},null,8,["show","tables","collection"])])}s(541);const Zm={class:"dropdown is-hoverable"},Wm={class:"dropdown-trigger"},Fm={class:"button is-small","aria-haspopup":"true","aria-controls":"dropdown-menu3"},Km=(0,i._)("span",null,"actions",-1),Ym={class:"icon is-small"},Rm=(0,i._)("i",{class:"fas fa-angle-down","aria-hidden":"true"},null,-1),Qm={class:"dropdown-menu",id:"dropdown-menu3",role:"menu"},Jm={class:"dropdown-content"};function Xm(e,t,s,a,l,o){const n=(0,i.up)("fa");return(0,i.wg)(),(0,i.iD)("div",Zm,[(0,i._)("div",Wm,[(0,i._)("button",Fm,[Km,(0,i._)("span",Ym,[Rm,(0,i.Wm)(n,{icon:"angle-down"})])])]),(0,i._)("div",Qm,[(0,i._)("div",Jm,[(0,i._)("a",{class:"dropdown-item",onClick:t[0]||(t[0]=t=>e.$emit("newCampainFromMyCollection",s.collection))}," Use for a new campaign "),(0,i._)("a",{class:"dropdown-item",onClick:t[1]||(t[1]=t=>e.$emit("favoritesAction",s.collection))},[(0,i._)("span",null,[(0,i.Wm)(n,{icon:"heart",style:{color:"red"}}),(0,i.Uk)(" add/remove favorite ")])])])])])}var eu={name:"ActionsButton",components:{},props:["collection","tables"],data(){return{showTablesModal:!1}}};const tu=(0,T.Z)(eu,[["render",Xm]]);var su=tu;const au=e=>((0,i.dD)("data-v-55114893"),e=e(),(0,i.Cn)(),e),iu={class:"modal-content"},lu=au((()=>(0,i._)("h1",{class:"subtitle"}," Choose a table to create the new campaign ",-1))),ou={class:"buttons"},nu=["onClick"];function cu(e,t,s,a,o,n){return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)(["modal",{"is-active":s.show}])},[(0,i._)("div",{class:"modal-background",onClick:t[0]||(t[0]=e=>s.show=!s.show)}),(0,i._)("div",iu,[lu,(0,i._)("div",ou,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.tables,(e=>((0,i.wg)(),(0,i.iD)("button",{key:e.id,class:"button is-small",onClick:t=>n.createCampainFromCollection(e)},(0,l.zw)(n.charLimit(e.name)),9,nu)))),128))])]),(0,i._)("button",{class:"modal-close is-large","aria-label":"close",onClick:t[1]||(t[1]=e=>s.show=!s.show)})],2)}var ru={name:"TablesModal",props:["tables","collection","show"],methods:{charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},createCampainFromCollection(e){(0,x.Z)({method:"post",url:"/campains/create_campain_from_collection/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{collection_id:this.collection.id,table_id:e.id}}).then((t=>{(0,$t.toast)({message:`Campain created successfully for table ${e.name}`,position:"bottom-right",type:"is-success",dismissible:!0,pauseOnHover:!0,duration:5e3}),this.$emit("closeTablesModal")})).catch((e=>{console.log(e)}))}}};const du=(0,T.Z)(ru,[["render",cu],["__scopeId","data-v-55114893"]]);var mu=du,uu={name:"CollectionsView",components:{OfficialMark:Oo,ActionsButton:su,TablesModal:mu},data(){return{showTablesModal:!1,collectionForModal:null,allowViewCollectionDetail:!0,tables:[],searchBy:"game",searchText:"",language:"en",only_officials:!1,showMyCollections:!0,showFavorites:!1,showSharedCollections:!1,myCollections:[],favorites:[],sharedCollections:[],sharedNext:null,sharedPrevious:null,sharedCount:0,sharedPages:0,sharedPage:0}},beforeMount(){this.getMyCollectionList(),this.getFavoritesList()},computed:{is_subscriber(){return this.$store.state.user.is_subscriber}},methods:{charLimit(e){return e?e.length<=25?e:e.slice(0,22)+"...":""},newCampainFromMyCollection(e){this.tables.length<1?(0,$t.toast)({message:"You must have the role Owner or Game Master in at least 1 table",type:"is-warning",position:"center",dismissible:!0,pauseOnHover:!0,duration:5e3}):(this.collectionForModal=e,this.showTablesModal=!0)},getFavoritesList(){(0,x.Z)({method:"get",url:"campains/collection/favorite_collection/",headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{console.log("Response: ",e.data),this.favorites=e.data,console.log("favorites: ",this.favorites)})).catch((e=>{console.log(e)}))},favoritesAction(e){this.favorites.filter((t=>t.id==e.id)).length?this.removeFromFavorites(e):this.addToFavorites(e)},removeFromFavorites(e){(0,x.Z)({method:"delete",url:"campains/collection/favorite_collection/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{collection_id:e.id}}).then((t=>{console.log("Response: ",t.data),this.favorites=this.favorites.filter((t=>t.id!=e.id))})).catch((e=>{console.log(e)}))},addToFavorites(e){(0,x.Z)({method:"post",url:"campains/collection/favorite_collection/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{collection_id:e.id}}).then((t=>{console.log("Response: ",t.data),this.favorites=this.favorites.filter((t=>t.id!=e.id)),this.favorites.unshift(e)})).catch((e=>{console.log(e)}))},getSharedPage(e){let t="";"next"===e?t=this.sharedNext:"previous"===e&&(t=this.sharedPrevious),(0,x.Z)({method:"get",url:t,headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.sharedCollections=e.data.results,this.sharedNext=e.data.pagination.next,this.sharedPrevious=e.data.pagination.previous,this.sharedCount=e.data.pagination.total,this.sharedPages=e.data.pagination.pages,this.sharedPage=e.data.pagination.page,console.log("Response: ",e.data)})).catch((e=>{console.log(e)}))},searchSharedCollections(){this.sharedCollections=[],(0,x.Z)({method:"get",url:"campains/shared_collections/",headers:{Authorization:`Token ${this.$store.state.token}`},params:{search_by:this.searchBy,search_text:this.searchText,language:this.language,only_officials:this.only_officials}}).then((e=>{this.sharedCollections=e.data.results,this.sharedNext=e.data.pagination.next,this.sharedPrevious=e.data.pagination.previous,this.sharedCount=e.data.pagination.total,this.sharedPages=e.data.pagination.pages,this.sharedPage=e.data.pagination.page,console.log("Response: ",e.data)})).catch((e=>{console.log(e)}))},viewCollectionDetail(e){this.allowViewCollectionDetail&&this.$router.push({name:"collectionDetailView",params:{id:e}})},formatDate(e){const t=new Date(e);return new Intl.DateTimeFormat("default",{dateStyle:"long"}).format(t)},getMyCollectionList(){(0,x.Z)({method:"get",url:"campains/collections_crud/",headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.myCollections=e.data.collections,this.tables=e.data.tables,console.log("initial datas get: ",e.data)})).catch((e=>{console.log(e)}))},collectionCreate(){(0,x.Z)({method:"post",url:"campains/collections_crud/",headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{console.log(e.data),this.myCollections.unshift(e.data)})).catch((e=>{console.log(e)}))}}};const hu=(0,T.Z)(uu,[["render",Nm],["__scopeId","data-v-63ca643c"]]);var pu=hu;const gu=e=>((0,i.dD)("data-v-508a7c68"),e=e(),(0,i.Cn)(),e),wu={class:"columns"},_u={class:"column left-column"},vu={class:"subtitle"},yu={class:"center-elems unscrollable"},bu={key:1},ku={key:0},fu={key:1},Cu={key:2},Du=gu((()=>(0,i._)("span",{style:{color:"red"},class:"m-2"},"Are you really sure ?",-1))),Mu={href:"MDGuide.html",class:"info-icon tooltip ml-4",target:"_blank"},Iu=gu((()=>(0,i._)("span",{class:"tooltiptext"},"Edition tips",-1))),Pu=gu((()=>(0,i._)("div",null,null,-1))),Lu={class:"scrollable"},xu={class:"is-pulled-right mr-2"},Su={key:0},Tu={class:"field is-horizontal mt-2"},$u=gu((()=>(0,i._)("div",{class:"field-label"},[(0,i._)("label",{class:"label is-small"},"Name")],-1))),Uu={class:"field-body"},Au={class:"field"},qu={class:"control"},Eu={class:"field is-horizontal"},zu=gu((()=>(0,i._)("div",{class:"field-label"},[(0,i._)("label",{class:"label is-small"},"Game")],-1))),Gu={class:"field-body"},Bu={class:"field"},Vu={class:"control"},Ou={class:"field is-horizontal"},ju=gu((()=>(0,i._)("div",{class:"field-label"},[(0,i._)("label",{class:"label is-small"},"language")],-1))),Hu={class:"field-body"},Nu={class:"field"},Zu={class:"control"},Wu=(0,i.uE)('<option value="ar" data-v-508a7c68>Arabic</option><option value="cs" data-v-508a7c68>Czech</option><option value="zh" data-v-508a7c68>Chinese</option><option value="da" data-v-508a7c68>Danish</option><option value="nl" data-v-508a7c68>Dutch</option><option value="en" data-v-508a7c68>English</option><option value="fi" data-v-508a7c68>Finnish</option><option value="fr" data-v-508a7c68>French</option><option value="de" data-v-508a7c68>German</option><option value="el" data-v-508a7c68>Greek</option><option value="hi" data-v-508a7c68>Hindi</option><option value="hu" data-v-508a7c68>Hungarian</option><option value="it" data-v-508a7c68>Italian</option><option value="ja" data-v-508a7c68>Japanese</option><option value="ko" data-v-508a7c68>Korean</option><option value="no" data-v-508a7c68>Norwegian</option><option value="fa" data-v-508a7c68>Persian</option><option value="pl" data-v-508a7c68>Polish</option><option value="pt" data-v-508a7c68>Portuguese</option><option value="ru" data-v-508a7c68>Russian</option><option value="es" data-v-508a7c68>Spanish</option><option value="sv" data-v-508a7c68>Swedish</option><option value="th" data-v-508a7c68>Thai</option><option value="tr" data-v-508a7c68>Turkish</option><option value="vi" data-v-508a7c68>Vietnamese</option>',25),Fu=[Wu],Ku={class:"field is-horizontal"},Yu=gu((()=>(0,i._)("div",{class:"field-label"},[(0,i._)("label",{class:"label is-small"},"Image url")],-1))),Ru={class:"field-body"},Qu={class:"field"},Ju={class:"control"},Xu={class:"field is-horizontal"},eh=gu((()=>(0,i._)("div",{class:"field-label"},[(0,i._)("label",{class:"label is-small"},"Description")],-1))),th={class:"field-body"},sh={class:"field"},ah={class:"control"},ih={class:"m-4"},lh={class:"label"},oh=gu((()=>(0,i._)("label",{class:"label"}," Is totally free (no copyright, users may use your creations in their own shared collections) ? ",-1))),nh=["disabled"],ch={class:"center-elems"},rh=["src"],dh={class:"is-pulled-right mr-2"},mh={key:1},uh={key:1,class:"table is-fullwidth is-narrow"},hh=gu((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"Name"),(0,i._)("th",null,"Type")])],-1))),ph=["onClick"],gh={class:"is-pulled-right mr-2"},wh={key:2},_h={key:1,class:"table is-fullwidth is-narrow"},vh=gu((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"Name")])],-1))),yh=["onClick"],bh={class:"column is-6"},kh={class:"unscrollable"},fh={key:0},Ch={key:1},Dh={class:"subtitle edit-title"},Mh={class:"scrollable"};function Ih(e,t,s,o,n,c){const r=(0,i.up)("fa"),d=(0,i.up)("ItemForm"),m=(0,i.up)("PcForm");return(0,i.wg)(),(0,i.iD)("div",{class:"is-hidden-mobile",onKeydown:t[22]||(t[22]=(0,a.D2)((0,a.iM)(((...e)=>c.saveCollection&&c.saveCollection(...e)),["ctrl","prevent","stop"]),["s"]))},[(0,i._)("div",wu,[(0,i._)("div",_u,[(0,i._)("h1",vu,(0,l.zw)(c.charLimit(n.collection.title)),1),(0,i._)("div",yu,[c.anyModif?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"button is_secondary is-small",onClick:t[0]||(t[0]=(...e)=>c.cancel&&c.cancel(...e))},"Cancel")):(0,i.kq)("",!0),e.$store.state.user?((0,i.wg)(),(0,i.iD)("div",bu,[e.$store.state.user.is_subscriber?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"button is-success is-small ml-2",onClick:t[1]||(t[1]=(...e)=>c.saveCollection&&c.saveCollection(...e)),id:"save-button"}," Save Collection ")):(0,i.kq)("",!0)])):(0,i.kq)("",!0),(0,i._)("button",{class:"button is-warning is-small ml-2",onClick:t[2]||(t[2]=e=>n.allowDeletion=!n.allowDeletion)},[n.allowDeletion?((0,i.wg)(),(0,i.iD)("span",fu," NO ! Cancel ! ")):((0,i.wg)(),(0,i.iD)("span",ku," Delete Collection "))]),n.allowDeletion?((0,i.wg)(),(0,i.iD)("div",Cu,[Du,(0,i._)("button",{class:"button is-danger is-small ml-2",onClick:t[3]||(t[3]=(...e)=>c.deleteCollection&&c.deleteCollection(...e))}," YES ! Confirm deletion ")])):(0,i.kq)("",!0),(0,i._)("a",Mu,[(0,i.Wm)(r,{icon:"circle-info"}),Iu])]),Pu,(0,i._)("div",Lu,[(0,i._)("div",{onClick:t[4]||(t[4]=e=>n.showEdit=!n.showEdit),class:"topic"},[(0,i.Uk)("Edit "),(0,i._)("div",xu,[n.showEdit?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),n.showEdit?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(r,{key:1,icon:"angle-right"}))])]),n.showEdit?((0,i.wg)(),(0,i.iD)("div",Su,[(0,i._)("div",Tu,[$u,(0,i._)("div",Uu,[(0,i._)("div",Au,[(0,i._)("div",qu,[(0,i.wy)((0,i._)("input",{class:"input is-small",type:"text",placeholder:"Collection name","onUpdate:modelValue":t[5]||(t[5]=e=>n.collection.title=e)},null,512),[[a.nr,n.collection.title]])])])])]),(0,i._)("div",Eu,[zu,(0,i._)("div",Gu,[(0,i._)("div",Bu,[(0,i._)("div",Vu,[(0,i.wy)((0,i._)("input",{class:"input is-small",type:"text",placeholder:"Game","onUpdate:modelValue":t[6]||(t[6]=e=>n.collection.game=e)},null,512),[[a.nr,n.collection.game]])])])])]),(0,i._)("div",Ou,[ju,(0,i._)("div",Hu,[(0,i._)("div",Nu,[(0,i._)("div",Zu,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>n.collection.language=e),class:"is-small"},Fu,512),[[a.bM,n.collection.language]])])])])]),(0,i._)("div",Ku,[Yu,(0,i._)("div",Ru,[(0,i._)("div",Qu,[(0,i._)("div",Ju,[(0,i.wy)((0,i._)("input",{class:"input is-small",type:"text",placeholder:"Image url","onUpdate:modelValue":t[8]||(t[8]=e=>n.collection.image_url=e)},null,512),[[a.nr,n.collection.image_url]])])])])]),(0,i._)("div",Xu,[eh,(0,i._)("div",th,[(0,i._)("div",sh,[(0,i._)("div",ah,[(0,i.wy)((0,i._)("textarea",{class:"textarea is-small",placeholder:"Description","onUpdate:modelValue":t[9]||(t[9]=e=>n.collection.description=e)},"\n                  ",512),[[a.nr,n.collection.description]])])])])]),(0,i._)("p",ih,[(0,i._)("label",lh,[(0,i.Uk)("Share with the community: "),(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=e=>n.collection.is_shared=e)},null,512),[[a.e8,n.collection.is_shared]])]),oh,(0,i._)("button",{onClick:t[11]||(t[11]=e=>n.IUnderstand=!0),class:"button is-small is-warning mr-4"}," I understand "),(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=e=>n.collection.is_copy_free=e),onClick:t[13]||(t[13]=e=>n.IUnderstand=!1),disabled:c.copyFreeCheckbox},null,8,nh),[[a.e8,n.collection.is_copy_free]])]),(0,i._)("div",ch,[""!==n.collection.image_url?((0,i.wg)(),(0,i.iD)("img",{key:0,src:n.collection.image_url,alt:"[image not found]"},null,8,rh)):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),(0,i._)("div",{onClick:t[14]||(t[14]=e=>n.showItems=!n.showItems),class:"topic"},[(0,i.Uk)("Items "),(0,i._)("div",dh,[n.showItems?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),n.showItems?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(r,{key:1,icon:"angle-right"}))])]),n.showItems?((0,i.wg)(),(0,i.iD)("div",mh,[c.is_subscriber?((0,i.wg)(),(0,i.iD)("p",{key:0,class:"hoverable",onClick:t[15]||(t[15]=(...e)=>c.createItem&&c.createItem(...e))},"+ New Item")):(0,i.kq)("",!0),n.itemList.length?((0,i.wg)(),(0,i.iD)("table",uh,[hh,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.itemList,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id,class:(0,l.C_)(["hoverable is-small",{"item-creation":e.id.startsWith("temp_id_")}]),onClick:t=>c.editItem(e)},[(0,i._)("td",null,(0,l.zw)(e.name),1),(0,i._)("td",{class:(0,l.C_)(e.type)},(0,l.zw)(e.type),3)],10,ph)))),128))])])):(0,i.kq)("",!0)])):(0,i.kq)("",!0),(0,i._)("div",{onClick:t[16]||(t[16]=e=>n.showPCs=!n.showPCs),class:"topic"},[(0,i.Uk)("PCs "),(0,i._)("div",gh,[n.showPCs?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"angle-down"})):(0,i.kq)("",!0),n.showPCs?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(r,{key:1,icon:"angle-right"}))])]),n.showPCs?((0,i.wg)(),(0,i.iD)("div",wh,[c.is_subscriber?((0,i.wg)(),(0,i.iD)("p",{key:0,class:"hoverable",onClick:t[17]||(t[17]=(...e)=>c.createPc&&c.createPc(...e))},"+ New PC")):(0,i.kq)("",!0),n.pcList.length?((0,i.wg)(),(0,i.iD)("table",_h,[vh,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.pcList,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id,class:(0,l.C_)(["hoverable is-small",{"item-creation":e.id.startsWith("temp_id_")}]),onClick:t=>c.editPc(e)},[(0,i._)("td",null,(0,l.zw)(e.name),1)],10,yh)))),128))])])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)])]),(0,i._)("div",bh,[(0,i._)("div",kh,[n.showItemForm?((0,i.wg)(),(0,i.iD)("div",fh,[(0,i._)("h1",{class:(0,l.C_)(["subtitle",n.itemToEdit.type])},(0,l.zw)(c.charLimit(n.itemToEdit.name)),3)])):(0,i.kq)("",!0),n.showPcForm?((0,i.wg)(),(0,i.iD)("div",Ch,[(0,i._)("h1",Dh,(0,l.zw)(c.charLimit(n.pcToEdit.name)),1)])):(0,i.kq)("",!0)]),(0,i._)("div",Mh,[n.showItemForm?((0,i.wg)(),(0,i.j4)(d,{key:0,showItemForm:n.showItemForm,item:n.itemToEdit,onUpdateItem:t[18]||(t[18]=e=>c.updateItem(e)),onDeleteItem:t[19]||(t[19]=e=>c.deleteItem(e))},null,8,["showItemForm","item"])):(0,i.kq)("",!0),n.showPcForm?((0,i.wg)(),(0,i.j4)(m,{key:1,showPcForm:n.showPcForm,pc:n.pcToEdit,onUpdatePc:t[20]||(t[20]=e=>c.updatePc(e)),onDeletePc:t[21]||(t[21]=e=>c.deletePc(e))},null,8,["showPcForm","pc"])):(0,i.kq)("",!0)])])])],32)}const Ph=e=>((0,i.dD)("data-v-7b5d391f"),e=e(),(0,i.Cn)(),e),Lh={class:"control"},xh={key:0,class:"item-creation"},Sh=Ph((()=>(0,i._)("label",{class:"label"},"Name",-1))),Th=Ph((()=>(0,i._)("label",{class:"label"},"Image url",-1))),$h={class:"center-elems"},Uh=["src"],Ah={key:1,src:"https://bulma.io/images/placeholders/128x128.png",alt:"not found",class:"image-preview"},qh=Ph((()=>(0,i._)("label",{class:"label"},"Type",-1))),Eh={class:"is-flex is-justify-content-space-between m-2"},zh=Ph((()=>(0,i._)("label",{class:"label"},"PC's infos",-1))),Gh=["hidden"],Bh=["hidden"],Vh=["innerHTML"],Oh={class:"is-flex is-justify-content-space-between m-2"},jh=Ph((()=>(0,i._)("label",{class:"label"},"GM's infos",-1))),Hh=["hidden"],Nh=["hidden"],Zh=["innerHTML"],Wh={class:"mt-2"};function Fh(e,t,s,o,n,c){return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)({"is-active":s.showItemForm})},[(0,i._)("form",null,[(0,i._)("div",Lh,[s.item.id.startsWith("temp_id_")?((0,i.wg)(),(0,i.iD)("div",xh,"* Item Creation")):(0,i.kq)("",!0),Sh,(0,i.wy)((0,i._)("input",{class:"input",type:"text",placeholder:"Name","onUpdate:modelValue":t[0]||(t[0]=e=>s.item.name=e),onKeyup:t[1]||(t[1]=(...e)=>c.updateItem&&c.updateItem(...e))},null,544),[[a.nr,s.item.name]]),Th,(0,i._)("div",$h,[(0,i.wy)((0,i._)("input",{class:"input mr-2",type:"text",placeholder:"image url","onUpdate:modelValue":t[2]||(t[2]=e=>s.item.image_url=e),onKeyup:t[3]||(t[3]=(...e)=>c.updateItem&&c.updateItem(...e))},null,544),[[a.nr,s.item.image_url]]),s.item.image_url?((0,i.wg)(),(0,i.iD)("img",{key:0,src:s.item.image_url,alt:"not found",class:"image-preview"},null,8,Uh)):((0,i.wg)(),(0,i.iD)("img",Ah))]),qh,(0,i._)("div",{class:"select",onChange:t[5]||(t[5]=(...e)=>c.updateItem&&c.updateItem(...e))},[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.item.type=e)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.itemTypes,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e},(0,l.zw)(e),1)))),128))],512),[[a.bM,s.item.type]])],32),(0,i._)("div",Eh,[zh,(0,i._)("button",{class:"is-small",onClick:t[6]||(t[6]=e=>n.showpcsPreview=!n.showpcsPreview)},"preview")]),(0,i._)("div",{hidden:n.showpcsPreview},[(0,i.wy)((0,i._)("textarea",{onKeyup:t[7]||(t[7]=(...t)=>e.updatePc&&e.updatePc(...t)),class:"textarea",placeholder:"Informations for the players","onUpdate:modelValue":t[8]||(t[8]=e=>s.item.data_pc=e)},"\n              ",544),[[a.nr,s.item.data_pc]])],8,Gh),(0,i._)("div",{onClick:t[9]||(t[9]=e=>n.showpcsPreview=!1),hidden:!n.showpcsPreview,class:"content border p-1 hoverable"},[(0,i._)("div",{innerHTML:c.pcPreview},null,8,Vh)],8,Bh),(0,i._)("div",Oh,[jh,(0,i._)("button",{class:"is-small",onClick:t[10]||(t[10]=e=>n.showgmPreview=!n.showgmPreview)},"preview")]),(0,i._)("div",{hidden:n.showgmPreview},[(0,i.wy)((0,i._)("textarea",{onKeyup:t[11]||(t[11]=(...t)=>e.updatePc&&e.updatePc(...t)),class:"textarea",placeholder:"Informations for the GM only","onUpdate:modelValue":t[12]||(t[12]=e=>s.item.data_gm=e)},"\n              ",544),[[a.nr,s.item.data_gm]])],8,Hh),(0,i._)("div",{onClick:t[13]||(t[13]=e=>n.showgmPreview=!1),hidden:!n.showgmPreview,class:"content border p-1 hoverable"},[(0,i._)("div",{innerHTML:c.gmPreview},null,8,Zh)],8,Nh)])]),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.errors,(e=>((0,i.wg)(),(0,i.iD)("p",{key:e,style:{color:"red"}},(0,l.zw)(e),1)))),128))]),(0,i._)("div",Wh,[(0,i._)("button",{class:"button is-danger is-small",onClick:t[14]||(t[14]=t=>e.$emit("deleteItem",s.item.id))},"Delete")])],2)}var Kh={name:"ItemForm",props:["showItemForm","item"],data(){return{itemTypes:["NPC","LOCATION","ORGANIZATION","EVENT","NOTE","RECAP","MISC","MEMO"],showpcsPreview:!1,showgmPreview:!1,errors:[],itemName:this.item.name,itemType:this.item.type,itemImageUrl:this.item.imageUrl,itemPCsInfos:this.item.pcsInfos,itemGmInfos:this.item.gmInfos}},computed:{pcPCsInfos(){return this.item.data_pc},pcPreview(){let e="";return null!==this.pcPCsInfos&&void 0!==this.pcPCsInfos&&(e=marked.parse(this.pcPCsInfos)),e},pcGmInfos(){return this.item.data_gm},gmPreview(){let e="";return null!==this.pcGmInfos&&void 0!==this.pcGmInfos&&(e=marked.parse(this.pcGmInfos)),e}},methods:{updateItem(){this.$emit("updateItem",this.item)},deleteItem(e){this.$emit("deleteItem",e.id)}}};const Yh=(0,T.Z)(Kh,[["render",Fh],["__scopeId","data-v-7b5d391f"]]);var Rh=Yh;const Qh=e=>((0,i.dD)("data-v-fc4655d0"),e=e(),(0,i.Cn)(),e),Jh={class:"control"},Xh={key:0,class:"item-creation"},ep=Qh((()=>(0,i._)("label",{class:"label"},"Name",-1))),tp=Qh((()=>(0,i._)("label",{class:"label"},"Image url",-1))),sp={class:"center-elems"},ap=["src"],ip={key:1,src:"https://bulma.io/images/placeholders/128x128.png",alt:"not found",class:"image-preview"},lp={class:"is-flex is-justify-content-space-between m-2"},op=Qh((()=>(0,i._)("label",{class:"label"},"PC's infos",-1))),np=["hidden"],cp=["hidden"],rp=["innerHTML"],dp={class:"is-flex is-justify-content-space-between m-2"},mp=Qh((()=>(0,i._)("label",{class:"label"},"Player's infos",-1))),up=["hidden"],hp=["hidden"],pp=["innerHTML"],gp={class:"is-flex is-justify-content-space-between m-2"},wp=Qh((()=>(0,i._)("label",{class:"label"},"GM's infos",-1))),_p=["hidden"],vp=["hidden"],yp=["innerHTML"],bp={class:"mt-2"};function kp(e,t,s,o,n,c){return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)({"is-active":s.showPcForm})},[(0,i._)("form",null,[(0,i._)("div",Jh,[s.pc.id.startsWith("temp_id_")?((0,i.wg)(),(0,i.iD)("div",Xh,"* PC Creation")):(0,i.kq)("",!0),ep,(0,i.wy)((0,i._)("input",{class:"input",type:"text",placeholder:"Name","onUpdate:modelValue":t[0]||(t[0]=e=>s.pc.name=e),onKeyup:t[1]||(t[1]=(...e)=>c.updatePc&&c.updatePc(...e))},null,544),[[a.nr,s.pc.name]]),tp,(0,i._)("div",sp,[(0,i.wy)((0,i._)("input",{class:"input mr-2",type:"text",placeholder:"image url","onUpdate:modelValue":t[2]||(t[2]=e=>s.pc.image_url=e),onKeyup:t[3]||(t[3]=(...e)=>c.updatePc&&c.updatePc(...e))},null,544),[[a.nr,s.pc.image_url]]),s.pc.image_url?((0,i.wg)(),(0,i.iD)("img",{key:0,src:s.pc.image_url,alt:"not found",class:"image-preview"},null,8,ap)):((0,i.wg)(),(0,i.iD)("img",ip))]),(0,i._)("div",lp,[op,(0,i._)("button",{class:"is-small",onClick:t[4]||(t[4]=e=>n.showpcsPreview=!n.showpcsPreview)},"preview")]),(0,i._)("div",{hidden:n.showpcsPreview},[(0,i.wy)((0,i._)("textarea",{onKeyup:t[5]||(t[5]=(...e)=>c.updatePc&&c.updatePc(...e)),class:"textarea",placeholder:"Informations for the players","onUpdate:modelValue":t[6]||(t[6]=e=>s.pc.data_pc=e)},"\n              ",544),[[a.nr,s.pc.data_pc]])],8,np),(0,i._)("div",{onClick:t[7]||(t[7]=e=>n.showpcsPreview=!1),hidden:!n.showpcsPreview,class:"content border p-1 hoverable"},[(0,i._)("div",{innerHTML:c.pcPreview},null,8,rp)],8,cp),(0,i._)("div",dp,[mp,(0,i._)("button",{class:"is-small",onClick:t[8]||(t[8]=e=>n.showplayerPreview=!n.showplayerPreview)},"preview")]),(0,i._)("div",{hidden:n.showplayerPreview},[(0,i.wy)((0,i._)("textarea",{onKeyup:t[9]||(t[9]=(...e)=>c.updatePc&&c.updatePc(...e)),class:"textarea",placeholder:"Informations for the player of the character","onUpdate:modelValue":t[10]||(t[10]=e=>s.pc.data_player=e)},"\n              ",544),[[a.nr,s.pc.data_player]])],8,up),(0,i._)("div",{onClick:t[11]||(t[11]=e=>n.showplayerPreview=!1),hidden:!n.showplayerPreview,class:"content border p-1 hoverable"},[(0,i._)("div",{innerHTML:c.playerPreview},null,8,pp)],8,hp),(0,i._)("div",gp,[wp,(0,i._)("button",{class:"is-small",onClick:t[12]||(t[12]=e=>n.showgmPreview=!n.showgmPreview)},"preview")]),(0,i._)("div",{hidden:n.showgmPreview},[(0,i.wy)((0,i._)("textarea",{onKeyup:t[13]||(t[13]=(...e)=>c.updatePc&&c.updatePc(...e)),class:"textarea",placeholder:"Informations for the GM only","onUpdate:modelValue":t[14]||(t[14]=e=>s.pc.data_gm=e)},"\n              ",544),[[a.nr,s.pc.data_gm]])],8,_p),(0,i._)("div",{onClick:t[15]||(t[15]=e=>n.showgmPreview=!1),hidden:!n.showgmPreview,class:"content border p-1 hoverable"},[(0,i._)("div",{innerHTML:c.gmPreview},null,8,yp)],8,vp)])]),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.errors,(e=>((0,i.wg)(),(0,i.iD)("p",{key:e,style:{color:"red"}},(0,l.zw)(e),1)))),128))]),(0,i._)("div",bp,[(0,i._)("button",{class:"button is-danger is-small",onClick:t[16]||(t[16]=t=>e.$emit("deletePc",s.pc.id))},"Delete")])],2)}var fp={name:"PcForm",props:["showPcForm","pc"],data(){return{showpcsPreview:!1,showplayerPreview:!1,showgmPreview:!1,errors:[],pcName:this.pc.name,pcImageUrl:this.pc.imageUrl}},computed:{pcPCsInfos(){return this.pc.data_pc},pcPreview(){let e="";return null!==this.pcPCsInfos&&void 0!==this.pcPCsInfos&&(e=marked.parse(this.pcPCsInfos)),e},playerInfos(){return this.pc.data_player},playerPreview(){let e="";return null!==this.playerInfos&&void 0!==this.playerInfos&&(e=marked.parse(this.playerInfos)),e},pcGmInfos(){return this.pc.data_gm},gmPreview(){let e="";return null!==this.pcGmInfos&&void 0!==this.pcGmInfos&&(e=marked.parse(this.pcGmInfos)),e}},methods:{updatePc(){this.$emit("updatePc",this.pc)},deletePc(e){this.$emit("deletePc",e.id)}}};const Cp=(0,T.Z)(fp,[["render",kp],["__scopeId","data-v-fc4655d0"]]);var Dp=Cp,Mp={name:"CollectionDetailView",components:{ItemForm:Rh,PcForm:Dp},data(){return{IUnderstand:!1,initID:0,showEdit:!0,showItems:!1,showPCs:!1,allowDeletion:!1,collection:{},id:null,showItemForm:!1,showPcForm:!1,itemList:[],pcList:[],itemToEdit:{},itemCreatedList:{},itemUpdatedList:{},itemDeletedList:[],pcToEdit:{},pcCreatedList:{},pcUpdatedList:{},pcDeletedList:[]}},beforeMount(){this.id=this.$route.params.id,this.getCollectionDetail()},computed:{is_subscriber(){return this.$store.state.user.is_subscriber},copyFreeCheckbox(){return!this.IUnderstand&&!this.collection.is_copy_free},anyModif(){return Object.keys(this.itemCreatedList).length>0||Object.keys(this.itemUpdatedList).length>0||this.itemDeletedList.length>0||Object.keys(this.pcCreatedList).length>0||Object.keys(this.pcUpdatedList).length>0}},methods:{charLimit(e){return e?e.length<=25?e:e.slice(0,22)+"...":""},cancel(){this.$router.push({name:"CollectionsView"})},get_temp_id(){return this.initID+=1,"temp_id_"+this.initID.toString()},editPc(e){this.showItemForm=!1,this.showPcForm=!0,this.pcToEdit=e},editItem(e){this.showPcForm=!1,this.showItemForm=!0,this.itemToEdit=e},updatePc(e){e.id.startsWith("temp_id_")?this.pcCreatedList[e.id]=e:this.pcUpdatedList[e.id]=e},updateItem(e){e.id.startsWith("temp_id_")?this.itemCreatedList[e.id]=e:this.itemUpdatedList[e.id]=e},createPc(){let e={id:this.get_temp_id(),name:"New PC"};this.pcList.unshift(e),this.pcCreatedList[e.id]=e},createItem(){let e={id:this.get_temp_id(),name:"New Item",type:"MEMO"};this.itemList.unshift(e),this.itemCreatedList[e.id]=e},deletePc(e){this.pcList=this.pcList.filter((t=>t.id!==e)),e.startsWith("temp_id_")?delete this.pcCreatedList[e]:this.pcDeletedList.push(e),delete this.pcUpdatedList[e],this.showPcForm=!1,this.pcToEdit={}},deleteItem(e){this.itemList=this.itemList.filter((t=>t.id!==e)),e.startsWith("temp_id_")?delete this.itemCreatedList[e]:this.itemDeletedList.push(e),delete this.itemUpdatedList[e],this.showItemForm=!1,this.itemToEdit={}},getCollectionDetail(){(0,x.Z)({method:"get",url:"/campains/collection/",headers:{Authorization:`Token ${this.$store.state.token}`},params:{id:this.id}}).then((e=>{this.collection=e.data.collection_details,this.itemList=e.data.items,this.pcList=e.data.pcs,this.itemCreatedList={},this.itemUpdatedList={},this.itemDeletedList=[],this.pcCreatedList={},this.pcUpdatedList={},this.pcDeletedList=[],"id"in this.itemToEdit&&this.itemToEdit.id.startsWith("temp_id_")&&(this.itemToEdit={},this.showItemForm=!1),"id"in this.pcToEdit&&this.pcToEdit.id.startsWith("temp_id_")&&(this.pcToEdit={},this.showPcForm=!1)})).catch((e=>{console.log(e)}))},deleteCollection(){(0,x.Z)({method:"delete",url:"campains/collections_crud/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{id:this.id}}).then((e=>{this.$router.push({name:"CollectionsView"})})).catch((e=>{console.log(e.message)}))},saveCollection(){(0,x.Z)({method:"put",url:"campains/collections_crud/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{id:this.id,title:this.collection.title,game:this.collection.game,language:this.collection.language,description:this.collection.description,image_url:this.collection.image_url,is_shared:this.collection.is_shared,is_copy_free:this.collection.is_copy_free,items_to_create:this.itemCreatedList,items_to_update:this.itemUpdatedList,items_to_delete:this.itemDeletedList,pcs_to_create:this.pcCreatedList,pcs_to_update:this.pcUpdatedList,pcs_to_delete:this.pcDeletedList}}).then((e=>{(0,$t.toast)({message:"Collection saved",type:"is-success",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:2e3}),this.getCollectionDetail()})).catch((e=>{(0,$t.toast)({message:"Saving aborted: something went wrong !",type:"is-danger",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:2e3}),console.log(e.message)}))}}};const Ip=(0,T.Z)(Mp,[["render",Ih],["__scopeId","data-v-508a7c68"]]);var Pp=Ip;const Lp=e=>((0,i.dD)("data-v-08659dcb"),e=e(),(0,i.Cn)(),e),xp={class:"container is-hidden-mobile"},Sp=Lp((()=>(0,i._)("h1",{class:"title"},"Exchanges",-1))),Tp={class:"columns"},$p={class:"column"},Up={key:0},Ap={class:"radio m-2"},qp={class:"radio m-2"},Ep=Lp((()=>(0,i._)("option",{selected:"",hidden:"",value:"null"},"Choose a campaign",-1))),zp=["value"],Gp={key:0},Bp=Lp((()=>(0,i._)("option",{selected:"",hidden:"",value:"null"},"Choose a collection",-1))),Vp=Lp((()=>(0,i._)("option",{value:"",disabled:""},"--- My collections ---",-1))),Op=["value"],jp={key:0},Hp=Lp((()=>(0,i._)("option",{value:"",disabled:""},"--- Favorites ---",-1))),Np=["value"],Zp={key:0},Wp={key:1},Fp={class:"subtitle"},Kp={key:0},Yp={class:"is-pulled-right"},Rp={key:0},Qp={key:1},Jp={class:"scrollable"},Xp={key:0,class:"table is-fullwidth"},eg=Lp((()=>(0,i._)("th",null,"Name",-1))),tg=Lp((()=>(0,i._)("th",null,"Type",-1))),sg={key:0},ag=["onClick"],ig={key:0},lg={key:1,class:"table is-fullwidth"},og=Lp((()=>(0,i._)("th",null,"Name",-1))),ng={key:0},cg=["onClick"],rg={key:0},dg={class:"column"},mg={key:0,class:"label"},ug={class:"control"},hg={class:"radio m-2"},pg={class:"radio m-2"},gg=Lp((()=>(0,i._)("option",{selected:"",hidden:"",value:"null"},"Choose a campaign",-1))),wg=["value"],_g={key:0},vg=Lp((()=>(0,i._)("option",{selected:"",hidden:"",value:"null"},"Choose a collection",-1))),yg=Lp((()=>(0,i._)("option",{value:"",disabled:""},"--- My collections ---",-1))),bg=["value"],kg={key:0},fg=Lp((()=>(0,i._)("option",{value:"",disabled:""},"--- Favorites ---",-1))),Cg=["value"],Dg={key:0},Mg={key:1},Ig={class:"subtitle"},Pg={key:0},Lg={key:0},xg={key:1},Sg={class:"scrollable"},Tg={key:0,class:"table is-fullwidth"},$g={key:0},Ug=Lp((()=>(0,i._)("th",null,"Type",-1))),Ag=Lp((()=>(0,i._)("th",null,"Name",-1))),qg=["onClick"],Eg={key:0},zg={key:1,class:"table is-fullwidth"},Gg={key:0},Bg=Lp((()=>(0,i._)("th",null,"Name",-1))),Vg=["onClick"],Og={key:0};function jg(e,t,s,o,n,c){const r=(0,i.up)("fa");return(0,i.wg)(),(0,i.iD)("div",xp,[Sp,(0,i._)("div",Tp,[(0,i._)("div",$p,[null===n.columnASelected?((0,i.wg)(),(0,i.iD)("div",Up,[(0,i.Uk)(" Please select: "),(0,i._)("label",Ap,[(0,i.wy)((0,i._)("input",{type:"radio",name:"answer","onUpdate:modelValue":t[0]||(t[0]=e=>n.typeA=e),value:"campain"},null,512),[[a.G2,n.typeA]]),(0,i.Uk)(" a Campaign ")]),(0,i._)("label",qp,[(0,i.wy)((0,i._)("input",{type:"radio",name:"answer","onUpdate:modelValue":t[1]||(t[1]=e=>n.typeA=e),value:"collection"},null,512),[[a.G2,n.typeA]]),(0,i.Uk)(" a Collection ")]),"campain"===n.typeA?(0,i.wy)(((0,i.wg)(),(0,i.iD)("select",{key:0,class:"select is-fullwidth","onUpdate:modelValue":t[2]||(t[2]=e=>n.columnASelected=e),onChange:t[3]||(t[3]=e=>c.getCampainA(n.columnASelected))},[Ep,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.campains,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e,key:e.id},[(0,i._)("span",null,[(0,i.Uk)(" ["+(0,l.zw)(c.charLimit(e.table))+"] ["+(0,l.zw)(c.charLimit(e.game))+"] ",1),e.is_copy_free?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",Gp," [copy restricted] ")),(0,i.Uk)(" "+(0,l.zw)(c.charLimit(e.title)),1)])],8,zp)))),128))],544)),[[a.bM,n.columnASelected]]):(0,i.kq)("",!0),"collection"===n.typeA?(0,i.wy)(((0,i.wg)(),(0,i.iD)("select",{key:1,class:"select is-fullwidth","onUpdate:modelValue":t[4]||(t[4]=e=>n.columnASelected=e),onChange:t[5]||(t[5]=e=>c.getCollectionA(n.columnASelected))},[Bp,Vp,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.collections,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e,key:e.id},[(0,i._)("span",null,[(0,i.Uk)(" ["+(0,l.zw)(c.charLimit(e.game))+"] ",1),e.is_copy_free?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",jp," [copy restricted] ")),(0,i.Uk)(" "+(0,l.zw)(c.charLimit(e.title)),1)])],8,Op)))),128)),Hp,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.favorites,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e,key:e.id},[(0,i._)("span",null,[(0,i.Uk)(" ["+(0,l.zw)(c.charLimit(e.game))+"] ",1),e.is_copy_free?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",Zp," [copy restricted] ")),(0,i.Uk)(" "+(0,l.zw)(c.charLimit(e.title)),1)])],8,Np)))),128))],544)),[[a.bM,n.columnASelected]]):(0,i.kq)("",!0)])):(0,i.kq)("",!0),null!==n.columnASelected?((0,i.wg)(),(0,i.iD)("div",Wp,[(0,i._)("h2",Fp,[(0,i.Uk)((0,l.zw)(c.charLimit(n.columnASelected.title))+" ("+(0,l.zw)(n.typeA),1),"campain"===n.typeA?((0,i.wg)(),(0,i.iD)("span",Kp," for "+(0,l.zw)(n.columnASelected.table),1)):(0,i.kq)("",!0),(0,i.Uk)(") "),(0,i._)("span",Yp,[c.showApplyExchanges?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"button is-small is-success mr-2",onClick:t[6]||(t[6]=(...e)=>c.applyExchanges&&c.applyExchanges(...e))}," Apply exchanges ")):(0,i.kq)("",!0),(0,i._)("button",{class:"button is-small",onClick:t[7]||(t[7]=(...e)=>c.cancel&&c.cancel(...e))},"Cancel")])]),n.aIsLocked?((0,i.wg)(),(0,i.iD)("span",Qp,[(0,i.Wm)(r,{icon:"lock",style:{color:"red"}}),(0,i.Uk)(" Exports restricted (copy protected)")])):((0,i.wg)(),(0,i.iD)("span",Rp,[(0,i.Wm)(r,{icon:"unlock",style:{color:"green"}}),(0,i.Uk)(" Free exports")]))])):(0,i.kq)("",!0),(0,i._)("div",Jp,[null!==n.columnASelected?((0,i.wg)(),(0,i.iD)("table",Xp,[(0,i._)("thead",null,[eg,tg,n.aIsLocked?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("th",sg,[(0,i.Uk)("Copy to "),(0,i.Wm)(r,{icon:"arrow-right"})]))]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.campainA.items,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id,class:"hoverable",onClick:t=>c.addToExchanges("from_a","items",e.id)},[(0,i._)("td",null,(0,l.zw)(c.charLimit(e.name)),1),(0,i._)("td",{class:(0,l.C_)(e.type)},(0,l.zw)(e.type),3),n.aIsLocked?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("td",ig,[c.checked("from_a","items",e.id)?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"arrow-right",style:{color:"#8a9df3"},class:"is-pulled-right"})):(0,i.kq)("",!0)]))],8,ag)))),128))])])):(0,i.kq)("",!0),null!==n.columnASelected?((0,i.wg)(),(0,i.iD)("table",lg,[(0,i._)("thead",null,[og,n.aIsLocked?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("th",ng,[(0,i.Uk)("Copy to "),(0,i.Wm)(r,{icon:"arrow-right"})]))]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.campainA.pcs,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id,class:"hoverable",onClick:t=>c.addToExchanges("from_a","pcs",e.id)},[(0,i._)("td",null,(0,l.zw)(c.charLimit(e.name)),1),n.aIsLocked?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("td",rg,[c.checked("from_a","pcs",e.id)?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"arrow-right",style:{color:"#8a9df3"},class:"is-pulled-right"})):(0,i.kq)("",!0)]))],8,cg)))),128))])])):(0,i.kq)("",!0)])]),(0,i._)("div",dg,[null===n.columnBSelected&null!==n.columnASelected?((0,i.wg)(),(0,i.iD)("label",mg,[(0,i.Uk)(" Exchange with: "),(0,i._)("div",ug,[(0,i._)("label",hg,[(0,i.wy)((0,i._)("input",{type:"radio",name:"answer","onUpdate:modelValue":t[8]||(t[8]=e=>n.typeB=e),value:"campain"},null,512),[[a.G2,n.typeB]]),(0,i.Uk)(" a Campaign ")]),(0,i._)("label",pg,[(0,i.wy)((0,i._)("input",{type:"radio",name:"answer","onUpdate:modelValue":t[9]||(t[9]=e=>n.typeB=e),value:"collection"},null,512),[[a.G2,n.typeB]]),(0,i.Uk)(" a Collection ")]),"campain"===n.typeB?(0,i.wy)(((0,i.wg)(),(0,i.iD)("select",{key:0,class:"select is-fullwidth","onUpdate:modelValue":t[10]||(t[10]=e=>n.columnBSelected=e),onChange:t[11]||(t[11]=e=>c.getCampainB(n.columnBSelected))},[gg,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(c.campainsAvailableInB,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e,key:e.id},[(0,i._)("span",null,[(0,i.Uk)(" ["+(0,l.zw)(c.charLimit(e.table))+"] ["+(0,l.zw)(c.charLimit(e.game))+"] ",1),e.is_copy_free?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",_g," [copy restricted] ")),(0,i.Uk)(" "+(0,l.zw)(c.charLimit(e.title)),1)])],8,wg)))),128))],544)),[[a.bM,n.columnBSelected]]):(0,i.kq)("",!0),"collection"===n.typeB?(0,i.wy)(((0,i.wg)(),(0,i.iD)("select",{key:1,class:"select is-fullwidth","onUpdate:modelValue":t[12]||(t[12]=e=>n.columnBSelected=e),onChange:t[13]||(t[13]=e=>c.getCollectionB(n.columnBSelected))},[vg,yg,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(c.collectionsAvailableInB,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e,key:e.id},[(0,i._)("span",null,[(0,i.Uk)(" ["+(0,l.zw)(c.charLimit(e.game))+"] ",1),e.is_copy_free?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",kg," [copy restricted] ")),(0,i.Uk)(" "+(0,l.zw)(c.charLimit(e.title)),1)])],8,bg)))),128)),fg,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.favorites,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e,key:e.id},[(0,i._)("span",null,[(0,i.Uk)(" ["+(0,l.zw)(c.charLimit(e.game))+"] ",1),e.is_copy_free?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",Dg," [copy restricted] ")),(0,i.Uk)(" "+(0,l.zw)(c.charLimit(e.title)),1)])],8,Cg)))),128))],544)),[[a.bM,n.columnBSelected]]):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),null!==n.columnBSelected?((0,i.wg)(),(0,i.iD)("div",Mg,[(0,i._)("h2",Ig,[(0,i.Uk)((0,l.zw)(c.charLimit(n.columnBSelected.title))+" ("+(0,l.zw)(n.typeB),1),"campain"===n.typeB?((0,i.wg)(),(0,i.iD)("span",Pg," for "+(0,l.zw)(n.columnBSelected.table),1)):(0,i.kq)("",!0),(0,i.Uk)(") ")]),n.bIsLocked?((0,i.wg)(),(0,i.iD)("span",xg,[(0,i.Wm)(r,{icon:"lock",style:{color:"red"}}),(0,i.Uk)(" Exports restricted (copy protected)")])):((0,i.wg)(),(0,i.iD)("span",Lg,[(0,i.Wm)(r,{icon:"unlock",style:{color:"green"}}),(0,i.Uk)(" Free exports")]))])):(0,i.kq)("",!0),(0,i._)("div",Sg,[null!==n.columnBSelected?((0,i.wg)(),(0,i.iD)("table",Tg,[(0,i._)("thead",null,[n.bIsLocked?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("th",$g,[(0,i.Wm)(r,{icon:"arrow-left"}),(0,i.Uk)(" Copy to")])),Ug,Ag]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.campainB.items,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id,class:"hoverable",onClick:t=>c.addToExchanges("from_b","items",e.id)},[n.bIsLocked?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("td",Eg,[c.checked("from_b","items",e.id)?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"arrow-left",style:{color:"#8a9df3"}})):(0,i.kq)("",!0)])),(0,i._)("td",{class:(0,l.C_)(e.type)},(0,l.zw)(e.type),3),(0,i._)("td",null,(0,l.zw)(c.charLimit(e.name)),1)],8,qg)))),128))])])):(0,i.kq)("",!0),null!==n.columnBSelected?((0,i.wg)(),(0,i.iD)("table",zg,[(0,i._)("thead",null,[n.bIsLocked?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("th",Gg,[(0,i.Wm)(r,{icon:"arrow-left"}),(0,i.Uk)(" Copy to")])),Bg]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.campainB.pcs,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id,class:"hoverable",onClick:t=>c.addToExchanges("from_b","pcs",e.id)},[n.bIsLocked?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("td",Og,[c.checked("from_b","pcs",e.id)?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"arrow-left",style:{color:"#8a9df3"}})):(0,i.kq)("",!0)])),(0,i._)("td",null,(0,l.zw)(c.charLimit(e.name)),1)],8,Vg)))),128))])])):(0,i.kq)("",!0)])])])])}var Hg={name:"ExchangesView",data(){return{campains:[],columnASelected:null,columnBSelected:null,campainA:[],aIsLocked:!1,bIsLocked:!1,campainB:[],collections:[],favorites:[],exchanges:{a_type:null,a_id:null,b_type:null,b_id:null,from_a:{items:[],pcs:[]},from_b:{items:[],pcs:[]}},typeA:"campain",typeB:"campain"}},beforeMount(){(0,x.Z)({method:"get",url:"/campains/exchanges_loading/",headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.campains=e.data.campains,this.collections=e.data.collections,this.favorites=e.data.favorites})).catch((e=>{console.log(e)}))},computed:{showApplyExchanges(){return this.exchanges.from_a.items.length>0||this.exchanges.from_a.pcs.length>0||this.exchanges.from_b.items.length>0||this.exchanges.from_b.pcs.length>0},collectionsAvailableInB(){return null===this.columnASelected?[]:this.collections.filter((e=>e.id!==this.columnASelected.id))},campainsAvailableInB(){return null===this.columnASelected?[]:this.campains.filter((e=>e.id!==this.columnASelected.id))}},methods:{applyExchanges(){this.exchanges.a_type=this.typeA,this.exchanges.b_type=this.typeB,this.exchanges.a_id=this.columnASelected.id,this.exchanges.b_id=this.columnBSelected.id,(0,x.Z)({method:"post",url:"/campains/apply_exchanges/",headers:{Authorization:`Token ${this.$store.state.token}`},data:{exchanges:this.exchanges}}).then((e=>{this.campainA=e.data.source_a,this.campainB=e.data.source_b,(0,$t.toast)({message:"Exchanges applied",type:"is-success",position:"bottom-right",dismissible:!0,pauseOnHover:!0,duration:3e3}),this.exchanges.from_a.items=[],this.exchanges.from_a.pcs=[],this.exchanges.from_b.items=[],this.exchanges.from_b.pcs=[]})).catch((e=>{console.log(e)}))},setLocks(){console.log("column A: ",this.columnASelected),console.log("column B: ",this.columnBSelected),this.typeA===this.typeB&"collection"===this.typeA&&(console.log("collection to collection"),this.columnBSelected.is_copy_free&this.columnASelected.author===this.$store.state.user.id?(this.aIsLocked=!0,this.bIsLocked=!1):this.columnASelected.is_copy_free&this.columnBSelected.author===this.$store.state.user.id?(this.aIsLocked=!1,this.bIsLocked=!0):(this.aIsLocked=!0,this.bIsLocked=!0),this.columnASelected.author===this.columnBSelected.author&this.columnASelected.author===this.$store.state.user.id&&(this.aIsLocked=!1,this.bIsLocked=!1)),"campain"===this.typeA&&("campain"===this.typeB&&(console.log("campain to campain"),this.columnASelected.is_copy_free===this.columnBSelected.is_copy_free?(console.log("both locked or both unlocked"),this.aIsLocked=!1,this.bIsLocked=!1):this.columnASelected.is_copy_free?(this.aIsLocked=!1,this.bIsLocked=!0):(this.aIsLocked=!0,this.bIsLocked=!1)),"collection"===this.typeB&&(this.columnASelected.is_copy_free||(this.aIsLocked=!0,this.bIsLocked=!1),this.columnASelected.is_copy_free&&(this.columnBSelected.is_copy_free||(this.aIsLocked=!0,this.bIsLocked=!0),this.columnBSelected.is_copy_free&&(this.aIsLocked=!0,this.bIsLocked=!1),this.columnBSelected.author===this.$store.state.user.id&&(this.aIsLocked=!1,this.bIsLocked=!1)))),"campain"===this.typeA&"collection"===this.typeB&&(this.columnASelected.is_copy_free||(this.aIsLocked=!0,this.bIsLocked=!1),this.columnASelected.is_copy_free&&(this.columnBSelected.is_copy_free||(this.aIsLocked=!0,this.bIsLocked=!0,this.columnBSelected.author===this.$store.state.user.id&&(this.aIsLocked=!1,this.bIsLocked=!1)),this.columnBSelected.is_copy_free&&(this.aIsLocked=!0,this.bIsLocked=!1,this.columnBSelected.author===this.$store.state.user.id&&(this.aIsLocked=!1,this.bIsLocked=!1)))),"collection"===this.typeA&"campain"===this.typeB&&(this.columnBSelected.is_copy_free||(this.aIsLocked=!1,this.bIsLocked=!0),this.columnBSelected.is_copy_free&&(this.columnASelected.is_copy_free||(this.aIsLocked=!0,this.bIsLocked=!0,this.columnASelected.author===this.$store.state.user.id&&(this.aIsLocked=!1,this.bIsLocked=!1)),this.columnASelected.is_copy_free&&(this.aIsLocked=!1,this.bIsLocked=!0,this.columnASelected.author===this.$store.state.user.id&&(this.aIsLocked=!1,this.bIsLocked=!1))))},charLimit(e){return e.length<=25?e:e.slice(0,22)+"..."},addToExchanges(e,t,s){if(!("from_a"===e&this.aIsLocked)&&!("from_b"===e&this.bIsLocked)){if(null===this.columnBSelected)return console.log("campaignSelectedB: ",this.columnBSelected),void(0,$t.toast)({message:"Please select a campaign or a collection to exchange with",type:"is-warning",position:"center",dismissible:!0,pauseOnHover:!0,duration:1e4});if(this.exchanges[e][t].filter((e=>e===s)).length){let a=this.exchanges[e][t].findIndex((e=>e===s));return this.exchanges[e][t].splice(a,1),void console.log("exchanges",this.exchanges)}this.exchanges[e][t].push(s)}},checked(e,t,s){return!!this.exchanges[e][t].filter((e=>e===s)).length},getCollectionA(e){this.aIsLocked=!e.is_copy_free,null!==this.columnASelected&&(console.log("get datas for : ",e.title),(0,x.Z)({url:"/campains/collection/",method:"get",headers:{Authorization:`Token ${this.$store.state.token}`},params:{id:e.id}}).then((e=>{this.campainA=e.data,console.log(this.campainA)})).catch((e=>{console.log(e)})))},getCollectionB(e){this.bIsLocked=!e.is_copy_free,null!==this.columnBSelected&&(console.log("get datas for : ",e.title),(0,x.Z)({url:"/campains/collection/",method:"get",headers:{Authorization:`Token ${this.$store.state.token}`},params:{id:e.id}}).then((e=>{this.campainB=e.data,console.log(this.campainB),this.setLocks()})).catch((e=>{console.log(e)})))},getCampainA(e){this.aIsLocked=!e.is_copy_free,null!==this.columnASelected&&(console.log("get datas for : ",e.title),(0,x.Z)({method:"get",url:`/campains/campains/${e.id}/`,headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.campainA=e.data.campain,console.log(this.campainA)})).catch((e=>{console.log(e)})))},cancel(){this.columnASelected=null,this.columnBSelected=null,this.campainA=[],this.campainB=[],this.exportsList=[]},getCampainB(e){null!==this.columnBSelected&&(console.log("get datas for : ",e.title),(0,x.Z)({method:"get",url:`/campains/campains/${e.id}/`,headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.campainB=e.data.campain,this.setLocks(),console.log(this.campainB)})).catch((e=>{console.log(e)})))}}};const Ng=(0,T.Z)(Hg,[["render",jg],["__scopeId","data-v-08659dcb"]]);var Zg=Ng;const Wg=e=>((0,i.dD)("data-v-298c380c"),e=e(),(0,i.Cn)(),e),Fg={class:"container"},Kg=Wg((()=>(0,i._)("h1",{class:"title"},"Subscriptions",-1))),Yg={class:"legal mb-4"},Rg=Wg((()=>(0,i._)("strong",{class:"mr-4"},[(0,i.Uk)(" I accept the "),(0,i._)("a",{href:"privacyPolicy.html",target:"_blank"},"Privacy Policy")],-1))),Qg=Wg((()=>(0,i._)("strong",{class:"mr-4"},[(0,i.Uk)(" I accept the "),(0,i._)("a",{href:"TandC.html",target:"_blank"},"Terms and Conditions")],-1))),Jg=Wg((()=>(0,i._)("strong",{class:"mr-4"}," I am 18+ ",-1))),Xg=["onClick"],ew={class:"subtitle",style:{color:"white"}},tw=Wg((()=>(0,i._)("hr",null,null,-1))),sw=Wg((()=>(0,i._)("hr",null,null,-1))),aw={class:""},iw=Wg((()=>(0,i._)("hr",null,null,-1))),lw=Wg((()=>(0,i._)("br",null,null,-1))),ow=Wg((()=>(0,i._)("ul",null,[(0,i._)("li",null,"- Create new campaigns"),(0,i._)("li",null,"- Create new items collections"),(0,i._)("li",null,"- Use the shared collections for your own campaigns")],-1)));function nw(e,t,s,o,n,c){return(0,i.wg)(),(0,i.iD)("div",Fg,[Kg,(0,i._)("div",Yg,[(0,i._)("p",null,[Rg,(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>n.acceptPolicy=e)},null,512),[[a.e8,n.acceptPolicy]])]),(0,i._)("p",null,[Qg,(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=e=>n.acceptTC=e)},null,512),[[a.e8,n.acceptTC]])]),(0,i._)("p",null,[Jg,(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=e=>n.accept18=e)},null,512),[[a.e8,n.accept18]])])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.plans,(e=>((0,i.wg)(),(0,i.iD)("div",{onClick:t=>c.subscribe(e.id),key:e.id,class:(0,l.C_)({box:c.termsAccepted,"box-disabled":!c.termsAccepted})},[(0,i._)("h2",ew,(0,l.zw)(e.product.name),1),tw,(0,i._)("p",null,(0,l.zw)(e.unit_amount/100)+" "+(0,l.zw)(e.currency)+" / "+(0,l.zw)(e.recurring_interval_count)+" "+(0,l.zw)(e.recurring_interval),1),sw,(0,i._)("p",aw,(0,l.zw)(e.product.description),1),iw,(0,i.Uk)(" Get acces to all features suitable for Game Masters. "),lw,ow],10,Xg)))),128))])}var cw={name:"SubscriptionsView",data(){return{plans:[],acceptPolicy:!1,acceptTC:!1,accept18:!1}},computed:{termsAccepted(){return this.acceptPolicy&&this.acceptTC&&this.accept18}},methods:{subscribe(e){this.termsAccepted&&(0,x.Z)({method:"post",url:"campains/subscriptions/checkout/",data:{priceId:e},headers:{Authorization:"Token "+this.$store.state.token}}).then((e=>{window.location.href=e.data.url})).catch((e=>{console.log(e)}))}},beforeMount(){(0,x.Z)({url:"campains/subscriptions/plans/",method:"GET",headers:{Authorization:`Token ${this.$store.state.token}`}}).then((e=>{this.plans=e.data})).catch((e=>{console.log(e)}))}};const rw=(0,T.Z)(cw,[["render",nw],["__scopeId","data-v-298c380c"]]);var dw=rw;const mw=[{path:"/",name:"home",component:oe},{path:"/about",name:"about",component:()=>s.e(443).then(s.bind(s,4228))},{path:"/signup",name:"signup",component:vr},{path:"/login",name:"login",component:Tr},{path:"/send_confirmation_email_again",name:"send_confirmation_email_again",component:Br},{path:"/forgotten_password",name:"forgotten_password",component:Fr},{path:"/login_from_email/:token",name:"login_from_email",component:ad},{path:"/account",name:"account",component:vd,meta:{requireLogin:!0}},{path:"/dashboard",name:"dashboard",component:Je,meta:{requireLogin:!0}},{path:"/change_username",name:"change_username",component:Id,meta:{requireLogin:!0}},{path:"/change_password",name:"change_password",component:qd,meta:{requireLogin:!0}},{path:"/change_email",name:"change_email",component:Hd,meta:{requireLogin:!0}},{path:"/create_table",name:"create_table",component:wt,meta:{requireLogin:!0}},{path:"/edit_table/:id",name:"edit_table",component:qt,meta:{requireLogin:!0}},{path:"/table/:id",name:"table",component:ys,meta:{requireLogin:!0}},{path:"/campain/",name:"NewCampainView",component:qs,meta:{requireLogin:!0}},{path:"/campain/:id",name:"CampainView",component:$c,meta:{requireLogin:!0}},{path:"/campain/edit/:id",name:"CampainEditView",component:ar,meta:{requireLogin:!0}},{path:"/collections/",name:"CollectionsView",component:pu,meta:{requireLogin:!0}},{path:"/collection/:id",name:"collectionDetailView",component:Pp,meta:{requireLogin:!0}},{path:"/exchanges/",name:"exchangesView",component:Zg,meta:{requireLogin:!0}},{path:"/subscriptions/",name:"subscriptionsView",component:dw,meta:{requireLogin:!0}},{path:"/guide/",name:"guide",component:xe}],uw=(0,A.p7)({history:(0,A.r5)(),routes:mw});uw.beforeEach(((e,t,s)=>{e.matched.some((e=>e.meta.requireLogin))&&!Lr.state.isAuthenticated?s({name:"login"}):s()}));var hw=uw,pw=s(3494),gw=s(7749),ww=s(8539);x.Z.defaults.baseURL="https://rpgadventure.eu",pw.vI.add(ww.mRB),(0,a.ri)(U).component("fa",gw.GN).use(Lr).use(hw,x.Z).mount("#app")}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var l=t[a]={exports:{}};return e[a].call(l.exports,l,l.exports,s),l.exports}s.m=e,function(){var e=[];s.O=function(t,a,i,l){if(!a){var o=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],l=e[d][2];for(var n=!0,c=0;c<a.length;c++)(!1&l||o>=l)&&Object.keys(s.O).every((function(e){return s.O[e](a[c])}))?a.splice(c--,1):(n=!1,l<o&&(o=l));if(n){e.splice(d--,1);var r=i();void 0!==r&&(t=r)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[a,i,l]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce((function(t,a){return s.f[a](e,t),t}),[]))}}(),function(){s.u=function(e){return"js/about.7218931d.js"}}(),function(){s.miniCssF=function(e){return"css/about.3e1b031e.css"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="lgm:";s.l=function(a,i,l,o){if(e[a])e[a].push(i);else{var n,c;if(void 0!==l)for(var r=document.getElementsByTagName("script"),d=0;d<r.length;d++){var m=r[d];if(m.getAttribute("src")==a||m.getAttribute("data-webpack")==t+l){n=m;break}}n||(c=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,s.nc&&n.setAttribute("nonce",s.nc),n.setAttribute("data-webpack",t+l),n.src=a),e[a]=[i];var u=function(t,s){n.onerror=n.onload=null,clearTimeout(h);var i=e[a];if(delete e[a],n.parentNode&&n.parentNode.removeChild(n),i&&i.forEach((function(e){return e(s)})),t)return t(s)},h=setTimeout(u.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=u.bind(null,n.onerror),n.onload=u.bind(null,n.onload),c&&document.head.appendChild(n)}}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p=""}(),function(){if("undefined"!==typeof document){var e=function(e,t,s,a,i){var l=document.createElement("link");l.rel="stylesheet",l.type="text/css";var o=function(s){if(l.onerror=l.onload=null,"load"===s.type)a();else{var o=s&&("load"===s.type?"missing":s.type),n=s&&s.target&&s.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=o,c.request=n,l.parentNode&&l.parentNode.removeChild(l),i(c)}};return l.onerror=l.onload=o,l.href=t,s?s.parentNode.insertBefore(l,s.nextSibling):document.head.appendChild(l),l},t=function(e,t){for(var s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var i=s[a],l=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(l===e||l===t))return i}var o=document.getElementsByTagName("style");for(a=0;a<o.length;a++){i=o[a],l=i.getAttribute("data-href");if(l===e||l===t)return i}},a=function(a){return new Promise((function(i,l){var o=s.miniCssF(a),n=s.p+o;if(t(o,n))return i();e(a,n,null,i,l)}))},i={143:0};s.f.miniCss=function(e,t){var s={443:1};i[e]?t.push(i[e]):0!==i[e]&&s[e]&&t.push(i[e]=a(e).then((function(){i[e]=0}),(function(t){throw delete i[e],t})))}}}(),function(){var e={143:0};s.f.j=function(t,a){var i=s.o(e,t)?e[t]:void 0;if(0!==i)if(i)a.push(i[2]);else{var l=new Promise((function(s,a){i=e[t]=[s,a]}));a.push(i[2]=l);var o=s.p+s.u(t),n=new Error,c=function(a){if(s.o(e,t)&&(i=e[t],0!==i&&(e[t]=void 0),i)){var l=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;n.message="Loading chunk "+t+" failed.\n("+l+": "+o+")",n.name="ChunkLoadError",n.type=l,n.request=o,i[1](n)}};s.l(o,c,"chunk-"+t,t)}},s.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,l,o=a[0],n=a[1],c=a[2],r=0;if(o.some((function(t){return 0!==e[t]}))){for(i in n)s.o(n,i)&&(s.m[i]=n[i]);if(c)var d=c(s)}for(t&&t(a);r<o.length;r++)l=o[r],s.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return s.O(d)},a=self["webpackChunklgm"]=self["webpackChunklgm"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(1340)}));a=s.O(a)})();
//# sourceMappingURL=app.4350ff61.js.map